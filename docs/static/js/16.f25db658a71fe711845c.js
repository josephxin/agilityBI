webpackJsonp([16],{AStK:function(t,e){},bHyn:function(t,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c("4YfN"),n=c.n(o),i=c("+ryu"),r=c("V7Bk"),a=c("M6Nr"),l=c("gyMJ"),s=c("R4Sj"),u=c("jt1B"),d={components:{pagination:i.a,collectBtn:r.a,collectContent:a.a},data:function(){var t=this;return{total:0,title:"我的收藏",btn:[{name:"导出",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.$root.exportEcharts()}},{name:"删除",iconName:"icon-unie639",className:"report_blue",fn:function(){t.reportFolderDeleteAjax()}},{name:"制作报告",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.goProduceReport()}}],collectList:[],collectCheckList:[],options:[],currentFolder:0}},computed:n()({},Object(s.c)(["dataLimit","dataPage","currPageSearch"])),watch:{currentFolder:{handler:function(t,e){this.reportListAjax(this.currPageSearch)}},currPageSearch:{handler:function(t,e){this.reportListAjax(t)},deep:!0},dataLimit:{handler:function(t,e){0!=this.currentFolder&&this.reportListAjax(this.currPageSearch)},deep:!0},dataPage:{handler:function(t,e){0!=this.currentFolder&&this.reportListAjax(this.currPageSearch)},deep:!0}},methods:{goProduceReport:function(){var t=this,e=[];this.collectCheckList.forEach(function(c){t.collectList.forEach(function(t){t.id==c&&e.push({folderId:t.folderId,reportId:t.id,reportName:t.reportName})})}),this.$store.commit("changeReportList",e),this.$router.push({name:"produceReport",params:{id:"1"}})},folderListAjax:function(){var t=this;Object(l.S)().then(function(e){if(200==e.code){var c=e.data;c.constructor==Array&&c.length>0&&(t.options=c,t.currentFolder=e.data[0].id)}}).catch(function(t){console.log(t)})},reportListAjax:function(t){var e=this;Object(l.M)({page:this.dataPage,size:this.dataLimit,folderId:this.currentFolder,reportName:t}).then(function(t){if(200==t.code){var c=[];t.data.list.forEach(function(t,e){var o={folderId:t.folderId,folderName:t.folderName,id:t.id,reportId:t.reportId,reportName:t.reportName,reportUrl:t.storeUrl};c.push(o)}),e.collectCheckList=[],e.collectList=c,e.total=t.data.total}}).catch(function(t){console.log(t)})},reportFolderDeleteAjax:function(){var t=this;this.$confirm("确定要删除这些报告吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.collectCheckList.join(",");Object(l.L)({ids:e}).then(function(e){200==e.code&&(t.reportListAjax(t.currPageSearch),Object(u.a)({message:"删除成功",type:"success"}))}).catch(function(t){console.log(t)})}).catch(function(){Object(u.a)({message:"已取消删除"})})}},created:function(){this.folderListAjax()},mounted:function(){this.$root.search=""}},h={render:function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"collect"},[c("div",{staticClass:"search-result"},[c("div",{staticClass:"content"},[c("div",{staticClass:"clearfix main_sum"},[c("div",{staticClass:"main_echarts"},[c("collect-btn",{attrs:{btnCollectList:t.collectList,btnCollectCheckList:t.collectCheckList,title:t.title,type:"collect",btn:t.btn,options:t.options},on:{"update:btnCollectList":function(e){t.collectList=e},"update:btn-collect-list":function(e){t.collectList=e},"update:btnCollectCheckList":function(e){t.collectCheckList=e},"update:btn-collect-check-list":function(e){t.collectCheckList=e}}}),t._v(" "),c("collect-content",{attrs:{contentCollectList:t.collectList,contentCollectCheckList:t.collectCheckList,type:"collect"},on:{"update:contentCollectCheckList":function(e){t.collectCheckList=e},"update:content-collect-check-list":function(e){t.collectCheckList=e}}}),t._v(" "),c("div",{staticClass:"clearfix"},[c("pagination",{attrs:{total:t.total}})],1)],1)])])])])},staticRenderFns:[]};var f=c("C7Lr")(d,h,!1,function(t){c("AStK")},"data-v-cd8b3fd2",null);e.default=f.exports}});