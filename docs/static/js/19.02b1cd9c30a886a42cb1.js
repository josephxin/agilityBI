webpackJsonp([19],{YjlR:function(t,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=c("4YfN"),n=c.n(o),i=c("+ryu"),r=c("V7Bk"),a=c("M6Nr"),l=c("ufMx"),s=c("gyMJ"),u=c("R4Sj"),d=c("jt1B"),h={components:{pagination:i.a,collectBtn:r.a,collectContent:a.a,dialogExport:l.a},data:function(){var t=this;return{total:0,title:"我的报告",btn:[{name:"导出",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.exportReportList()}},{name:"删除",iconName:"icon-unie639",className:"report_blue",fn:function(){t.reportFolderDeleteAjax()}},{name:"制作报告",iconName:"icon-zhizuo",className:"report_blue",fn:function(){t.goProduceReport()}}],options:[],currentFolder:0,collectList:[],collectCheckList:[]}},computed:n()({},Object(u.c)(["dataLimit","dataPage","currPageSearch"])),watch:{currentFolder:{handler:function(t,e){this.reportFolderListAjax(this.currPageSearch)}},currPageSearch:{handler:function(t,e){this.reportFolderListAjax(t)},deep:!0},dataLimit:{handler:function(t,e){0!=this.currentFolder&&this.reportFolderListAjax(this.currPageSearch)},deep:!0},dataPage:{handler:function(t,e){0!=this.currentFolder&&this.reportFolderListAjax(this.currPageSearch)},deep:!0}},methods:{exportReportList:function(){var t=this;this.collectCheckList.forEach(function(e){t.collectList.forEach(function(c){c.id==e&&""!=c.reportUrl&&t.$exportPng(c.reportUrl,c.reportName)})})},confirmExport:function(t){},goProduceReport:function(){var t=this,e=[];this.collectCheckList.forEach(function(c){t.collectList.forEach(function(t){t.id==c&&e.push({folderId:t.folderId,reportId:t.reportId,reportName:t.reportName})})}),this.$store.commit("changeReportList",e),this.$router.push({name:"produceReport",params:{id:"2"}})},folderListAjax:function(){var t=this;Object(s.g)().then(function(e){200==e.code&&e.data&&e.data.length>0&&(t.options=e.data,t.currentFolder=e.data[0].id)}).catch(function(t){console.log(t)})},reportFolderListAjax:function(t){var e=this;Object(s.D)({page:this.dataPage,size:this.dataLimit,folderId:this.currentFolder,reportName:t}).then(function(t){200==t.code&&(e.collectCheckList=[],e.collectList=t.data.list,e.total=t.data.total)}).catch(function(t){console.log(t)})},reportFolderDeleteAjax:function(){var t=this;this.$confirm("确定要删除这些报告吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.collectCheckList.join(",");Object(s.C)({ids:e}).then(function(e){200==e.code&&(t.reportFolderListAjax(t.currPageSearch),Object(d.a)({message:"删除成功",type:"success"}))}).catch(function(t){console.log(t)})}).catch(function(){Object(d.a)({message:"已取消删除"})})}},created:function(){this.folderListAjax()},mounted:function(){this.$root.search=""}},p={render:function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"collect"},[c("div",{staticClass:"search-result"},[c("div",{staticClass:"content"},[c("div",{staticClass:"clearfix main_sum"},[c("div",{staticClass:"main_echarts"},[c("collect-btn",{attrs:{btnCollectList:t.collectList,btnCollectCheckList:t.collectCheckList,title:t.title,type:"myReport",btn:t.btn,options:t.options},on:{"update:btnCollectList":function(e){t.collectList=e},"update:btn-collect-list":function(e){t.collectList=e},"update:btnCollectCheckList":function(e){t.collectCheckList=e},"update:btn-collect-check-list":function(e){t.collectCheckList=e}}}),t._v(" "),c("collect-content",{attrs:{contentCollectList:t.collectList,contentCollectCheckList:t.collectCheckList,type:"myReport"},on:{"update:contentCollectCheckList":function(e){t.collectCheckList=e},"update:content-collect-check-list":function(e){t.collectCheckList=e}}}),t._v(" "),c("div",{staticClass:"clearfix"},[c("pagination",{attrs:{total:t.total}})],1)],1)])])])])},staticRenderFns:[]};var f=c("C7Lr")(h,p,!1,function(t){c("igpY")},"data-v-19d7523a",null);e.default=f.exports},igpY:function(t,e){}});