webpackJsonp([0],{"+ryu":function(t,e,n){"use strict";var o=n("4YfN"),i=n.n(o),r=n("R4Sj"),s={props:{total:{type:Number}},data:function(){return{currentPage:1}},computed:i()({},Object(r.c)(["dataPage","dataLimit"])),methods:{handleSizeChange:function(t){this.$store.commit("changeDataLimit",t)},handleCurrentChange:function(t){this.$store.commit("changeDataPage",t)}},mounted:function(){this.$store.commit("changeDataPage",1),this.$store.commit("changeDataLimit",10)},beforeDestroy:function(){}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return this.total>0?e("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next",total:this.total||1,"page-size":this.dataLimit,"page-sizes":[5,10,15,20],"current-page":this.dataPage,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}}):this._e()},staticRenderFns:[]};var l=n("C7Lr")(s,a,!1,function(t){n("ng/y")},"data-v-7109fe04",null);e.a=l.exports},"1bId":function(t,e){},"9Aw0":function(t,e){t.exports="data:image/png;base64,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"},"9bIa":function(t,e,n){"use strict";var o={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"rightContent",staticClass:"right-content"},[this._t("default")],2)},staticRenderFns:[]};var i=n("C7Lr")({components:{},data:function(){return{}},props:{},computed:{flagLeftBar:function(){return this.$store.state.flagLeftBar},marginLeft:function(){return this.$store.state.marginLeft}},watch:{flagLeftBar:{handler:function(t,e){var n;n=t?this.marginLeft:6,this.$refs.rightContent.style.marginLeft=n+"px"}}},methods:{},mounted:function(){this.$refs.rightContent.style.marginLeft=this.marginLeft+"px"}},o,!1,function(t){n("u/vk")},"data-v-fc6238f0",null);e.a=i.exports},AWrA:function(t,e,n){var o={"./placeholder_blue.png":"k8xZ","./placeholder_green.png":"s2xt","./placeholder_red.png":"9Aw0"};function i(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id="AWrA"},BVMJ:function(t,e){},FViS:function(t,e,n){"use strict";var o=n("n0MN"),i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.flagCanvasWrap,expression:"flagCanvasWrap"}],staticClass:"canvas-border",attrs:{id:"canvasWrap"}},t._l(t.domList,function(e,o){return n("vue-draggable-resizable",{key:o,class:e.type,style:"min-width: "+(6*e.lw+2)+"px; min-height: "+(6*e.lw+2)+"px; border: "+e.lineWidth+"px "+e.lineType+" "+e.lineColor,attrs:{index:o,w:e.w,h:e.h,x:e.x,y:e.y,minw:20,minh:14,parent:!0,title:"双击删除"},on:{resizing:t.onResizing,resizestop:t.onResizestop,dragging:t.onDragging,dragstop:t.onDragstop},nativeOn:{dblclick:function(e){return t.onDblclick(o)},mousedown:function(e){return t.getIndex(o)}}},["textbox"==e.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"item.val"}],staticClass:"draggableContent",style:"font-family: "+e.fontFamily+"; font-size: "+e.fontSize+"px; font-weight: "+e.fontWeight+"; font-style: "+e.fontStyle+"; text-decoration: "+e.fontUnderline+"; color: "+e.fontColor,domProps:{value:e.val},on:{focus:t.fn_focus,blur:t.fn_blur,input:function(n){n.target.composing||t.$set(e,"val",n.target.value)}}}):t._e(),t._v(" "),"linkBtn"==e.type?n("a",{staticClass:"draggableLink",style:"font-family: "+e.fontFamily+"; font-size: "+e.fontSize+"px; font-weight: "+e.fontWeight+"; font-style: "+e.fontStyle+"; color: "+e.fontColor,attrs:{contenteditable:"true"},on:{focus:t.fn_focus,blur:t.fn_blur}},[t._v(t._s(e.url))]):t._e(),t._v(" "),"textTag"==e.type?n("el-tag",{key:e.tag,staticClass:"draggableTag",style:"height: "+1.5*e.fontSize+"px; font-family: "+e.fontFamily+"; font-size: "+e.fontSize+"px; font-weight: "+e.fontWeight+"; font-style: "+e.fontStyle+"; color: "+e.fontColor,attrs:{"disable-transitions":!0,contenteditable:"true"},nativeOn:{focus:function(e){return t.fn_focus(e)},blur:function(e){return t.fn_blur(e)}}},[t._v(t._s(e.tag))]):t._e(),t._v(" "),"hLine"==e.type?n("div",{staticClass:"draggableHLine",attrs:{tabindex:"0"},on:{focus:t.fn_focus,blur:t.fn_blur}},[n("div",{staticClass:"middle-line",style:"background-color:"+e.lc+"; height: "+2*e.lw+"px;"}),t._v(" "),n("div",{staticClass:"left-point",style:"margin-top: -"+3*e.lw+"px; width: "+4*e.lw+"px; height: "+4*e.lw+"px; border: "+e.lw+"px solid "+e.lc}),t._v(" "),n("div",{staticClass:"right-point",style:"margin-top: -"+3*e.lw+"px; width: "+4*e.lw+"px; height: "+4*e.lw+"px; border: "+e.lw+"px solid "+e.lc})]):t._e(),t._v(" "),"vLine"==e.type?n("div",{staticClass:"draggableVLine",attrs:{tabindex:"0"},on:{focus:t.fn_focus,blur:t.fn_blur}},[n("div",{staticClass:"middle-line",style:"background-color:"+e.lc+"; width: "+2*e.lw+"px;"}),t._v(" "),n("div",{staticClass:"top-point",style:"margin-left: -"+3*e.lw+"px; width: "+4*e.lw+"px; height: "+4*e.lw+"px; border: "+e.lw+"px solid "+e.lc}),t._v(" "),n("div",{staticClass:"bottom-point",style:"margin-left: -"+3*e.lw+"px; width: "+4*e.lw+"px; height: "+4*e.lw+"px; border: "+e.lw+"px solid "+e.lc})]):t._e(),t._v(" "),"hLine2"==e.type?n("div",{staticClass:"draggableHLine2",attrs:{tabindex:"0"},on:{focus:t.fn_focus,blur:t.fn_blur}},[n("div",{staticClass:"middle-line",style:"width: calc(100% - "+6*e.lw+"px); height: "+e.lw+"px; background-color: "+e.lc}),t._v(" "),n("div",{staticClass:"right-arrow",style:"margin-top: -"+2*e.lw+"px; border-top-width: "+2*e.lw+"px; border-bottom-width: "+2*e.lw+"px; border-left-width: "+6*e.lw+"px; border-left-color: "+e.lc})]):t._e(),t._v(" "),"vLine2"==e.type?n("div",{staticClass:"draggableVLine2",attrs:{tabindex:"0"},on:{focus:t.fn_focus,blur:t.fn_blur}},[n("div",{staticClass:"middle-line",style:"height: calc(100% - "+6*e.lw+"px); width: "+e.lw+"px; margin-top: "+6*e.lw+"px; background-color: "+e.lc}),t._v(" "),n("div",{staticClass:"top-arrow",style:"margin-left: -"+2*e.lw+"px; border-left-width: "+2*e.lw+"px; border-right-width: "+2*e.lw+"px; border-bottom-width: "+6*e.lw+"px; border-bottom-color: "+e.lc})]):t._e(),t._v(" "),"img"==e.type?n("div",{staticClass:"draggableImg",style:"background-image: url("+e.src+");",attrs:{tabindex:"0"},on:{focus:t.fn_focus,blur:t.fn_blur}},[n("button",{staticClass:"el-button el-button--primary el-button--small uploadBtn",attrs:{type:"button"},on:{click:function(e){return t.clickUpload(e)}}},[n("span",[t._v("点击上传")])]),t._v(" "),n("input",{staticClass:"uploadImg",attrs:{type:"file",name:"file"},on:{change:function(e){return t.changeUploadImg(e,o)}}})]):t._e()],1)}),1)},staticRenderFns:[]};var r=function(t){n("b9aI")},s=n("C7Lr")(o.a,i,!1,r,null,null);e.a=s.exports},Jk2L:function(t,e){},"Ky/g":function(t,e,n){"use strict";var o={props:{item:{type:Object,default:function(){}}},data:function(){return{}},computed:{},watch:{},methods:{},mounted:function(){}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"el-btn",class:this.item.className,attrs:{type:"button"}},[e("i",{staticClass:"iconfont",class:this.item.iconName}),this._v("\n\t"+this._s(this.item.name)+"\n")])},staticRenderFns:[]};var r=n("C7Lr")(o,i,!1,function(t){n("BVMJ")},"data-v-2f34ec56",null);e.a=r.exports},M6Nr:function(t,e,n){"use strict";var o={props:{contentCollectList:[Array],contentCollectCheckList:[Array],type:[String]},data:function(){return{img:localStorage.getItem("theme")?n("AWrA")("./placeholder_"+localStorage.getItem("theme")+".png"):n("k8xZ")}},computed:{themeColor:function(){return this.$store.state.themeColor}},watch:{themeColor:{handler:function(t,e){"red"==t?this.img=n("9Aw0"):"blue"==t?this.img=n("k8xZ"):"green"==t&&(this.img=n("s2xt"))},deep:!0}},methods:{goChart:function(t){var e="0";switch(this.$store.commit("changeReportName",t.reportName),this.type){case"collect":e="1",this.$store.commit("changeReportId",t.id),this.$store.commit("changeCurrFolderId",0);break;case"myReport":e="2",this.$store.commit("changeReportId",t.reportId),this.$store.commit("changeCurrFolderId",t.folderId);break;case"mySeek":e="3",this.$store.commit("changeReportId",0),this.$store.commit("changeCurrFolderId",0)}this.$router.push({name:"chart",params:{id:e}})},check:function(t){if(1==t.target.checked)-1==this.contentCollectCheckList.indexOf(t.target.value)&&this.contentCollectCheckList.push(Number(t.target.value));else for(var e=t.target.value,n=0;n<this.contentCollectCheckList.length;n++)this.contentCollectCheckList[n]==e&&(this.contentCollectCheckList.splice(n,1),n--);this.$emit("update:contentCollectCheckList",this.contentCollectCheckList)}},created:function(){},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"main_echarts_drawing clearfix"},[t._l(t.contentCollectList,function(e,o){return n("li",{key:o},[n("div",{staticClass:"med_border",on:{click:function(n){return t.goChart(e)}}},[e.reportUrl?t._e():n("img",{attrs:{src:t.img}}),t._v(" "),e.reportUrl?n("img",{staticClass:"img_true",attrs:{src:e.reportUrl}}):t._e(),t._v(" "),n("div",{staticClass:"med_explain",attrs:{title:e.reportName}},[t._v(t._s(e.reportName))]),t._v(" "),n("div",{staticClass:"med_checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.contentCollectCheckList,expression:"contentCollectCheckList"}],staticClass:"med_real",attrs:{type:"checkbox"},domProps:{value:e.id,checked:Array.isArray(t.contentCollectCheckList)?t._i(t.contentCollectCheckList,e.id)>-1:t.contentCollectCheckList},on:{click:function(e){return e.stopPropagation(),t.check(e)},change:function(n){var o=t.contentCollectCheckList,i=n.target,r=!!i.checked;if(Array.isArray(o)){var s=e.id,a=t._i(o,s);i.checked?a<0&&(t.contentCollectCheckList=o.concat([s])):a>-1&&(t.contentCollectCheckList=o.slice(0,a).concat(o.slice(a+1)))}else t.contentCollectCheckList=r}}})])])])}),t._v(" "),t.contentCollectList.length<=0?n("div",{staticClass:"no_time"},[n("i",{staticClass:"no_data"}),t._v(" "),n("i",{staticClass:"no_bor"}),t._v(" "),n("span",[t._v("暂无数据...")])]):t._e()],2)},staticRenderFns:[]};var r=n("C7Lr")(o,i,!1,function(t){n("n4Jd")},"data-v-2d35aa5c",null);e.a=r.exports},OZiu:function(t,e,n){var o={"./bar":["3N5W",62],"./bar.js":["3N5W",62],"./barCluster":["WLju",61],"./barCluster.js":["WLju",61],"./barPercent":["rf2+",60],"./barPercent.js":["rf2+",60],"./barSimple":["CJ22",59],"./barSimple.js":["CJ22",59],"./barYCategory":["cWns",58],"./barYCategory.js":["cWns",58],"./basicRadar":["5Z+/",57],"./basicRadar.js":["5Z+/",57],"./chinaMap":["hmO+",23],"./chinaMap.js":["hmO+",23],"./hotWord":["eh7n",56],"./hotWord.js":["eh7n",56],"./line":["8e6I",55],"./line.js":["8e6I",55],"./lineAndBar":["3MjI",54],"./lineAndBar.js":["3MjI",54],"./nightingale":["Kjod",53],"./nightingale.js":["Kjod",53],"./pie":["8Xfx",52],"./pie.js":["8Xfx",52],"./pieRing":["bZlW",51],"./pieRing.js":["bZlW",51],"./scatter":["7c/s",50],"./scatter.js":["7c/s",50],"./torus":["s6jk",49],"./torus.js":["s6jk",49],"./twoMCluster":["9zKA",48],"./twoMCluster.js":["9zKA",48],"./twoMClusterY":["3J0B",47],"./twoMClusterY.js":["3J0B",47],"./twoMLine":["UJCS",46],"./twoMLine.js":["UJCS",46],"./twoMRiver":["NNX0",45],"./twoMRiver.js":["NNX0",45],"./twoMStackAcreage":["dw+o",44],"./twoMStackAcreage.js":["dw+o",44],"./twoMacreage":["dgsZ",43],"./twoMacreage.js":["dgsZ",43],"./twoMbar":["bxRZ",42],"./twoMbar.js":["bxRZ",42],"./twoMbarP":["zgwj",41],"./twoMbarP.js":["zgwj",41],"./twoMbarPY":["V8fo",40],"./twoMbarPY.js":["V8fo",40],"./twoMbarY":["8c5J",39],"./twoMbarY.js":["8c5J",39],"./twoMfalls":["teLB",38],"./twoMfalls.js":["teLB",38],"./twoMradarLine":["sbAm",37],"./twoMradarLine.js":["sbAm",37],"./twoMradarNood":["w8iS",36],"./twoMradarNood.js":["w8iS",36],"./twoSLine":["RU5y",35],"./twoSLine.js":["RU5y",35],"./twoSacreage":["uK6K",34],"./twoSacreage.js":["uK6K",34],"./twoSareaPie":["N/8z",33],"./twoSareaPie.js":["N/8z",33],"./twoSbar":["fN6j",32],"./twoSbar.js":["fN6j",32],"./twoSbarY":["w6H6",31],"./twoSbarY.js":["w6H6",31],"./twoSfalls":["IF3F",30],"./twoSfalls.js":["IF3F",30],"./twoSfunnel":["o7M+",29],"./twoSfunnel.js":["o7M+",29],"./twoSpie":["Zyx6",28],"./twoSpie.js":["Zyx6",28],"./twoSpieRing":["bzEa",27],"./twoSpieRing.js":["bzEa",27],"./twoSradarLine":["BOl3",26],"./twoSradarLine.js":["BOl3",26],"./twoSradarNood":["u2s7",25],"./twoSradarNood.js":["u2s7",25],"./twoSradiusPie":["c2VZ",24],"./twoSradiusPie.js":["c2VZ",24]};function i(t){var e=o[t];return e?n.e(e[1]).then(function(){return n(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}i.keys=function(){return Object.keys(o)},i.id="OZiu",t.exports=i},"QN+D":function(t,e){},V7Bk:function(t,e,n){"use strict";var o=n("Ky/g"),i=(n("gyMJ"),{components:{btnCon:o.a},props:{title:[Object,String],btnCollectList:[Array,Object],btnCollectCheckList:[Array,Object],type:[String],btn:[Object,Array],options:[Array]},data:function(){return{currentFolder:"",active:!1}},computed:{},watch:{options:{handler:function(t,e){this.currentFolder=this.options[0].id}}},methods:{checkAll:function(){document.getElementById("all-checked").click()},changeAllChecked:function(t){var e=this;!0===t.target.checked?(this.btnCollectList.forEach(function(t,n){-1==e.btnCollectCheckList.indexOf(t.id)&&e.btnCollectCheckList.push(t.id)}),this.$emit("update:btnCollectCheckList",this.btnCollectCheckList)):this.$emit("update:btnCollectCheckList",[])},isAllChecked:function(){return this.btnCollectCheckList.length===this.btnCollectList.length},valueChange:function(t){this.$parent.currentFolder=t,this.$store.commit("changeDataPage",1)}},mounted:function(){}}),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main_hed"},[n("div",{staticClass:"main_hed_title"},[n("h2",[t._v(t._s(t.title))]),t._v(" "),"mySeek"!=t.type?n("div",{staticClass:"mht_select"},[n("el-select",{ref:"select",staticClass:"mht_select_hed",class:{active:t.active},attrs:{placeholder:"请选择","popper-append-to-body":!1},on:{change:t.valueChange},model:{value:t.currentFolder,callback:function(e){t.currentFolder=e},expression:"currentFolder"}},t._l(t.options,function(t,e){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1):t._e()]),t._v(" "),n("div",{staticClass:"main_button"},[n("button",{staticClass:"check_all_blue",on:{click:function(e){return t.checkAll()}}},[n("i",{staticClass:"iconfont icon-quanxuan"}),t._v(" "),n("b",[t._v(t._s(t.btnCollectCheckList.length==t.btnCollectList.length?"取消":"全选"))]),t._v(" "),n("input",{attrs:{id:"all-checked",type:"checkbox"},domProps:{checked:t.isAllChecked()},on:{change:function(e){return t.changeAllChecked(e)}}})]),t._v(" "),t._l(t.btn,function(e,o){return n("btn-con",{key:o,attrs:{item:e,disabled:0==t.btnCollectCheckList.length},nativeOn:{click:function(t){return e.fn(t)}}})})],2)])},staticRenderFns:[]};var s=n("C7Lr")(i,r,!1,function(t){n("QN+D")},"data-v-57fe7bd6",null);e.a=s.exports},b9aI:function(t,e){},hNCa:function(t,e){},hWbc:function(t,e){},jtpb:function(t,e){},k8xZ:function(t,e){t.exports="data:image/png;base64,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"},kMwN:function(t,e){},lktp:function(t,e,n){"use strict";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"leftBar",staticClass:"left-bar"},[this._t("default"),this._v(" "),e("div",{ref:"switchWrap",staticClass:"switch-wrap"},[e("button",{staticClass:"switch-btn",on:{click:this.clickSwitchLeftBar}})])],2)},staticRenderFns:[]};var i=n("C7Lr")({components:{},data:function(){return{}},props:{},computed:{flagLeftBar:function(){return this.$store.state.flagLeftBar}},watch:{},methods:{switchLeftBar:function(t){null!=t.fromElement&&null!=t.toElement&&("mouseenter"==t.type?(this.$refs.leftBar.style.left="0",this.$refs.switchWrap.classList.add("open"),this.$store.commit("changeLeftBar",!1)):(this.$refs.leftBar.style.left="-284px",this.$refs.switchWrap.classList.remove("open"),this.$store.commit("changeLeftBar",!0)))},clickSwitchLeftBar:function(){this.flagLeftBar?(this.$refs.leftBar.style.left="-284px",this.$refs.switchWrap.classList.add("open"),this.$store.commit("changeLeftBar",!1)):(this.$refs.leftBar.style.left="0",this.$refs.switchWrap.classList.remove("open"),this.$store.commit("changeLeftBar",!0))}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){var e=t.$route.name,n=t.$refs.leftBar;n.style.height="dataMatching"==e||"dataStructureAnalysis"==e||"foreignKey"==e||"entity"==e||"relationExtraction"==e||"hotWord"==e||"templateMatching"==e?"calc(100vh - 190px)":"calc(100vh - 170px)"})}},o,!1,function(t){n("rvgD")},"data-v-2ac2928e",null);e.a=i.exports},mpDc:function(t,e,n){"use strict";var o=n("4YfN"),i=n.n(o),r=n("R4Sj"),s=n("Ky/g"),a=n("vjOI"),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-content",staticStyle:{height:"867px"},attrs:{id:"main-content"}},["six-left"==t.layoutType?n("div",{staticClass:"layout-left"},[n("div",{staticClass:"content-left"},[n("div",{staticClass:"content-left-top"},[n("each-chart",{key:"six0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",{staticClass:"content-left-bottom"},[n("each-chart",{key:"six1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}}),t._v(" "),n("each-chart",{key:"six2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}})],1)]),t._v(" "),n("div",{staticClass:"content-right"},[n("div",[n("each-chart",{key:"six3",attrs:{idx:t.chartArr[3],chartType:t.echartsData[3].chartType,options:t.echartsData[3]}})],1),t._v(" "),n("div",[n("each-chart",{key:"six4",attrs:{idx:t.chartArr[4],chartType:t.echartsData[4].chartType,options:t.echartsData[4]}})],1),t._v(" "),n("div",[n("each-chart",{key:"six5",attrs:{idx:t.chartArr[5],chartType:t.echartsData[5].chartType,options:t.echartsData[5]}})],1)])]):t._e(),t._v(" "),"six-right"==t.layoutType?n("div",{staticClass:"layout-left row-reverse"},[n("div",{staticClass:"content-left"},[n("div",{staticClass:"content-left-top"},[n("each-chart",{key:"six0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",{staticClass:"content-left-bottom"},[n("each-chart",{key:"six1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}}),t._v(" "),n("each-chart",{key:"six2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}})],1)]),t._v(" "),n("div",{staticClass:"content-right"},[n("div",[n("each-chart",{key:"six3",attrs:{idx:t.chartArr[3],chartType:t.echartsData[3].chartType,options:t.echartsData[3]}})],1),t._v(" "),n("div",[n("each-chart",{key:"six4",attrs:{idx:t.chartArr[4],chartType:t.echartsData[4].chartType,options:t.echartsData[4]}})],1),t._v(" "),n("div",[n("each-chart",{key:"six5",attrs:{idx:t.chartArr[5],chartType:t.echartsData[5].chartType,options:t.echartsData[5]}})],1)])]):t._e(),t._v(" "),"five"==t.layoutType?n("div",{staticClass:"layout-left layout-five"},[n("div",{staticClass:"content-five-left"},[n("div",[n("each-chart",{key:"five1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}})],1),t._v(" "),n("div",[n("each-chart",{key:"five2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}})],1)]),t._v(" "),n("div",{staticClass:"content-five-center"},[n("each-chart",{key:"five0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",{staticClass:"content-five-right"},[n("div",[n("each-chart",{key:"five3",attrs:{idx:t.chartArr[3],chartType:t.echartsData[3].chartType,options:t.echartsData[3]}})],1),t._v(" "),n("div",[n("each-chart",{key:"five4",attrs:{idx:t.chartArr[4],chartType:t.echartsData[4].chartType,options:t.echartsData[4]}})],1)])]):t._e(),t._v(" "),"four"==t.layoutType?n("div",{staticClass:"layout-left layout-four"},[n("div",{staticClass:"layout-four__top"},[n("each-chart",{key:"four0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}}),t._v(" "),n("each-chart",{key:"four1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}})],1),t._v(" "),n("div",{staticClass:"layout-four__bottom"},[n("each-chart",{key:"four2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}}),t._v(" "),n("each-chart",{key:"four3",attrs:{idx:t.chartArr[3],chartType:t.echartsData[3].chartType,options:t.echartsData[3]}})],1)]):t._e(),t._v(" "),"three-left"==t.layoutType?n("div",{staticClass:"layout-left layout-three-left"},[n("div",{staticClass:"content-left"},[n("each-chart",{key:"three-left0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",{staticClass:"content-right"},[n("each-chart",{key:"three-left1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}}),t._v(" "),n("each-chart",{key:"three-left2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}})],1)]):t._e(),t._v(" "),"three-right"==t.layoutType?n("div",{staticClass:"layout-left layout-three-left row-reverse"},[n("div",{staticClass:"content-left"},[n("each-chart",{key:"three-right0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",{staticClass:"content-right"},[n("each-chart",{key:"three-right1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}}),t._v(" "),n("each-chart",{key:"three-right2",attrs:{idx:t.chartArr[2],chartType:t.echartsData[2].chartType,options:t.echartsData[2]}})],1)]):t._e(),t._v(" "),"two-v"==t.layoutType?n("div",{staticClass:"layout-left layout-two-v"},[n("div",[n("each-chart",{key:"two-v0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",[n("each-chart",{key:"two-v1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}})],1)]):t._e(),t._v(" "),"two-h"==t.layoutType?n("div",{staticClass:"layout-left layout-two-h"},[n("div",[n("each-chart",{key:"two-h0",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1),t._v(" "),n("div",[n("each-chart",{key:"two-h1",attrs:{idx:t.chartArr[1],chartType:t.echartsData[1].chartType,options:t.echartsData[1]}})],1)]):t._e(),t._v(" "),"one"==t.layoutType?n("div",{staticClass:"layout-left layout-one"},[n("each-chart",{key:"one",attrs:{idx:t.chartArr[0],chartType:t.echartsData[0].chartType,options:t.echartsData[0]}})],1):t._e(),t._v(" "),n("el-dialog",{staticClass:"dialogChartSet",attrs:{title:"图表设置",visible:t.dialogChartSet,"before-close":t.coverPersonnelNo},on:{"update:visible":function(e){t.dialogChartSet=e}}},[n("div",{staticClass:"el-dialog-content clearfix"},t._l(t.switchTypeObj,function(e,o){return n("div",{key:o,staticClass:"transition",class:["chart-type"+(o+1),{active:t.chartTypeActive==o,highlight:-1!=t.highlightArr.indexOf(o)}],attrs:{title:e.name},on:{click:function(n){return t.clickDialogChart(o,n,e.value)}}})}),0),t._v(" "),n("div",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"fl",class:{"is-disabled":t.isDisabled}},[n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.flagMainMap,expression:"flagMainMap"}],staticClass:"check"}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.flagMainMap,expression:"!flagMainMap"}],staticClass:"check-not"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.flagMainMap,expression:"flagMainMap"}],attrs:{type:"checkbox",name:"mainMap",id:"mainMap",disabled:t.isDisabled},domProps:{checked:Array.isArray(t.flagMainMap)?t._i(t.flagMainMap,null)>-1:t.flagMainMap},on:{change:function(e){var n=t.flagMainMap,o=e.target,i=!!o.checked;if(Array.isArray(n)){var r=t._i(n,null);o.checked?r<0&&(t.flagMainMap=n.concat([null])):r>-1&&(t.flagMainMap=n.slice(0,r).concat(n.slice(r+1)))}else t.flagMainMap=i}}})]),t._v(" "),n("label",{attrs:{for:"mainMap"}},[t._v("设为主图")])]),t._v(" "),n("button",{staticClass:"fr dialog-confirm",attrs:{type:"button"},on:{click:t.chartSetConfirmFn}},[t._v("确 定")])])]),t._v(" "),n("canvas-board")],1)},staticRenderFns:[]};var u=function(t){n("Jk2L")},c=n("C7Lr")(a.a,l,!1,u,"data-v-1a679830",null).exports,d={components:{btn:s.a,layoutType:c},props:{buttons:{type:Array}},data:function(){return{}},computed:i()({},Object(r.c)(["reportName","visibleHeader"])),watch:{},methods:{},mounted:function(){}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"content",attrs:{id:"content"}},[t.visibleHeader?n("header",[n("span",{attrs:{title:t.reportName}},[t._v(t._s(t.reportName))]),t._v(" "),n("div",{staticClass:"btn-wrap"},t._l(t.buttons,function(t,e){return n("btn",{key:e,attrs:{item:t},nativeOn:{click:function(e){return t.fn(e)}}})}),1)]):t._e(),t._v(" "),t.visibleHeader?t._e():n("div",{staticClass:"interspace"}),t._v(" "),n("layout-type")],1)},staticRenderFns:[]};var p=n("C7Lr")(d,h,!1,function(t){n("1bId")},"data-v-fb61925e",null);e.a=p.exports},n0MN:function(t,e,n){"use strict";(function(t){var o=n("4YfN"),i=n.n(o),r=n("R4Sj"),s=n("jt1B");e.a={components:{},data:function(){return{p_start:{x:0,y:0},p_end:{x:0,y:0},isPush:!1,flag_delete:!1,index:-1,isDrag:!1,isResize:!1}},props:{},computed:i()({},Object(r.c)(["flagCanvasWrap","elementType","domList","lineColor","lineWidth","lineType","fontFamily","fontSize","fontWeight","fontStyle","fontUnderline","fontColor"])),watch:{lineColor:{handler:function(t,e){this.changeElementLineProp("lineColor","lc",t)}},lineWidth:{handler:function(t,e){this.changeElementLineProp("lineWidth","lw",t)}},lineType:{handler:function(t,e){this.changeElementLineProp("lineType","lt",t)}},fontColor:{handler:function(t,e){this.changeElementFontProp("fontColor",t)}},fontFamily:{handler:function(t,e){this.changeElementFontProp("fontFamily",t)}},fontSize:{handler:function(t,e){this.changeElementFontProp("fontSize",t)}},fontWeight:{handler:function(t,e){this.changeElementFontProp("fontWeight",t)}},fontStyle:{handler:function(t,e){this.changeElementFontProp("fontStyle",t)}},fontUnderline:{handler:function(t,e){this.changeElementFontProp("fontUnderline",t)}}},methods:{changeElementLineProp:function(t,e,n){if(-1!=this.index){var o=this.domList,i=o[this.index].type;"rect"==i||"ellipse"==i?(o[this.index][t]=n,this.$store.commit("changeDomList",o)):"hLine"!=i&&"vLine"!=i&&"hLine2"!=i&&"vLine2"!=i||(o[this.index][e]=n,this.$store.commit("changeDomList",o))}},changeElementFontProp:function(t,e){if(-1!=this.index){var n=this.domList,o=n[this.index].type;"linkBtn"!=o&&"textTag"!=o&&"textbox"!=o||(n[this.index][t]=e,this.$store.commit("changeDomList",n))}},onDblclick:function(t){this.flag_delete=!0;var e=this.domList;e.splice(t,1),this.changeDomListFn(e)},getIndex:function(e){this.isDrag=!0,t(".draggable").addClass("not-border"),t('.draggable[class*="rect"]').removeClass("not-border"),t('.draggable[class*="ellipse"]').removeClass("not-border"),this.index=e;var n=this.domList,o=n[e].type;if("rect"==o||"ellipse"==o){var i=n[e].lineWidth,r=n[e].lineType,s=n[e].lineColor;this.$store.commit("changeLineWidth",i),this.$store.commit("changeLineType",r),this.$store.commit("changeLineColor",s)}else if("hLine"==o||"vLine"==o||"hLine2"==o||"vLine2"==o){var a=n[e].lw,l=n[e].lt,u=n[e].lc;this.$store.commit("changeLineWidth",a),this.$store.commit("changeLineType",l),this.$store.commit("changeLineColor",u)}else if("linkBtn"==o||"textTag"==o||"textbox"==o){var c=n[e].fontFamily,d=n[e].fontSize,h=n[e].fontColor,p=n[e].fontWeight,f=n[e].fontStyle,g=n[e].fontUnderline;this.$store.commit("changeFontFamily",c),this.$store.commit("changeFontSize",d),this.$store.commit("changeFontColor",h),this.$store.commit("changeFontWeight",p),this.$store.commit("changeFontStyle",f),this.$store.commit("changeFontUnderline",g)}},clickUpload:function(e){var n=e.target;t(n).closest("button").next().trigger("click")},changeUploadImg:function(e,n){var o=e.target.value;if(""==o)return t(e.target).parent().focus(),!1;var i=o.substring(o.lastIndexOf(".")+1).toLowerCase();if("jpg"!=i&&"jpeg"!=i&&"png"!=i&&"gif"!=i&&"bmp"!=i&&"wbm"!=i)return Object(s.a)({message:"请选择以下图片格式(jpg, jpeg, png, gif, bmp, wbm)！",type:"error"}),e.target.value="",!1;if(e.target.files&&e.target.files[0]&&e.target.files[0].size/1024>1024)return Object(s.a)({message:"图片大于1M,请压缩后再次上传。",type:"error"}),e.target.value="",!1;if(e.target.files&&e.target.files[0]){var r=window.URL.createObjectURL(e.target.files[0]),a=this.domList;a[n].src=r,this.$store.commit("changeDomList",a),setTimeout(function(){t(e.target).parent().focus()})}return!0},pos:function(e){return{x:e.pageX-t("#canvasWrap").offset().left,y:e.pageY-t("#canvasWrap").offset().top}},coordinate:function(t,e,n,o){var i={x:t,y:e,w:n-t,h:o-e};return n-t<0&&(i.x=n,i.w=t-n),o-e<0&&(i.y=o,i.h=e-o),i},fn_focus:function(e){t(e.target).parent().removeClass("not-border")},fn_blur:function(e){if(!this.flag_delete){var n=this.domList,o=Number(t(e.target).parent().attr("index"));"TEXTAREA"==e.target.tagName&&""==t(e.target).val()||"A"==e.target.tagName&&""==t(e.target).text()||"SPAN"==e.target.tagName&&""==t(e.target).text()?(n.splice(o,1),this.changeDomListFn(n)):"TEXTAREA"==e.target.tagName&&n.length>0?(n[o].val=t(e.target).val(),this.$store.commit("changeDomList",n)):"A"==e.target.tagName&&n.length>0?(n[o].url=t(e.target).text(),this.$store.commit("changeDomList",n)):"SPAN"==e.target.tagName&&n.length>0&&(n[o].tag=t(e.target).text(),this.$store.commit("changeDomList",n))}},changeDomListFn:function(e){var n=this;this.$store.commit("changeDomList",[]),setTimeout(function(){n.$store.commit("changeDomList",e),setTimeout(function(){t(".textbox").addClass("not-border"),t(".linkBtn").addClass("not-border"),t(".textTag").addClass("not-border"),t(".hLine").addClass("not-border"),t(".vLine").addClass("not-border"),t(".hLine2").addClass("not-border"),t(".vLine2").addClass("not-border"),t(".img").addClass("not-border"),n.flag_delete=!1,n.index=-1})})},initParam:function(){this.p_start.x=0,this.p_start.y=0,this.p_end.x=0,this.p_end.y=0},onMouseDown:function(e){if(1!=this.isDrag&&(t(".draggableContent").blur(),t(".draggableLink").blur(),t(".draggableTag").blur(),t(".draggableImg").blur(),t(".draggableHLine").blur(),t(".draggableVLine").blur(),t(".draggableHLine2").blur(),t(".draggableVLine2").blur(),t(".draggable").addClass("not-border"),t('.draggable[class*="rect"]').removeClass("not-border"),t('.draggable[class*="ellipse"]').removeClass("not-border"),this.index=-1,0==this.p_start.x&&0==this.p_start.y)){this.p_start=this.pos(e),e.preventDefault(),this.isPush=!1;var n=t('<div id="general"></div>');switch(n.css({left:this.p_start.x+"px",top:this.p_start.y+"px"}),this.elementType){case"rect":n.css({border:this.lineWidth+"px "+this.lineType+" "+this.lineColor});break;case"ellipse":n.css({border:this.lineWidth+"px "+this.lineType+" "+this.lineColor,borderRadius:"50%"})}t("#canvasWrap").append(n),t("#canvasWrap")[0].addEventListener("mousemove",this.onMouseMove,!1),t("#canvasWrap")[0].addEventListener("mouseup",this.onMouseUp,!1)}},onMouseMove:function(e){this.p_end=this.pos(e),e.preventDefault(),this.isPush=!0;var n=this.coordinate(this.p_start.x,this.p_start.y,this.p_end.x,this.p_end.y);t("#general").css({left:n.x,top:n.y,width:n.w,height:n.h})},onMouseUp:function(e){if(e.preventDefault(),t("#canvasWrap")[0].removeEventListener("mousemove",this.onMouseMove,!1),t("#canvasWrap")[0].removeEventListener("mouseup",this.onMouseUp,!1),t("#general").remove(),0!=this.isPush){switch(this.elementType){case"hLine":this.rectEllipseTextboxUp("hLine",void 0,void 0,void 0,this.lineWidth,this.lineColor,this.lineType)||setTimeout(function(){t(".draggableHLine").eq(-1).focus()});break;case"vLine":this.rectEllipseTextboxUp("vLine",void 0,void 0,void 0,this.lineWidth,this.lineColor,this.lineType)||setTimeout(function(){t(".draggableVLine").eq(-1).focus()});break;case"hLine2":this.rectEllipseTextboxUp("hLine2",void 0,void 0,void 0,this.lineWidth,this.lineColor,this.lineType)||setTimeout(function(){t(".draggableHLine2").eq(-1).focus()});break;case"vLine2":this.rectEllipseTextboxUp("vLine2",void 0,void 0,void 0,this.lineWidth,this.lineColor,this.lineType)||setTimeout(function(){t(".draggableVLine2").eq(-1).focus()});break;case"rect":this.rectEllipseTextboxUp("rect",this.lineWidth,this.lineColor,this.lineType);break;case"ellipse":this.rectEllipseTextboxUp("ellipse",this.lineWidth,this.lineColor,this.lineType);break;case"textbox":this.rectEllipseTextboxUp("textbox")||setTimeout(function(){t(".draggableContent").eq(-1).focus()});break;case"linkBtn":this.rectEllipseTextboxUp("linkBtn")||setTimeout(function(){t(".draggableLink").eq(-1).focus()});break;case"textTag":this.rectEllipseTextboxUp("textTag")||setTimeout(function(){t(".draggableTag").eq(-1).focus()});break;case"img":this.rectEllipseTextboxUp("img")||setTimeout(function(){t(".draggableImg").eq(-1).focus()})}this.initParam()}else this.initParam()},rectEllipseTextboxUp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#999999",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"solid",i=arguments[4],r=arguments[5],s=arguments[6],a=this.coordinate(this.p_start.x,this.p_start.y,this.p_end.x,this.p_end.y),l=a.x,u=a.y,c=a.w,d=a.h;if(0==c||0==d)return!0;var h=this.domList;h.push({type:t,w:c,h:d,x:l,y:u,fontFamily:this.fontFamily,fontSize:this.fontSize,fontWeight:this.fontWeight,fontStyle:this.fontStyle,fontUnderline:this.fontUnderline,fontColor:this.fontColor,lineWidth:e,lineColor:n,lineType:o,lw:i,lc:r,lt:s,val:"",tag:"",url:"https://www.baidu.com",src:""}),this.$store.commit("changeDomList",h)},onDragging:function(t,e){this.isDrag=!0},onResizing:function(t,e,n,o){this.isResize=!0},onDragstop:function(t,e){if(this.isDrag){this.isDrag=!1;var n=this.domList;n[this.index].x=t,n[this.index].y=e,this.$store.commit("changeDomList",n)}},onResizestop:function(t,e,n,o){if(this.isResize){this.isResize=!1;var i=this.domList;i[this.index].x=t,i[this.index].y=e,i[this.index].w=n,i[this.index].h=o,this.$store.commit("changeDomList",i)}}},created:function(){},mounted:function(){t("#canvasWrap")[0].addEventListener("mousedown",this.onMouseDown,!1)}}}).call(e,n("L7Pj"))},n4Jd:function(t,e){},"ng/y":function(t,e){},pM0b:function(t,e,n){"use strict";var o=n("4YfN"),i=n.n(o),r=n("R4Sj"),s={props:{chartType:{type:String},windowSize:{type:Number},resize:{type:Boolean},deleteResize:{type:Boolean},time:{type:Number,default:0},initTime:{type:Number,default:0},options:{type:Object}},data:function(){return{timer:null}},computed:i()({},Object(r.c)(["themeColor","flagHeight","chartTime"])),watch:{themeColor:{handler:function(t,e){this.myChart&&this.myChart.dispose(),this.initChart(1)}},chartType:{handler:function(t,e){this.myChart&&this.myChart.dispose(),this.initChart(1)}},options:{handler:function(t,e){this.myChart&&this.myChart.dispose(),this.initChart(1)}},windowSize:{handler:function(t,e){this.myChart&&this.resizeChart(),this.myChart.resize()}},resize:{handler:function(t,e){this.myChart&&this.resizeChart()}},deleteResize:{handler:function(t,e){this.myChart&&this.resizeChart()}},flagHeight:{handler:function(t,e){this.myChart&&this.resizeChart()}}},methods:{initChart:function(t){var e=this;if(this.$refs.chart){this.myChart=this.$echarts.init(this.$refs.chart,this.themeColor);var o={data:this.options,type:this.chartType,color:{red:["#ffcc55","#eb5541","#fe954f","#cdcfd3"],green:["#ffcc55","#279e58","#81d570","#cdcfd3"],blue:["#ffcc55","#2790e0","#3caff9","#cdcfd3"]}[this.themeColor],radarColor:{red:["rgba(221,80,61,.8)","rgba(221,80,61,.5)"],blue:["rgba(82,176,252,.8)","rgba(82,176,252,.5)"],green:["rgba(80,175,84,.8)","rgba(80,175,84,.5)"]}[this.themeColor]};n("OZiu")("./"+this.chartType).then(function(t){var n=t.default(o);e.myChart.setOption(n,!0),e.myChart.on("click",function(t){e.$emit("handleCharts",t,t.name)})}).catch(function(t){return console.log(t)})}},resizeChart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;clearTimeout(this.timer),this.timer=setTimeout(function(){t.myChart.resize()},e)}},mounted:function(){var t=this;setTimeout(function(){t.initChart()},this.chartTime)}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"chart",staticStyle:{height:"100%",width:"100%"}})},staticRenderFns:[]};var l=n("C7Lr")(s,a,!1,function(t){n("hWbc")},"data-v-b9749950",null).exports,u={components:{},data:function(){return{}},props:{options:{type:[Object]}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[2==t.options.card?n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.options.data,height:"100%"}},t._l(t.options.name,function(e,o){return n("el-table-column",{key:o,attrs:{fixed:0==o,"show-overflow-tooltip":"",prop:e.pops,label:e.pops},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row[e.column.property]&&-1==e.row[e.column.property].toString().indexOf("image")?n("span",[t._v(t._s(e.row[e.column.property]))]):t._e(),t._v(" "),e.row[e.column.property]&&-1!=e.row[e.column.property].toString().indexOf("image")?n("img",{staticStyle:{width:"100%"},attrs:{src:e.row[e.column.property]}}):t._e()]}}])})}),1):t._e(),t._v(" "),1==t.options.card?n("div",{staticClass:"single-line"},[n("h4",[t._v(t._s(t.options.name[0]))]),t._v(" "),n("ul",t._l(t.options.data,function(e,o){return n("li",{key:o},[t._v(t._s(e[0]))])}),0)]):t._e()],1)},staticRenderFns:[]};var d={components:{baseChart:l,card:n("C7Lr")(u,c,!1,function(t){n("jtpb")},"data-v-1868468e",null).exports},props:{idx:{type:Number},chartType:{type:String},options:{type:Object}},data:function(){var t=this;return{windowSize:document.documentElement.clientWidth,btns:[{classBtn:"btn-delete",classIcon:"icon-shanchu-",fn:function(e){t.deleteChart(e)}},{classBtn:"btn-set",classIcon:"icon-genghuan",fn:function(e){t.setChart(e)}}],olvEcharts:""}},computed:i()({},Object(r.c)(["flagLeftBar","deleteResize","activeBorder","layoutType","chartArr","echartsData","visibleBtn"]),{chageSize:function(){var t=this;return window.addEventListener("resize",function(){t.windowSize=document.documentElement.clientWidth}),this.windowSize}}),watch:{},methods:{deleteChart:function(t){var e=this;this.$alert("确定删除此图表？","提示",{confirmButtonClass:"opacity",closeOnClickModal:!0,closeOnPressEscape:!0,callback:function(n){if("confirm"==n){if(e.chartArr.length<=1)return void e.$message({type:"error",duration:1e3,message:"删除失败，图表数量不能少于1个！"});e.echartsData.splice(t,1),e.$store.commit("changeEchartsData",e.echartsData),e.$message({type:"success",duration:1e3,message:"删除成功！"})}}})},setChart:function(t){var e=this;this.$parent.dialogChartSet=!0,console.log(this.chartArr,this.idx,this.chartType);var n=this.chartArr.indexOf(t);if(this.$store.commit("changeCurrentChartIndex",n),this.options.chartTypeArr){var o=[];this.options.chartTypeArr.forEach(function(t,n){o.push(e.$parent.switchType.indexOf(t))}),this.$parent.highlightArr=o,this.$parent.chartTypeActive=this.$parent.switchType.indexOf(this.chartType)}else this.$parent.highlightArr=[],this.$parent.chartTypeActive=-1;0==this.chartArr.indexOf(t)?(this.$parent.isDisabled=!0,this.$parent.flagMainMap=!1):this.$parent.isDisabled=!1}},created:function(){},mounted:function(){}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgcolor-fa border-change each-chart"},[""!=t.chartType?n("base-chart",{attrs:{windowSize:t.chageSize,resize:t.flagLeftBar,deleteResize:t.deleteResize,time:300,initTime:300,chartType:t.chartType,options:t.options}}):t._e(),t._v(" "),""==t.chartType?n("card",{attrs:{options:t.options}}):t._e(),t._v(" "),t.visibleBtn?n("div",{staticClass:"btn-wrap-small"},t._l(t.btns,function(e,o){return n("button",{key:o,class:e.classBtn,on:{click:function(n){return n.stopPropagation(),e.fn(t.idx)}}},[n("i",{staticClass:"iconfont",class:e.classIcon})])}),0):t._e()],1)},staticRenderFns:[]};var p=n("C7Lr")(d,h,!1,function(t){n("kMwN")},"data-v-b640e476",null);e.a=p.exports},rvgD:function(t,e){},s2xt:function(t,e){t.exports="data:image/png;base64,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"},"tm/j":function(t,e,n){"use strict";var o=n("3cXf"),i=n.n(o),r=n("hRKE"),s=n.n(r),a=n("IYkF"),l=n.n(a);(function(){void 0===Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var t=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},e=function(t,e){return t.x*e.x+t.y*e.y},n=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},o=function(t,e){return{x:t.x*e,y:t.y*e}},i=Math.pow(2,-65),r=function(e,o){for(var i=[],r=s(e,o),l=o.length-1,u=a(r,2*l-1,i,0),c=t(e,o[0]),h=n(c),p=0,f=0;f<u;f++){c=t(e,d(o,l,i[f],null,null));var g=n(c);g<h&&(h=g,p=i[f])}return c=t(e,o[l]),(g=n(c))<h&&(h=g,p=1),{location:p,distance:h}},s=function(n,i){for(var r=i.length-1,s=2*r-1,a=[],l=[],u=[],c=[],d=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],h=0;h<=r;h++)a[h]=t(i[h],n);for(h=0;h<=r-1;h++)l[h]=t(i[h+1],i[h]),l[h]=o(l[h],3);for(var p=0;p<=r-1;p++)for(var f=0;f<=r;f++)u[p]||(u[p]=[]),u[p][f]=e(l[p],a[f]);for(h=0;h<=s;h++)c[h]||(c[h]=[]),c[h].y=0,c[h].x=parseFloat(h)/s;for(var g=r,m=r-1,v=0;v<=g+m;v++){var b=Math.max(0,v-m),y=Math.min(v,g);for(h=b;h<=y;h++)j=v-h,c[h+j].y+=u[j][h]*d[j][h]}return c},a=function t(e,n,o,i){var r,s,a=[],h=[],p=[],f=[];switch(l(e,n)){case 0:return 0;case 1:if(i>=64)return o[0]=(e[0].x+e[n].x)/2,1;if(u(e,n))return o[0]=c(e,n),1}d(e,n,.5,a,h),r=t(a,n,p,i+1),s=t(h,n,f,i+1);for(var g=0;g<r;g++)o[g]=p[g];for(g=0;g<s;g++)o[g+r]=f[g];return r+s},l=function(t,e){var n,o,i=0;n=o=Math.sgn(t[0].y);for(var r=1;r<=e;r++)(n=Math.sgn(t[r].y))!=o&&i++,o=n;return i},u=function(t,e){var n,o,r,s,a,l,u,c;s=t[0].y-t[e].y,a=t[e].x-t[0].x,l=t[0].x*t[e].y-t[e].x*t[0].y;for(var d=max_distance_below=0,h=1;h<e;h++){var p=s*t[h].x+a*t[h].y+l;p>d?d=p:p<max_distance_below&&(max_distance_below=p)}return 0,1,0,n=(1*(l-d)-0*(c=a))*(1/(0*c-1*(u=s))),u=s,c=a,o=(1*(l-max_distance_below)-0*c)*(1/(0*c-1*u)),r=Math.min(n,o),Math.max(n,o)-r<i?1:0},c=function(t,e){var n=t[e].x-t[0].x,o=t[e].y-t[0].y,i=t[0].x-0;return 0+1*((n*(t[0].y-0)-o*i)*(1/(0*n-1*o)))},d=function(t,e,n,o,i){for(var r=[[]],s=0;s<=e;s++)r[0][s]=t[s];for(var a=1;a<=e;a++)for(s=0;s<=e-a;s++)r[a]||(r[a]=[]),r[a][s]||(r[a][s]={}),r[a][s].x=(1-n)*r[a-1][s].x+n*r[a-1][s+1].x,r[a][s].y=(1-n)*r[a-1][s].y+n*r[a-1][s+1].y;if(null!=o)for(s=0;s<=e;s++)o[s]=r[s][0];if(null!=i)for(s=0;s<=e;s++)i[s]=r[e-s][s];return r[e][0]},h={},p=function(t,e){for(var n=function(t){var e=h[t];if(!e){var n=function(t){return function(e){return t}},o=function(){return function(t){return t}},i=function(){return function(t){return 1-t}},r=function(t){return function(e){for(var n=1,o=0;o<t.length;o++)n*=t[o](e);return n}};(e=[]).push(new function(){return function(e){return Math.pow(e,t)}});for(var s=1;s<t;s++){for(var a=[new n(t)],l=0;l<t-s;l++)a.push(new o);for(l=0;l<s;l++)a.push(new i);e.push(new r(a))}e.push(new function(){return function(e){return Math.pow(1-e,t)}}),h[t]=e}return e}(t.length-1),o=0,i=0,r=0;r<t.length;r++)o+=t[r].x*n[r](e),i+=t[r].y*n[r](e);return{x:o,y:i}},f=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},g=function(t){return t[0].x==t[1].x&&t[0].y==t[1].y},m=function(t,e,n){if(g(t))return{point:t[0],location:e};for(var o=p(t,e),i=0,r=e,s=n>0?1:-1,a=null;i<Math.abs(n);)a=p(t,r+=.005*s),i+=f(a,o),o=a;return{point:a,location:r}},v=function(t,e){var n=p(t,e),o=p(t.slice(0,t.length-1),e),i=o.y-n.y,r=o.x-n.x;return 0==i?1/0:Math.atan(i/r)},b=this.jsBezier={distanceFromCurve:r,gradientAtPoint:v,gradientAtPointAlongCurveFrom:function(t,e,n){var o=m(t,e,n);return o.location>1&&(o.location=1),o.location<0&&(o.location=0),v(t,o.location)},nearestPointOnCurve:function(t,e){var n=r(t,e);return{point:d(e,e.length-1,n.location,null,null),location:n.location}},pointOnCurve:p,pointAlongCurveFrom:function(t,e,n){return m(t,e,n).point},perpendicularToCurveAt:function(t,e,n,o){var i=m(t,e,o=null==o?0:o),r=v(t,i.location),s=Math.atan(-1/r),a=n/2*Math.sin(s),l=n/2*Math.cos(s);return[{x:i.point.x+l,y:i.point.y+a},{x:i.point.x-l,y:i.point.y-a}]},locationAlongCurveFrom:function(t,e,n){return m(t,e,n).location},getLength:function(t){if(g(t))return 0;for(var e=p(t,0),n=0,o=0,i=null;o<1;)i=p(t,o+=.005),n+=f(i,e),e=i;return n},version:"0.9.0"};"undefined"!=typeof exports&&(exports.jsBezier=b)}).call("undefined"!=typeof window?window:this),function(){var t=this.Biltong={version:"0.4.0"};"undefined"!=typeof exports&&(exports.Biltong=t);var e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t,n,o){return o(t=e(t)?t:[t.x,t.y],n=e(n)?n:[n.x,n.y])},o=t.gradient=function(t,e){return n(t,e,function(t,e){return e[0]==t[0]?e[1]>t[1]?1/0:-1/0:e[1]==t[1]?e[0]>t[0]?0:-0:(e[1]-t[1])/(e[0]-t[0])})},i=(t.normal=function(t,e){return-1/o(t,e)},t.lineLength=function(t,e){return n(t,e,function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))})},t.quadrant=function(t,e){return n(t,e,function(t,e){return e[0]>t[0]?e[1]>t[1]?2:1:e[0]==t[0]?e[1]>t[1]?2:1:e[1]>t[1]?3:4})}),r=(t.theta=function(t,e){return n(t,e,function(t,e){var n=o(t,e),r=Math.atan(n),s=i(t,e);return 4!=s&&3!=s||(r+=Math.PI),r<0&&(r+=2*Math.PI),r})},t.intersects=function(t,e){var n=t.x,o=t.x+t.w,i=t.y,r=t.y+t.h,s=e.x,a=e.x+e.w,l=e.y,u=e.y+e.h;return n<=s&&s<=o&&i<=l&&l<=r||n<=a&&a<=o&&i<=l&&l<=r||n<=s&&s<=o&&i<=u&&u<=r||n<=a&&s<=o&&i<=u&&u<=r||s<=n&&n<=a&&l<=i&&i<=u||s<=o&&o<=a&&l<=i&&i<=u||s<=n&&n<=a&&l<=r&&r<=u||s<=o&&n<=a&&l<=r&&r<=u},t.encloses=function(t,e,n){var o=t.x,i=t.x+t.w,r=t.y,s=t.y+t.h,a=e.x,l=e.x+e.w,u=e.y,c=e.y+e.h,d=function(t,e,o,i){return n?t<=e&&o>=i:t<e&&o>i};return d(o,a,i,l)&&d(r,u,s,c)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),s=[null,[-1,-1],[-1,1],[1,1],[1,-1]];t.pointOnLine=function(t,e,n){var a=o(t,e),l=i(t,e),u=n>0?r[l]:s[l],c=Math.atan(a),d=Math.abs(n*Math.sin(c))*u[1],h=Math.abs(n*Math.cos(c))*u[0];return{x:t.x+h,y:t.y+d}},t.perpendicularLineTo=function(t,e,n){var i=o(t,e),r=Math.atan(-1/i),s=n/2*Math.sin(r),a=n/2*Math.cos(r);return[{x:e.x+a,y:e.y+s},{x:e.x-a,y:e.y-s}]}}.call("undefined"!=typeof window?window:this),function(){var t=navigator.userAgent.toLowerCase().indexOf("android")>-1,e=function(t,e,n){for(var o=(n=n||t.parentNode).querySelectorAll(e),i=0;i<o.length;i++)if(o[i]===t)return!0;return!1},n=function(t){return"string"==typeof t||t.constructor===String?document.getElementById(t):t},o=function(t){return t.srcElement||t.target},i=function(t,e,n,o){if(o){if(void 0!==t.path&&t.path.indexOf)return{path:t.path,end:t.path.indexOf(n)};var i={path:[],end:-1};return function t(e){i.path.push(e),e===n?i.end=i.path.length-1:null!=e.parentNode&&t(e.parentNode)}(e),i}return{path:[e],end:1}},r=function(t,e){for(var n=0,o=t.length;n<o&&t[n]!=e;n++);n<t.length&&t.splice(n,1)},s=1,a=function(t,e,n){var o=s++;return t.__ta=t.__ta||{},t.__ta[e]=t.__ta[e]||{},t.__ta[e][o]=n,n.__tauid=o,o},l=function(t,e,n){if(t.__ta&&t.__ta[e]&&delete t.__ta[e][n.__tauid],n.__taExtra){for(var o=0;o<n.__taExtra.length;o++)w(t,n.__taExtra[o][0],n.__taExtra[o][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()},u=function(t,n,r,s){if(null==t)return r;var a=t.split(","),l=function s(l){s.__tauid=r.__tauid;var u=o(l),c=u,d=i(l,u,n,null!=t);if(-1!=d.end)for(var h=0;h<d.end;h++){c=d.path[h];for(var p=0;p<a.length;p++)e(c,a[p],n)&&r.apply(c,arguments)}};return c(r,s,l),l},c=function(t,e,n){t.__taExtra=t.__taExtra||[],t.__taExtra.push([e,n])},d=function(t,e,n,o){if(f&&m[e]){var i=u(o,t,n,m[e]);j(t,m[e],i,n)}"focus"===e&&null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),j(t,e,u(o,t,n,e),n)},h={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},p=function(t,e,n,o){for(var i in n.__tamee[t])n.__tamee[t].hasOwnProperty(i)&&n.__tamee[t][i].apply(o,[e])},f="ontouchstart"in document.documentElement,g="onmousedown"in document.documentElement,m={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},v=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),b=v>-1&&v<9,y=function(t,e){if(null==t)return[0,0];var n=P(t),o=C(n,0);return[o[e+"X"],o[e+"Y"]]},x=function(t){return null==t?[0,0]:b?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:y(t,"page")},C=function(t,e){return t.item?t.item(e):t[e]},P=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},E=function(t){return P(t).length},j=function(t,e,n,o){if(a(t,e,n),o.__tauid=n.__tauid,t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent){var i=e+n.__tauid;t["e"+i]=n,t[i]=function(){t["e"+i]&&t["e"+i](window.event)},t.attachEvent("on"+e,t[i])}},w=function t(e,o,i){null!=i&&S(e,function(){var r=n(this);if(l(r,o,i),null!=i.__tauid)if(r.removeEventListener)r.removeEventListener(o,i,!1),f&&m[o]&&r.removeEventListener(m[o],i,!1);else if(this.detachEvent){var s=o+i.__tauid;r[s]&&r.detachEvent("on"+o,r[s]),r[s]=null,r["e"+s]=null}i.__taTouchProxy&&t(e,i.__taTouchProxy[1],i.__taTouchProxy[0])})},S=function(t,e){if(null!=t){t="undefined"!=typeof Window&&"unknown"!=typeof t.top&&t==t.top?[t]:"string"!=typeof t&&null==t.tagName&&null!=t.length?t:"string"==typeof t?document.querySelectorAll(t):[t];for(var n=0;n<t.length;n++)e.apply(t[n])}};this.Mottle=function(s){var l=(s=s||{}).clickThreshold||250,c=s.dblClickThreshold||450,v=new function(){var t=[];return function(n,i,r,s){if(!n.__tamee){n.__tamee={over:!1,mouseenter:[],mouseexit:[]};var l=function(i){var r=o(i);(null==s&&r==n&&!n.__tamee.over||e(r,s,n)&&(null==r.__tamee||!r.__tamee.over))&&(p("mouseenter",i,n,r),r.__tamee=r.__tamee||{},r.__tamee.over=!0,t.push(r))},c=function(i){for(var r=o(i),s=0;s<t.length;s++)r!=t[s]||e(i.relatedTarget||i.toElement,"*",r)||(r.__tamee.over=!1,t.splice(s,1),p("mouseexit",i,n,r))};j(n,"mouseover",u(s,n,l,"mouseover"),l),j(n,"mouseout",u(s,n,c,"mouseout"),c)}r.__taUnstore=function(){delete n.__tamee[i][r.__tauid]},a(n,i,r),n.__tamee[i][r.__tauid]=r}},b=new function(t,n){return function(s,a,l,u){if("contextmenu"==a&&g)d(s,a,l,u);else{if(null==s.__taTapHandler){var c=s.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},p=function(){c.down=!1},f=function(){c.taps=0};d(s,"mousedown",function(r){for(var a=o(r),l=i(r,a,s,null!=u),d=!1,h=0;h<l.end;h++){if(d)return;a=l.path[h];for(var g=0;g<c.downSelectors.length;g++)if(null==c.downSelectors[g]||e(a,c.downSelectors[g],s)){c.down=!0,setTimeout(p,t),setTimeout(f,n),d=!0;break}}}),d(s,"mouseup",function(t){if(c.down){var n,r,a=o(t);c.taps++;var l=E(t);for(var u in h)if(h.hasOwnProperty(u)){var d=h[u];if(d.touches===l&&(1===d.taps||d.taps===c.taps))for(var p=0;p<c[u].length;p++){r=i(t,a,s,null!=c[u][p][1]);for(var f=0;f<r.end;f++)if(n=r.path[f],null==c[u][p][1]||e(n,c[u][p][1],s)){c[u][p][0].apply(n,[t]);break}}}}})}s.__taTapHandler.downSelectors.push(u),s.__taTapHandler[a].push([l,u]),l.__taUnstore=function(){r(s.__taTapHandler[a],l)}}}}(l,c),C=s.smartClicks,P=function(t,e,i,s){null!=i&&S(t,function(){var t=n(this);C&&"click"===e?function(t,e,n,i){null==t.__taSmartClicks&&(d(t,"mousedown",function(e){t.__tad=x(e)},i),d(t,"mouseup",function(e){t.__tau=x(e)},i),d(t,"click",function(e){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var n=0;n<t.__taSmartClicks.length;n++)t.__taSmartClicks[n].apply(o(e),[e])},i),t.__taSmartClicks=[]);t.__taSmartClicks.push(n),n.__taUnstore=function(){r(t.__taSmartClicks,n)}}(t,0,i,s):"tap"===e||"dbltap"===e||"contextmenu"===e?b(t,e,i,s):"mouseenter"===e||"mouseexit"==e?v(t,e,i,s):d(t,e,i,s)})};this.remove=function(t){return S(t,function(){var t=n(this);if(t.__ta)for(var e in t.__ta)if(t.__ta.hasOwnProperty(e))for(var o in t.__ta[e])t.__ta[e].hasOwnProperty(o)&&w(t,e,t.__ta[e][o]);t.parentNode&&t.parentNode.removeChild(t)}),this},this.on=function(t,e,n,o){var i=arguments[0],r=4==arguments.length?arguments[2]:null,s=arguments[1],a=arguments[arguments.length-1];return P(i,s,a,r),this},this.off=function(t,e,n){return w(t,e,n),this},this.trigger=function(e,o,i,r){var s=g&&("undefined"==typeof MouseEvent||null==i||i.constructor===MouseEvent),a=f&&!g&&m[o]?m[o]:o,l=!(f&&!g&&m[o]),u=x(i),c=y(i,"screen"),d=function(t){return y(t,"client")}(i);return S(e,function(){var e,h=n(this);i=i||{screenX:c[0],screenY:c[1],clientX:d[0],clientY:d[1]};var p=function(t){r&&(t.payload=r)},g={TouchEvent:function(t){var e=document.createTouch(window,h,0,u[0],u[1],c[0],c[1],d[0],d[1],0,0,0,0),n=document.createTouchList(e),o=document.createTouchList(e),i=document.createTouchList(e);t.initTouchEvent(a,!0,!0,window,null,c[0],c[1],d[0],d[1],!1,!1,!1,!1,n,o,i,1,0)},MouseEvents:function(e){if(e.initMouseEvent(a,!0,!0,window,0,c[0],c[1],d[0],d[1],!1,!1,!1,!1,1,h),t){var n=document.createTouch(window,h,0,u[0],u[1],c[0],c[1],d[0],d[1],0,0,0,0);e.touches=e.targetTouches=e.changedTouches=document.createTouchList(n)}}};if(document.createEvent){var v=!l&&!s&&f&&m[o]&&!t?"TouchEvent":"MouseEvents";e=document.createEvent(v),g[v](e),p(e),h.dispatchEvent(e)}else document.createEventObject&&((e=document.createEventObject()).eventType=e.eventName=a,e.screenX=c[0],e.screenY=c[1],e.clientX=d[0],e.clientY=d[1],p(e),h.fireEvent("on"+a,e))}),this}},this.Mottle.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},this.Mottle.pageLocation=x,this.Mottle.setForceTouchEvents=function(t){f=t},this.Mottle.setForceMouseEvents=function(t){g=t},this.Mottle.version="0.8.0","undefined"!=typeof exports&&(exports.Mottle=this.Mottle)}.call("undefined"==typeof window?this:window),function(){var t=function(t,e,n){return-1===t.indexOf(e)&&(n?t.unshift(e):t.push(e),!0)},e=function(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)},n=function(t){return null!=t&&("string"==typeof t||t.constructor===String)},o=function(t,e,n){for(var o=(n=n||t.parentNode).querySelectorAll(e),i=0;i<o.length;i++)if(o[i]===t)return!0;return!1},i=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),r=i>-1&&i<9,s=9===i,a=function(t){if(r)return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop];var e=u(t),n=l(e,0);return s?[n.pageX||n.clientX,n.pageY||n.clientY]:[n.pageX,n.pageY]},l=function(t,e){return t.item?t.item(e):t[e]},u=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},c={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},d=["stop","start","drag","drop","over","out","beforeStart"],h=function(){},p=function(){return!0},f=function(t,e,n){for(var o=0;o<t.length;o++)t[o]!=n&&e(t[o])},g=function(t,e,n,o){f(t,function(t){t.setActive(e),e&&t.updatePosition(),n&&t.setHover(o,e)})},m=function(t,e){if(null!=t){t=n(t)||null!=t.tagName||null==t.length?[t]:t;for(var o=0;o<t.length;o++)e.apply(t[o],[t[o]])}},v=function(t){t.stopPropagation?(t.stopPropagation(),t.preventDefault()):t.returnValue=!1},b=function(t,e,n,o){this.params=e||{},this.el=t,this.params.addClass(this.el,this._class),this.uuid=E();var i=!0;return this.setEnabled=function(t){i=t},this.isEnabled=function(){return i},this.toggleEnabled=function(){i=!i},this.setScope=function(t){this.scopes=t?t.split(/\s+/):[o]},this.addScope=function(t){var e={};for(var n in m(this.scopes,function(t){e[t]=!0}),m(t?t.split(/\s+/):[],function(t){e[t]=!0}),this.scopes=[],e)this.scopes.push(n)},this.removeScope=function(t){var e={};for(var n in m(this.scopes,function(t){e[t]=!0}),m(t?t.split(/\s+/):[],function(t){delete e[t]}),this.scopes=[],e)this.scopes.push(n)},this.toggleScope=function(t){var e={};for(var n in m(this.scopes,function(t){e[t]=!0}),m(t?t.split(/\s+/):[],function(t){e[t]?delete e[t]:e[t]=!0}),this.scopes=[],e)this.scopes.push(n)},this.setScope(e.scope),this.k=e.katavorio,e.katavorio},y=function(){return!0},x=function(){return!1},C=function(t,e,i,r){this._class=i.draggable;var s=b.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var l,u=[0,0],d=null,h=null,f=[0,0],m=!1,C=!1!==this.params.consumeStartEvent,P=this.el,w=this.params.clone,S=(this.params.scroll,!1!==e.multipleDrop),k=!1,T=!0===e.ghostProxy?y:e.ghostProxy&&"function"==typeof e.ghostProxy?e.ghostProxy:x,A=e.snapThreshold,_=function(t,e,n,o,i){var r=e*Math.floor(t[0]/e),s=r+e,a=Math.abs(t[0]-r)<=o?r:Math.abs(s-t[0])<=o?s:t[0],l=n*Math.floor(t[1]/n),u=l+n;return[a,Math.abs(t[1]-l)<=i?l:Math.abs(u-t[1])<=i?u:t[1]]};this.posses=[],this.posseRoles={},this.toGrid=function(t){if(null==this.params.grid)return t;var e=this.params.grid?this.params.grid[0]/2:A||5,n=this.params.grid?this.params.grid[1]/2:A||5;return _(t,this.params.grid[0],this.params.grid[1],e,n)},this.snap=function(t,e){if(null!=P){t=t||(this.params.grid?this.params.grid[0]:10),e=e||(this.params.grid?this.params.grid[1]:10);var n=this.params.getPosition(P),o=this.params.grid?this.params.grid[0]/2:A,i=this.params.grid?this.params.grid[1]/2:A;this.params.setPosition(P,_(n,t,e,o,i))}},this.setUseGhostProxy=function(t){T=t?y:x};var I,D=function(t){return!1===e.allowNegative?[Math.max(0,t[0]),Math.max(0,t[1])]:t},M=function(t){l="function"==typeof t?t:t?function(t){return D([Math.max(0,Math.min(O.w-this.size[0],t[0])),Math.max(0,Math.min(O.h-this.size[1],t[1]))])}.bind(this):function(t){return D(t)}}.bind(this);M("function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(t){M(t)},this.setRevert=function(t){I=t};var N={},L=this.setFilter=function(e,i){if(e){var r="function"==typeof(s=e)?(s._katavorioId=E(),s._katavorioId):s;N[r]=[function(i){var r,s=i.srcElement||i.target;return n(e)?r=o(s,e,t):"function"==typeof e&&(r=e(i,t)),r},!1!==i]}var s};this.addFilter=L,this.removeFilter=function(t){var e="function"==typeof t?t._katavorioId:t;delete N[e]};this.clearAllFilters=function(){N={}},this.canDrag=this.params.canDrag||p;var O,F=[],R=[];this.downListener=function(t){var e,n,r,l,h,p,f,g,m,b;if((this.rightButtonCanDrag||3!==t.which&&2!==t.button)&&this.isEnabled()&&this.canDrag())if(function(t){for(var e in N){var n=N[e],o=n[0](t);if(n[1]&&(o=!o),!o)return!1}return!0}(t)&&function(t,e,n){var i=t.srcElement||t.target;return!o(i,n.getInputFilterSelector(),e)}(t,this.el,this.k)){if(w){(P=this.el.cloneNode(!0)).setAttribute("id",null),P.style.position="absolute";var y=(e=this.el,n=e.getBoundingClientRect(),r=document.body,l=document.documentElement,h=window.pageYOffset||l.scrollTop||r.scrollTop,p=window.pageXOffset||l.scrollLeft||r.scrollLeft,f=l.clientTop||r.clientTop||0,g=l.clientLeft||r.clientLeft||0,m=n.top+h-f,b=n.left+p-g,{top:Math.round(m),left:Math.round(b)});P.style.left=y.left+"px",P.style.top=y.top+"px",this.params.addClass(P,c.clonedDrag),document.body.appendChild(P)}else P=this.el;C&&v(t),u=a(t),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),s.markSelection(this),s.markPosses(this),this.params.addClass(document.body,i.noSelect),U("beforeStart",{el:this.el,pos:d,e:t,drag:this})}else this.params.consumeFilteredEvents&&v(t)}.bind(this),this.moveListener=function(t){if(u){if(!m)if(!1!==U("start",{el:this.el,pos:d,e:t,drag:this})){if(!u)return;this.mark(!0),m=!0}else this.abort();if(u){R.length=0;var e=a(t),n=e[0]-u[0],o=e[1]-u[1],i=this.params.ignoreZoom?1:s.getZoom();n/=i,o/=i,this.moveBy(n,o,t),s.updateSelection(n,o,this),s.updatePosses(n,o,this)}}}.bind(this),this.upListener=function(t){u&&(u=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,i.noSelect),this.unmark(t),s.unmarkSelection(this,t),s.unmarkPosses(this,t),this.stop(t),s.notifySelectionDragStop(this,t),s.notifyPosseDragStop(this,t),m=!1,w&&(P&&P.parentNode&&P.parentNode.removeChild(P),P=null),R.length=0,I&&!0===I(this.el,this.params.getPosition(this.el))&&(this.params.setPosition(this.el,d),U("revert",this.el)))}.bind(this),this.getFilters=function(){return N},this.abort=function(){null!=u&&this.upListener()},this.getDragElement=function(){return P||this.el};var z={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};e.events.start&&z.start.push(e.events.start),e.events.beforeStart&&z.beforeStart.push(e.events.beforeStart),e.events.stop&&z.stop.push(e.events.stop),e.events.drag&&z.drag.push(e.events.drag),e.events.revert&&z.revert.push(e.events.revert),this.on=function(t,e){z[t]&&z[t].push(e)},this.off=function(t,e){if(z[t]){for(var n=[],o=0;o<z[t].length;o++)z[t][o]!==e&&n.push(z[t][o]);z[t]=n}};var G,U=function(t,e){var n=null;if(z[t])for(var o=0;o<z[t].length;o++)try{var i=z[t][o](e);null!=i&&(n=i)}catch(t){}return n};this.notifyStart=function(t){U("start",{el:this.el,pos:this.params.getPosition(P),e:t,drag:this})},this.stop=function(t,e){if(e||m){var n=[],o=s.getSelection(),i=this.params.getPosition(P);if(o.length>1)for(var r=0;r<o.length;r++){var a=this.params.getPosition(o[r].el);n.push([o[r].el,{left:a[0],top:a[1]},o[r]])}else n.push([P,{left:i[0],top:i[1]},this]);U("stop",{el:P,pos:G||i,finalPos:i,e:t,drag:this,selection:n})}},this.mark=function(t){var e;d=this.params.getPosition(P),h=this.params.getPosition(P,!0),f=[h[0]-d[0],h[1]-d[1]],this.size=this.params.getSize(P),F=s.getMatchingDroppables(this),g(F,!0,!1,this),this.params.addClass(P,this.params.dragClass||i.drag),e=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(P):this.params.getSize(P.parentNode),O={w:e[0],h:e[1]},t&&s.notifySelectionDragStart(this)},this.unmark=function(t,n){if(g(F,!1,!0,this),k&&T(this.el)?(G=[P.offsetLeft,P.offsetTop],this.el.parentNode.removeChild(P),P=this.el):G=null,this.params.removeClass(P,this.params.dragClass||i.drag),F.length=0,k=!1,!n){R.length>0&&G&&e.setPosition(this.el,G),R.sort(j);for(var o=0;o<R.length;o++){if(!0===R[o].drop(this,t))break}}},this.moveBy=function(t,n,o){R.length=0;var i=this.toGrid([d[0]+t,d[1]+n]),r=l(i,P);if(T(this.el))if(i[0]!==r[0]||i[1]!==r[1]){if(!k){var s=this.el.cloneNode(!0);e.addClass(s,c.ghostProxy),this.el.parentNode.appendChild(s),P=s,k=!0}r=i}else k&&(this.el.parentNode.removeChild(P),P=this.el,k=!1);var a={x:r[0],y:r[1],w:this.size[0],h:this.size[1]},u={x:a.x+f[0],y:a.y+f[1],w:a.w,h:a.h},h=null;this.params.setPosition(P,r);for(var p=0;p<F.length;p++){var g={x:F[p].pagePosition[0],y:F[p].pagePosition[1],w:F[p].size[0],h:F[p].size[1]};this.params.intersects(u,g)&&(S||null==h||h===F[p].el)&&F[p].canDrop(this)?(h||(h=F[p].el),R.push(F[p]),F[p].setHover(this,!0,o)):F[p].isHover()&&F[p].setHover(this,!1,o)}U("drag",{el:this.el,pos:r,e:o,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?L(this.params.handle,!1):L(this.params.filter,this.params.filterExclude)},P=function(t,e,n,o){this._class=n.droppable,this.params=e||{},this.rank=e.rank||0,this._activeClass=this.params.activeClass||n.active,this._hoverClass=this.params.hoverClass||n.hover,b.apply(this,arguments);var i=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(t){return!0},this.isHover=function(){return i},this.setHover=function(t,e,n){(e||null==this.el._katavorioDragHover||this.el._katavorioDragHover===t.el._katavorio)&&(this.params[e?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=e?t.el._katavorio:null,i!==e&&this.params.events[e?"over":"out"]({el:this.el,e:n,drag:t,drop:this}),i=e)},this.drop=function(t,e){return this.params.events.drop({drag:t,e:e,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,i=null}},E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},j=function(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:0},w=function(t){return null==t?null:null==(t="string"==typeof t||t.constructor===String?document.getElementById(t):t)?null:(t._katavorio=t._katavorio||E(),t)};this.Katavorio=function(o){var i=[],r={};this._dragsByScope={},this._dropsByScope={};var s=1,a=function(t,e){m(t,function(t){for(var n=0;n<t.scopes.length;n++)e[t.scopes[n]]=e[t.scopes[n]]||[],e[t.scopes[n]].push(t)})},l=function(t,e){var n=0;return m(t,function(t){for(var i=0;i<t.scopes.length;i++)if(e[t.scopes[i]]){var r=o.indexOf(e[t.scopes[i]],t);-1!==r&&(e[t.scopes[i]].splice(r,1),n++)}}),n>0},u=(this.getMatchingDroppables=function(t){for(var e=[],n={},o=0;o<t.scopes.length;o++){var i=this._dropsByScope[t.scopes[o]];if(i)for(var r=0;r<i.length;r++)!i[r].canDrop(t)||n[i[r].uuid]||!i[r].allowLoopback&&i[r].el===t.el||(n[i[r].uuid]=!0,e.push(i[r]))}return e.sort(j),e},function(t){t=t||{};var e,n={events:{}};for(e in o)n[e]=o[e];for(e in t)n[e]=t[e];for(e=0;e<d.length;e++)n.events[d[e]]=t[d[e]]||h;return n.katavorio=this,n}.bind(this)),p=function(t,e){for(var n=0;n<d.length;n++)e[d[n]]&&t.on(d[n],e[d[n]])}.bind(this),g={},v=o.css||{},b=o.scope||"katavorio-drag-scope";for(var y in c)g[y]=c[y];for(var y in v)g[y]=v[y];var x=o.inputFilterSelector||"input,textarea,select,button,option";this.getInputFilterSelector=function(){return x},this.setInputFilterSelector=function(t){return x=t,this},this.draggable=function(t,e){var n=[];return m(t,function(t){if(null!=(t=w(t)))if(null==t._katavorioDrag){var i=u(e);t._katavorioDrag=new C(t,i,g,b),a(t._katavorioDrag,this._dragsByScope),n.push(t._katavorioDrag),o.addClass(t,g.draggable)}else p(t._katavorioDrag,e)}.bind(this)),n},this.droppable=function(t,e){var n=[];return m(t,function(t){if(null!=(t=w(t))){var i=new P(t,u(e),g,b);t._katavorioDrop=t._katavorioDrop||[],t._katavorioDrop.push(i),a(i,this._dropsByScope),n.push(i),o.addClass(t,g.droppable)}}.bind(this)),n},this.select=function(t){return m(t,function(){var t=w(this);t&&t._katavorioDrag&&(r[t._katavorio]||(i.push(t._katavorioDrag),r[t._katavorio]=[t,i.length-1],o.addClass(t,g.selected)))}),this},this.deselect=function(t){return m(t,function(){var t=w(this);if(t&&t._katavorio&&r[t._katavorio]){for(var e=[],n=0;n<i.length;n++)i[n].el!==t&&e.push(i[n]);i=e,delete r[t._katavorio],o.removeClass(t,g.selected)}}),this},this.deselectAll=function(){for(var t in r){var e=r[t];o.removeClass(e[0],g.selected)}i.length=0,r={}},this.markSelection=function(t){f(i,function(t){t.mark()},t)},this.markPosses=function(t){t.posses&&m(t.posses,function(e){t.posseRoles[e]&&A[e]&&f(A[e].members,function(t){t.mark()},t)})},this.unmarkSelection=function(t,e){f(i,function(t){t.unmark(e)},t)},this.unmarkPosses=function(t,e){t.posses&&m(t.posses,function(n){t.posseRoles[n]&&A[n]&&f(A[n].members,function(t){t.unmark(e,!0)},t)})},this.getSelection=function(){return i.slice(0)},this.updateSelection=function(t,e,n){f(i,function(n){n.moveBy(t,e)},n)};var E=function(t,e){e.posses&&m(e.posses,function(n){e.posseRoles[n]&&A[n]&&f(A[n].members,function(e){t(e)},e)})};this.updatePosses=function(t,e,n){E(function(n){n.moveBy(t,e)},n)},this.notifyPosseDragStop=function(t,e){E(function(t){t.stop(e,!0)},t)},this.notifySelectionDragStop=function(t,e){f(i,function(t){t.stop(e,!0)},t)},this.notifySelectionDragStart=function(t,e){f(i,function(t){t.notifyStart(e)},t)},this.setZoom=function(t){s=t},this.getZoom=function(){return s};var S=function(t,e,n,o){m(t,function(t){l(t,n),t[o](e),a(t,n)})};m(["set","add","remove","toggle"],function(t){this[t+"Scope"]=function(e,n){S(e._katavorioDrag,n,this._dragsByScope,t+"Scope"),S(e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this),this[t+"DragScope"]=function(e,n){S(e.constructor===C?e:e._katavorioDrag,n,this._dragsByScope,t+"Scope")}.bind(this),this[t+"DropScope"]=function(e,n){S(e.constructor===P?e:e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(t,e){for(var n in this._dragsByScope)f(this._dragsByScope[n],function(n){n.snap(t,e)})},this.getDragsForScope=function(t){return this._dragsByScope[t]},this.getDropsForScope=function(t){return this._dropsByScope[t]};var k=function(t,e,n){if((t=w(t))[e]){var o=i.indexOf(t[e]);o>=0&&i.splice(o,1),l(t[e],n)&&m(t[e],function(t){t.destroy()}),delete t[e]}},T=function(t,e,n,o){(t=w(t))[e]&&t[e].off(n,o)};this.elementRemoved=function(t){this.destroyDraggable(t),this.destroyDroppable(t)},this.destroyDraggable=function(t,e,n){1===arguments.length?k(t,"_katavorioDrag",this._dragsByScope):T(t,"_katavorioDrag",e,n)},this.destroyDroppable=function(t,e,n){1===arguments.length?k(t,"_katavorioDrop",this._dropsByScope):T(t,"_katavorioDrop",e,n)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},i=[],r={},A={}};var A={},_=function(e,o,i){var r,s=n(o)?o:o.id,a=!!n(o)||!1!==o.active,l=A[s]||(r={name:s,members:[]},A[s]=r,r);return m(e,function(e){if(e._katavorioDrag){if(i&&null!=e._katavorioDrag.posseRoles[l.name])return;t(l.members,e._katavorioDrag),t(e._katavorioDrag.posses,l.name),e._katavorioDrag.posseRoles[l.name]=a}}),l};this.addToPosse=function(t,e){for(var n=[],o=1;o<arguments.length;o++)n.push(_(t,arguments[o]));return 1===n.length?n[0]:n},this.setPosse=function(t,e){for(var n=[],o=1;o<arguments.length;o++)n.push(_(t,arguments[o],!0).name);return m(t,function(t){if(t._katavorioDrag){var e=function(t,e){for(var n=[],o=0;o<t.length;o++)-1===e.indexOf(t[o])&&n.push(t[o]);return n}(t._katavorioDrag.posses,n);Array.prototype.push.apply([],t._katavorioDrag.posses);for(var o=0;o<e.length;o++)this.removeFromPosse(t,e[o])}}.bind(this)),1===n.length?n[0]:n},this.removeFromPosse=function(t,n){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var o=1;o<arguments.length;o++)n=arguments[o],m(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var o=t._katavorioDrag;m(n,function(t){e(A[t].members,o),e(o.posses,t),delete o.posseRoles[t]})}})},this.removeFromAllPosses=function(t){m(t,function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var n=t._katavorioDrag;m(n.posses,function(t){e(A[t].members,n)}),n.posses.length=0,n.posseRoles={}}})},this.setPosseState=function(t,e,n){var o=A[e];o&&m(t,function(t){t._katavorioDrag&&t._katavorioDrag.posses&&(t._katavorioDrag.posseRoles[o.name]=n)})}},this.Katavorio.version="0.23.0","undefined"!=typeof exports&&(exports.Katavorio=this.Katavorio)}.call("undefined"!=typeof window?window:this),function(){var t=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=function(t){return"string"==typeof t},n=function(t){return"boolean"==typeof t},o=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},i=function(t){return"[object Date]"===Object.prototype.toString.call(t)},r=function(t){return"[object Function]"===Object.prototype.toString.call(t)},s=this;s.jsPlumbUtil={isArray:t,isString:e,isBoolean:n,isNull:function(t){return null==t},isObject:o,isDate:i,isFunction:r,isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},clone:function(s){if(e(s))return""+s;if(n(s))return!!s;if(i(s))return new Date(s.getTime());if(r(s))return s;if(t(s)){for(var a=[],l=0;l<s.length;l++)a.push(this.clone(s[l]));return a}if(o(s)){var u={};for(var c in s)u[c]=this.clone(s[c]);return u}return s},merge:function(i,r,s){var a,l,u={};for(s=s||[],l=0;l<s.length;l++)u[s[l]]=!0;var c=this.clone(i);for(l in r)if(null==c[l])c[l]=r[l];else if(e(r[l])||n(r[l]))u[l]?((a=[]).push.apply(a,t(c[l])?c[l]:[c[l]]),a.push.apply(a,t(r[l])?r[l]:[r[l]]),c[l]=a):c[l]=r[l];else if(t(r[l]))a=[],t(c[l])&&a.push.apply(a,c[l]),a.push.apply(a,r[l]),c[l]=a;else if(o(r[l]))for(var d in o(c[l])||(c[l]={}),r[l])c[l][d]=r[l][d];return c},replace:function(t,e,n){if(null!=t){var o=t;return e.replace(/([^\.])+/g,function(t,e,i,r){var s=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),a=function(){return o[s[1]]||(o[s[1]]=[],o[s[1]])};if(i+t.length>=r.length)s?a()[s[3]]=n:o[t]=n;else if(s){var l=a();o=l[s[3]]||(l[s[3]]={},l[s[3]])}else o=o[t]||(o[t]={},o[t])}),t}},functionChain:function(t,e,n){for(var o=0;o<n.length;o++){var i=n[o][0][n[o][1]].apply(n[o][0],n[o][2]);if(i===e)return i}return t},populate:function(n,i,s){return function n(a){if(null!=a){if(e(a))return function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var n=0;n<e.length;n++){var o=i[e[n].substring(2,e[n].length-1)]||"";null!=o&&(t=t.replace(e[n],o))}return t}(a);if(!r(a)||null!=s&&0!==(a.name||"").indexOf(s)){if(t(a)){for(var l=[],u=0;u<a.length;u++)l.push(n(a[u]));return l}if(o(a)){var c={};for(var d in a)c[d]=n(a[d]);return c}return a}return a(i)}}(n)},findWithFunction:function(t,e){if(t)for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},removeWithFunction:function(t,e){var n=s.jsPlumbUtil.findWithFunction(t,e);return n>-1&&t.splice(n,1),-1!==n},remove:function(t,e){var n=t.indexOf(e);return n>-1&&t.splice(n,1),-1!==n},addWithFunction:function(t,e,n){-1===s.jsPlumbUtil.findWithFunction(t,n)&&t.push(e)},addToList:function(t,e,n,o){var i=t[e];return null==i&&(i=[],t[e]=i),i[o?"unshift":"push"](n),i},suggest:function(t,e,n){return-1===t.indexOf(e)&&(n?t.unshift(e):t.push(e),!0)},extend:function(e,n,o){var i;for(n=t(n)?n:[n],i=0;i<n.length;i++)for(var r in n[i].prototype)n[i].prototype.hasOwnProperty(r)&&(e.prototype[r]=n[i].prototype[r]);var s=function(t,e){return function(){for(i=0;i<n.length;i++)n[i].prototype[t]&&n[i].prototype[t].apply(this,arguments);return e.apply(this,arguments)}},a=function(t){for(var n in t)e.prototype[n]=s(n,t[n])};if(arguments.length>2)for(i=2;i<arguments.length;i++)a(arguments[i]);return e},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},logEnabled:!0,log:function(){if(s.jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{var t=arguments[arguments.length-1];console.log(t)}catch(t){}},wrap:function(t,e,n){return function(){var o=null;try{null!=e&&(o=e.apply(this,arguments))}catch(t){s.jsPlumbUtil.log("jsPlumb function failed : "+t)}if(null!=t&&(null==n||o!==n))try{o=t.apply(this,arguments)}catch(t){s.jsPlumbUtil.log("wrapped function failed : "+t)}return o}}},s.jsPlumbUtil.EventGenerator=function(){var t={},e=!1,n=!1,o={ready:!0},i=[];this.bind=function(e,n,o){var i=function(e){s.jsPlumbUtil.addToList(t,e,n,o),n.__jsPlumb=n.__jsPlumb||{},n.__jsPlumb[s.jsPlumbUtil.uuid()]=e};if("string"==typeof e)i(e);else if(null!=e.length)for(var r=0;r<e.length;r++)i(e[r]);return this},this.fire=function(a,l,u){if(n)i.unshift(arguments);else{if(n=!0,!e&&t[a]){var c=t[a].length,d=0,h=!1,p=null;if(!this.shouldFireEvent||this.shouldFireEvent(a,l,u))for(;!h&&d<c&&!1!==p;){if(o[a])t[a][d].apply(this,[l,u]);else try{p=t[a][d].apply(this,[l,u])}catch(t){s.jsPlumbUtil.log("jsPlumb: fire failed for event "+a+" : "+t)}d++,null!=t&&null!=t[a]||(h=!0)}}n=!1,r()}return this};var r=function(){var t=i.pop();t&&this.fire.apply(this,t)}.bind(this);this.unbind=function(e,n){if(0===arguments.length)t={};else if(1===arguments.length){if("string"==typeof e)delete t[e];else if(e.__jsPlumb){var o;for(var i in e.__jsPlumb)o=e.__jsPlumb[i],s.jsPlumbUtil.remove(t[o]||[],e)}}else 2===arguments.length&&s.jsPlumbUtil.remove(t[e]||[],n);return this},this.getListener=function(e){return t[e]},this.setSuspendEvents=function(t){e=t},this.isSuspendEvents=function(){return e},this.silently=function(t){this.setSuspendEvents(!0);try{t()}catch(t){s.jsPlumbUtil.log("Cannot execute silent function "+t)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var e in t)t[e]=null}},s.jsPlumbUtil.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},"undefined"!=typeof exports&&(exports.jsPlumbUtil=s.jsPlumbUtil)}.call("undefined"!=typeof window?window:this),function(){this.jsPlumbUtil.matchesSelector=function(t,e,n){for(var o=(n=n||t.parentNode).querySelectorAll(e),i=0;i<o.length;i++)if(o[i]===t)return!0;return!1},this.jsPlumbUtil.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},this.jsPlumbUtil.sizeElement=function(t,e,n,o,i){t&&(t.style.height=i+"px",t.height=i,t.style.width=o+"px",t.width=o,t.style.left=e+"px",t.style.top=n+"px")}}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumbUtil,n=function(){return""+(new Date).getTime()},o=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var e={};g.extend(e,t._jsPlumb.paintStyle),g.extend(e,t._jsPlumb.hoverPaintStyle),delete t._jsPlumb.hoverPaintStyle,e.gradient&&t._jsPlumb.paintStyle.fill&&delete e.gradient,t._jsPlumb.hoverPaintStyle=e}},i=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],r=function(t){return null==t?null:t.split(" ")},a=function(t,e,n){for(var o in e)t[o]=n},u=function(t,n){n=e.isArray(n)||null!=n.length&&!e.isString(n)?n:[n];for(var o=0;o<n.length;o++)try{t.apply(n[o],[n[o]])}catch(t){e.log(".each iteration failed : "+t)}},c=function(t,n,o){if(t.getDefaultType){var i=t.getTypeDescriptor(),r={},s=t.getDefaultType(),l=e.merge({},s);a(r,s,"__default");for(var u=0,c=t._jsPlumb.types.length;u<c;u++){var d=t._jsPlumb.types[u];if("__default"!==d){var h=t._jsPlumb.instance.getType(d,i);null!=h&&(l=e.merge(l,h,["cssClass"]),a(r,h,d))}}n&&(l=e.populate(l,n,"_")),t.applyType(l,o,r),o||t.repaint()}},d=t.jsPlumbUIComponent=function(t){e.EventGenerator.apply(this,arguments);var n=arguments,o=this.idPrefix+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(t,e,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{},this._jsPlumb.typeCache[n][t]=e},this.getCachedTypeItem=function(t,e){return this._jsPlumb.typeCache[e]?this._jsPlumb.typeCache[e][t]:null},this.getId=function(){return o};var i=t.overlays||[],r={};if(this.defaultOverlayKeys){for(var s=0;s<this.defaultOverlayKeys.length;s++)Array.prototype.push.apply(i,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[s]]||[]);for(s=0;s<i.length;s++){var a=g.convertToFullOverlaySpec(i[s]);r[a[1].id]=a}}var u={overlays:r,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return u},this.appendToDefaultType=function(t){for(var e in t)u[e]=t[e]},t.events)for(var c in t.events)this.bind(c,t.events[c]);this.clone=function(){var t=l()(this.constructor.prototype);return this.constructor.apply(t,n),t}.bind(this),this.isDetachAllowed=function(t){var n=!0;if(this._jsPlumb.beforeDetach)try{n=this._jsPlumb.beforeDetach(t)}catch(t){e.log("jsPlumb: beforeDetach callback failed",t)}return n},this.isDropAllowed=function(t,n,o,i,r,s,a){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:n,scope:o,connection:i,dropEndpoint:r,source:s,target:a});if(this._jsPlumb.beforeDrop)try{l=this._jsPlumb.beforeDrop({sourceId:t,targetId:n,scope:o,connection:i,dropEndpoint:r,source:s,target:a})}catch(t){e.log("jsPlumb: beforeDrop callback failed",t)}return l};var d=[];this.setListenerComponent=function(t){for(var e=0;e<d.length;e++)d[e][3]=t}},h=function(t,e){var n=t._jsPlumb.types[e],o=t._jsPlumb.instance.getType(n,t.getTypeDescriptor());null!=o&&o.cssClass&&t.canvas&&t._jsPlumb.instance.removeClass(t.canvas,o.cssClass)};e.extend(t.jsPlumbUIComponent,e.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,e){this._jsPlumb.parameters[t]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},getClass:function(){return g.getClass(this.canvas)},hasClass:function(t){return g.hasClass(this.canvas,t)},addClass:function(t){g.addClass(this.canvas,t)},removeClass:function(t){g.removeClass(this.canvas,t)},updateClasses:function(t,e){g.updateClasses(this.canvas,t,e)},setType:function(t,e,n){this.clearTypes(),this._jsPlumb.types=r(t)||[],c(this,e,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,e){c(this,t,e)},hasType:function(t){return-1!==this._jsPlumb.types.indexOf(t)},addType:function(t,e,n){var o=r(t),i=!1;if(null!=o){for(var s=0,a=o.length;s<a;s++)this.hasType(o[s])||(this._jsPlumb.types.push(o[s]),i=!0);i&&c(this,e,n)}},removeType:function(t,e,n){var o=r(t),i=!1,s=function(t){var e=this._jsPlumb.types.indexOf(t);return-1!==e&&(h(this,e),this._jsPlumb.types.splice(e,1),!0)}.bind(this);if(null!=o){for(var a=0,l=o.length;a<l;a++)i=s(o[a])||i;i&&c(this,e,n)}},clearTypes:function(t,e){for(var n=this._jsPlumb.types.length,o=0;o<n;o++)h(this,0),this._jsPlumb.types.splice(0,1);c(this,t,e)},toggleType:function(t,e,n){var o=r(t);if(null!=o){for(var i=0,s=o.length;i<s;i++){var a=this._jsPlumb.types.indexOf(o[i]);-1!==a?(h(this,a),this._jsPlumb.types.splice(a,1)):this._jsPlumb.types.push(o[i])}c(this,e,n)}},applyType:function(t,e){if(this.setPaintStyle(t.paintStyle,e),this.setHoverPaintStyle(t.hoverPaintStyle,e),t.parameters)for(var n in t.parameters)this.setParameter(n,t.parameters[n]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,e){this._jsPlumb.paintStyle=t,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,o(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,e){this._jsPlumb.hoverPaintStyle=t,o(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){(t||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(t,e,o){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=t;var i=t?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(o=o||n(),this.repaint({timestamp:o,recalc:!1}))),this.getAttachedElements&&!e&&function(t,e,n,o){var i=t.getAttachedElements();if(i)for(var r=0,s=i.length;r<s;r++)o&&o===i[r]||i[r].setHover(e,!0,n)}(this,t,n(),this)}}});var p=0,f=t.jsPlumbInstance=function(o){this.version="2.6.9",o&&g.extend(this.Defaults,o),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},e.EventGenerator.apply(this);var r=this,a=function(){var t=p+1;return p++,t}(),l=r.bind,c={},h=1,f=function(t){if(null==t)return null;if(3===t.nodeType||8===t.nodeType)return{el:t,text:!0};var n=r.getElement(t);return{el:n,id:e.isString(t)&&null==n?t:W(n)}};for(var m in this.getInstanceIndex=function(){return a},this.setZoom=function(t,e){return h=t,r.fire("zoom",h),e&&r.repaintEverything(),!0},this.getZoom=function(){return h},this.Defaults)c[m]=this.Defaults[m];var v,b=[];this.unbindContainer=function(){if(null!=v&&b.length>0)for(var t=0;t<b.length;t++)r.off(v,b[t][0],b[t][1])},this.setContainer=function(t){this.unbindContainer(),t=this.getElement(t),this.select().each(function(e){e.moveParent(t)}),this.selectEndpoints().each(function(e){e.moveParent(t)});var e=v;v=t,b.length=0;for(var n={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},o=function(t,e,o){var i=e.srcElement||e.target,s=(i&&i.parentNode?i.parentNode._jsPlumb:null)||(i?i._jsPlumb:null)||(i&&i.parentNode&&i.parentNode.parentNode?i.parentNode.parentNode._jsPlumb:null);if(s){s.fire(t,s,e);var a=o&&n[o+t]||t;r.fire(a,s.component||s,e)}},s=function(t,e,n){b.push([t,n]),r.on(v,t,e,n)},a=function(t){s(t,".jtk-connector",function(e){o(t,e)}),s(t,".jtk-endpoint",function(e){o(t,e,"endpoint")}),s(t,".jtk-overlay",function(e){o(t,e)})},l=0;l<i.length;l++)a(i[l]);for(var u in j){var c=j[u].el;c.parentNode===e&&(e.removeChild(c),v.appendChild(c))}},this.getContainer=function(){return v},this.bind=function(t,e){"ready"===t&&x?e():l.apply(r,[t,e])},r.importDefaults=function(t){for(var e in t)r.Defaults[e]=t[e];return t.Container&&r.setContainer(t.Container),r},r.restoreDefaults=function(){return r.Defaults=g.extend({},c),r};var y=null,x=!1,C=[],P={},E={},j={},w={},S={},k={},T=!1,A=[],_=!1,I=null,D=this.Defaults.Scope,M=1,N=function(){return""+M++},L=function(t,e){v?v.appendChild(t):e?this.getElement(e).appendChild(t):this.appendToRoot(t)}.bind(this),O=function(t,e,o,i){if(!_){var s,a=W(t),l=r.getDragManager();l&&(s=l.getElementsForDraggable(a)),null==o&&(o=n());var u=ot({elId:a,offset:e,recalc:!1,timestamp:o});if(s&&u&&u.o)for(var c in s)ot({elId:s[c].id,offset:{left:u.o.left+s[c].offset.left,top:u.o.top+s[c].offset.top},recalc:!1,timestamp:o});if(r.anchorManager.redraw(a,e,o,null,i),s)for(var d in s)r.anchorManager.redraw(s[d].id,e,o,s[d].offset,i,!0)}},F=function(t){return E[t]},R=function(t,n){var o=g.extend({},t);if(n&&g.extend(o,n),o.source&&(o.source.endpoint?o.sourceEndpoint=o.source:o.source=r.getElement(o.source)),o.target&&(o.target.endpoint?o.targetEndpoint=o.target:o.target=r.getElement(o.target)),t.uuids&&(o.sourceEndpoint=F(t.uuids[0]),o.targetEndpoint=F(t.uuids[1])),o.sourceEndpoint&&o.sourceEndpoint.isFull())e.log(r,"could not add connection; source endpoint is full");else if(o.targetEndpoint&&o.targetEndpoint.isFull())e.log(r,"could not add connection; target endpoint is full");else{if(!o.type&&o.sourceEndpoint&&(o.type=o.sourceEndpoint.connectionType),o.sourceEndpoint&&o.sourceEndpoint.connectorOverlays){o.overlays=o.overlays||[];for(var i=0,s=o.sourceEndpoint.connectorOverlays.length;i<s;i++)o.overlays.push(o.sourceEndpoint.connectorOverlays[i])}o.sourceEndpoint&&o.sourceEndpoint.scope&&(o.scope=o.sourceEndpoint.scope),!o["pointer-events"]&&o.sourceEndpoint&&o.sourceEndpoint.connectorPointerEvents&&(o["pointer-events"]=o.sourceEndpoint.connectorPointerEvents);var a=function(t,e,n){return r.addEndpoint(t,function(t,e){var n=g.extend({},t);for(var o in e)e[o]&&(n[o]=e[o]);return n}(e,{anchor:o.anchors?o.anchors[n]:o.anchor,endpoint:o.endpoints?o.endpoints[n]:o.endpoint,paintStyle:o.endpointStyles?o.endpointStyles[n]:o.endpointStyle,hoverPaintStyle:o.endpointHoverStyles?o.endpointHoverStyles[n]:o.endpointHoverStyle}))},l=function(t,e,n,i){if(o[t]&&!o[t].endpoint&&!o[t+"Endpoint"]&&!o.newConnection){var r=n[W(o[t])];if(r=r?r[i]:null){if(!r.enabled)return!1;var s=null!=r.endpoint&&r.endpoint._jsPlumb?r.endpoint:a(o[t],r.def,e);if(s.isFull())return!1;o[t+"Endpoint"]=s,!o.scope&&r.def.scope&&(o.scope=r.def.scope),r.uniqueEndpoint?r.endpoint?s.finalEndpoint=r.endpoint:(r.endpoint=s,s.setDeleteOnEmpty(!1)):s.setDeleteOnEmpty(!0),0===e&&r.def.connectorOverlays&&(o.overlays=o.overlays||[],Array.prototype.push.apply(o.overlays,r.def.connectorOverlays))}}};if(!1!==l("source",0,this.sourceEndpointDefinitions,o.type||"default")&&!1!==l("target",1,this.targetEndpointDefinitions,o.type||"default"))return o.sourceEndpoint&&o.targetEndpoint&&(function(t,e){for(var n=t.scope.split(/\s/),o=e.scope.split(/\s/),i=0;i<n.length;i++)for(var r=0;r<o.length;r++)if(o[r]===n[i])return!0;return!1}(o.sourceEndpoint,o.targetEndpoint)||(o=null)),o}}.bind(r),z=function t(e){var n=r.Defaults.ConnectionType||r.getDefaultConnectionType();e._jsPlumb=r,e.newConnection=t,e.newEndpoint=U,e.endpointsByUUID=E,e.endpointsByElement=P,e.finaliseConnection=G,e.id="con_"+N();var o=new n(e);return o.isDetachable()&&(o.endpoints[0].initDraggable("_jsPlumbSource"),o.endpoints[1].initDraggable("_jsPlumbTarget")),o},G=r.finaliseConnection=function(t,e,n,o){if(e=e||{},t.suspendedEndpoint||C.push(t),t.pending=null,t.endpoints[0].isTemporarySource=!1,!1!==o&&r.anchorManager.newConnection(t),O(t.source),!e.doNotFireConnectionEvent&&!1!==e.fireEvent){var i={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};r.fire("connection",i,n)}},U=function t(e,n){var o=r.Defaults.EndpointType||g.Endpoint,i=g.extend({},e);i._jsPlumb=r,i.newConnection=z,i.newEndpoint=t,i.endpointsByUUID=E,i.endpointsByElement=P,i.fireDetachEvent=Y,i.elementId=n||W(i.source);var s=new o(i);return s.id="ep_"+N(),nt(i.elementId,i.source),g.headless||r.getDragManager().endpointAdded(i.source,n),s},V=function(t,e,n){var o=P[t];if(o&&o.length)for(var i=0,r=o.length;i<r;i++){for(var s=0,a=o[i].connections.length;s<a;s++){if(e(o[i].connections[s]))return}n&&n(o[i])}},B=function(t,e,n){e="block"===e;var o=null;n&&(o=function(t){t.setVisible(e,!0,!0)});var i=f(t);V(i.id,function(t){if(e&&n){var o=t.sourceId===i.id?1:0;t.endpoints[o].isVisible()&&t.setVisible(!0)}else t.setVisible(e)},o)},W=function(t,n,o){if(e.isString(t))return t;if(null==t)return null;var i=r.getAttribute(t,"id");return i&&"undefined"!==i||(2===arguments.length&&void 0!==arguments[1]?i=n:(1===arguments.length||3===arguments.length&&!arguments[2])&&(i="jsPlumb_"+a+"_"+N()),o||r.setAttribute(t,"id",i)),i};this.setConnectionBeingDragged=function(t){T=t},this.isConnectionBeingDragged=function(){return T},this.getManagedElements=function(){return j},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(t,n,o){o=o||{};var i=g.extend({},o);g.extend(i,n),i.endpoint=i.endpoint||r.Defaults.Endpoint,i.paintStyle=i.paintStyle||r.Defaults.EndpointStyle;for(var s=[],a=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],l=0,u=a.length;l<u;l++){i.source=r.getElement(a[l]),et(i.source);var c=W(i.source),d=U(i,c),h=nt(c,i.source).info.o;e.addToList(P,c,d),_||d.paint({anchorLoc:d.anchor.compute({xy:[h.left,h.top],wh:A[c],element:d,timestamp:I}),timestamp:I}),s.push(d)}return 1===s.length?s[0]:s},this.addEndpoints=function(t,n,o){for(var i=[],s=0,a=n.length;s<a;s++){var l=r.addEndpoint(t,n[s],o);e.isArray(l)?Array.prototype.push.apply(i,l):i.push(l)}return i},this.animate=function(t,n,o){if(!this.animationSupported)return!1;o=o||{};var i=r.getElement(t),s=W(i),a=g.animEvents.step,l=g.animEvents.complete;o[a]=e.wrap(o[a],function(){r.revalidate(s)}),o[l]=e.wrap(o[l],function(){r.revalidate(s)}),r.doAnimate(i,n,o)},this.checkCondition=function(t,n){var o=r.getListener(t),i=!0;if(o&&o.length>0){var s=Array.prototype.slice.call(arguments,1);try{for(var a=0,l=o.length;a<l;a++)i=i&&o[a].apply(o[a],s)}catch(n){e.log(r,"cannot check condition ["+t+"]"+n)}}return i},this.connect=function(t,n){var o,i=R(t,n);if(i){if(null==i.source&&null==i.sourceEndpoint)return void e.log("Cannot establish connection - source does not exist");if(null==i.target&&null==i.targetEndpoint)return void e.log("Cannot establish connection - target does not exist");et(i.source),o=z(i),G(o,i)}return o};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],H=function(t,e,n,o){var i,r,s,a=Z[n],l=t[a.elId],u=(t[a.el],t.endpoints[n]),c={index:n,originalSourceId:0===n?l:t.sourceId,newSourceId:t.sourceId,originalTargetId:1===n?l:t.targetId,newTargetId:t.targetId,connection:t};if(e.constructor===g.Endpoint)(i=e).addConnection(t),e=i.element;else if(r=W(e),s=this[a.epDefs][r],r===t[a.elId])i=null;else if(s)for(var d in s){if(!s[d].enabled)return;i=null!=s[d].endpoint&&s[d].endpoint._jsPlumb?s[d].endpoint:this.addEndpoint(e,s[d].def),s[d].uniqueEndpoint&&(s[d].endpoint=i),i.addConnection(t)}else i=t.makeEndpoint(0===n,e,r);return null!=i&&(u.detachFromConnection(t),t.endpoints[n]=i,t[a.el]=i.element,t[a.elId]=i.elementId,c[0===n?"newSourceId":"newTargetId"]=i.elementId,X(c),o||t.repaint()),c.element=e,c}.bind(this);this.setSource=function(t,e,n){var o=H(t,e,0,n);this.anchorManager.sourceChanged(o.originalSourceId,o.newSourceId,t,o.el)},this.setTarget=function(t,e,n){var o=H(t,e,1,n);this.anchorManager.updateOtherEndpoint(o.originalSourceId,o.originalTargetId,o.newTargetId,t)},this.deleteEndpoint=function(t,e,n){var o="string"==typeof t?E[t]:t;return o&&r.deleteObject({endpoint:o,dontUpdateHover:e,deleteAttachedObjects:n}),r},this.deleteEveryEndpoint=function(){var t=r.setSuspendDrawing(!0);for(var e in P){var n=P[e];if(n&&n.length)for(var o=0,i=n.length;o<i;o++)r.deleteEndpoint(n[o],!0)}P={},j={},E={},w={},S={},r.anchorManager.reset();var s=r.getDragManager();return s&&s.reset(),t||r.setSuspendDrawing(!1),r};var Y=function(t,e,n){var o=r.Defaults.ConnectionType||r.getDefaultConnectionType(),i=t.constructor===o?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;e&&r.fire("connectionDetached",i,n),r.fire("internal.connectionDetached",i,n),r.anchorManager.connectionDetached(i)},X=r.fireMoveEvent=function(t,e){r.fire("connectionMoved",t,e)};this.unregisterEndpoint=function(t){for(var e in t._jsPlumb.uuid&&(E[t._jsPlumb.uuid]=null),r.anchorManager.deleteEndpoint(t),P){var n=P[e];if(n){for(var o=[],i=0,s=n.length;i<s;i++)n[i]!==t&&o.push(n[i]);P[e]=o}P[e].length<1&&delete P[e]}};this.deleteConnection=function(t,n){return!(null==t||!(n=n||{}).force&&!e.functionChain(!0,!1,[[t.endpoints[0],"isDetachAllowed",[t]],[t.endpoints[1],"isDetachAllowed",[t]],[t,"isDetachAllowed",[t]],[r,"checkCondition",["beforeDetach",t]]]))&&(t.setHover(!1),Y(t,!t.pending&&!1!==n.fireEvent,n.originalEvent),t.endpoints[0].detachFromConnection(t),t.endpoints[1].detachFromConnection(t),e.removeWithFunction(C,function(e){return t.id===e.id}),t.cleanup(),t.destroy(),!0)},this.deleteEveryConnection=function(t){t=t||{};var e=C.length,n=0;return r.batch(function(){for(var o=0;o<e;o++)n+=r.deleteConnection(C[0],t)?1:0}),n},this.deleteConnectionsForElement=function(t,e){e=e||{},t=r.getElement(t);var n=W(t),o=P[n];if(o&&o.length)for(var i=0,s=o.length;i<s;i++)o[i].deleteEveryConnection(e);return r},this.deleteObject=function(t){var n={endpoints:{},connections:{},endpointCount:0,connectionCount:0},o=!1!==t.deleteAttachedObjects,i=function(e){null!=e&&null==n.connections[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.connections[e.id]=e,n.connectionCount++)};for(var s in t.connection?i(t.connection):function(e){if(null!=e&&null==n.endpoints[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.endpoints[e.id]=e,n.endpointCount++,o))for(var r=0;r<e.connections.length;r++){var s=e.connections[r];i(s)}}(t.endpoint),n.connections){var a=n.connections[s];if(a._jsPlumb){e.removeWithFunction(C,function(t){return a.id===t.id}),Y(a,!1!==t.fireEvent&&!a.pending,t.originalEvent);var l=null==t.deleteAttachedObjects?null:!t.deleteAttachedObjects;a.endpoints[0].detachFromConnection(a,null,l),a.endpoints[1].detachFromConnection(a,null,l),a.cleanup(!0),a.destroy(!0)}}for(var u in n.endpoints){var c=n.endpoints[u];c._jsPlumb&&(r.unregisterEndpoint(c),c.cleanup(!0),c.destroy(!0))}return n},this.draggable=function(t,n){var o;return u(function(t){(o=f(t)).el&&function(t,n,o,i,s){if(!g.headless&&null!=n&&n&&g.isDragSupported(t,r)){var a=o||r.Defaults.DragOptions;if(a=g.extend({},a),g.isAlreadyDraggable(t,r))o.force&&r.initDraggable(t,a);else{var l=g.dragEvents.drag,u=g.dragEvents.stop,c=g.dragEvents.start,d=!1;nt(i,t),a[c]=e.wrap(a[c],function(){if(r.setHoverSuspended(!0),r.select({source:t}).addClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:t}).addClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.setConnectionBeingDragged(!0),a.canDrag)return o.canDrag()},!1),a[l]=e.wrap(a[l],function(){var e=r.getUIPosition(arguments,r.getZoom());null!=e&&(O(t,e,null,!0),d&&r.addClass(t,"jtk-dragged"),d=!0)}),a[u]=e.wrap(a[u],function(){for(var t,e,n=arguments[0].selection,o=0;o<n.length;o++)null!=(e=n[o])[1]&&(t=r.getUIPosition([{el:e[2].el,pos:[e[1].left,e[1].top]}]),O(e[2].el,t)),r.removeClass(e[0],"jtk-dragged"),r.select({source:e[2].el}).removeClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:e[2].el}).removeClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.getDragManager().dragEnded(e[2].el);d=!1,r.setHoverSuspended(!1),r.setConnectionBeingDragged(!1)});var h=W(t);k[h]=!0;var p=k[h];a.disabled=null!=p&&!p,r.initDraggable(t,a),r.getDragManager().register(t),s&&r.fire("elementDraggable",{el:t,options:a})}}}(o.el,!0,n,o.id,!0)},t),r},this.droppable=function(t,e){var n;return(e=e||{}).allowLoopback=!1,u(function(t){(n=f(t)).el&&r.initDroppable(n.el,e)},t),r};var q=function(t,e,n){return function(){return function(t,e,n,o){for(var i=0,r=t.length;i<r;i++)t[i][e].apply(t[i],n);return o(t)}(t,e,arguments,n)}},J=function(t,e){return function(){return function(t,e,n){for(var o=[],i=0,r=t.length;i<r;i++)o.push([t[i][e].apply(t[i],n),t[i]]);return o}(t,e,arguments)}},K=function(t,e){var n=[];if(t)if("string"==typeof t){if("*"===t)return t;n.push(t)}else if(e)n=t;else if(t.length)for(var o=0,i=t.length;o<i;o++)n.push(f(t[o]).id);else n.push(f(t).id);return n},Q=function(t,e,n){return"*"===t||(t.length>0?-1!==t.indexOf(e):!n)};this.getConnections=function(t,e){t?t.constructor===String&&(t={scope:t}):t={};for(var n=t.scope||r.getDefaultScope(),o=K(n,!0),i=K(t.source),s=K(t.target),a=!e&&o.length>1?{}:[],l=function(t,n){if(!e&&o.length>1){var i=a[t];null==i&&(i=a[t]=[]),i.push(n)}else a.push(n)},u=0,c=C.length;u<c;u++){var d=C[u],h=d.proxies&&d.proxies[0]?d.proxies[0].originalEp.elementId:d.sourceId,p=d.proxies&&d.proxies[1]?d.proxies[1].originalEp.elementId:d.targetId;Q(o,d.scope)&&Q(i,h)&&Q(s,p)&&l(d.scope,d)}return a};var $=function(t,e){var n,o,i={length:t.length,each:function(t,e){return function(n){for(var o=0,i=t.length;o<i;o++)n(t[o]);return e(t)}}(t,e),get:function(t){return function(e){return t[e]}}(t)},r=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],s=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(n=0,o=r.length;n<o;n++)i[r[n]]=q(t,r[n],e);for(n=0,o=s.length;n<o;n++)i[s[n]]=J(t,s[n]);return i};this.select=function(t){return(t=t||{}).scope=t.scope||"*",function t(e){var n=$(e,t);return g.extend(n,{setDetachable:q(e,"setDetachable",t),setReattach:q(e,"setReattach",t),setConnector:q(e,"setConnector",t),delete:function(){for(var t=0,n=e.length;t<n;t++)r.deleteConnection(e[t])},isDetachable:J(e,"isDetachable"),isReattach:J(e,"isReattach")})}(t.connections||r.getConnections(t,!0))},this.selectEndpoints=function(t){(t=t||{}).scope=t.scope||"*";var e=!t.element&&!t.source&&!t.target,n=e?"*":K(t.element),o=e?"*":K(t.source),i=e?"*":K(t.target),s=K(t.scope,!0),a=[];for(var l in P){var u=Q(n,l,!0),c=Q(o,l,!0),d="*"!==o,h=Q(i,l,!0),p="*"!==i;if(u||c||h)t:for(var f=0,m=P[l].length;f<m;f++){var v=P[l][f];if(Q(s,v.scope,!0)){var b=d&&o.length>0&&!v.isSource,y=p&&i.length>0&&!v.isTarget;if(b||y)continue t;a.push(v)}}}return function t(e){var n=$(e,t);return g.extend(n,{setEnabled:q(e,"setEnabled",t),setAnchor:q(e,"setAnchor",t),isEnabled:J(e,"isEnabled"),deleteEveryConnection:function(){for(var t=0,n=e.length;t<n;t++)e[t].deleteEveryConnection()},delete:function(){for(var t=0,n=e.length;t<n;t++)r.deleteEndpoint(e[t])}})}(a)},this.getAllConnections=function(){return C},this.getDefaultScope=function(){return D},this.getEndpoint=F,this.getEndpoints=function(t){return P[f(t).id]||[]},this.getDefaultEndpointType=function(){return g.Endpoint},this.getDefaultConnectionType=function(){return g.Connection},this.getId=W,this.appendElement=L;var tt=!1;this.isHoverSuspended=function(){return tt},this.setHoverSuspended=function(t){tt=t},this.hide=function(t,e){return B(t,"none",e),r},this.idstamp=N;var et=function(t){if(!v&&t){var e=r.getElement(t);e.offsetParent&&r.setContainer(e.offsetParent)}},nt=r.manage=function(t,e,n){return j[t]||(j[t]={el:e,endpoints:[],connections:[]},j[t].info=ot({elId:t,timestamp:I}),n||r.fire("manageElement",{id:t,info:j[t].info,el:e})),j[t]},ot=this.updateOffset=function(t){var e,n=t.timestamp,o=t.recalc,i=t.offset,s=t.elId;return _&&!n&&(n=I),!o&&n&&n===S[s]?{o:t.offset||w[s],s:A[s]}:(o||!i&&null==w[s]?null!=(e=j[s]?j[s].el:null)&&(A[s]=r.getSize(e),w[s]=r.getOffset(e),S[s]=n):(w[s]=i||w[s],null==A[s]&&null!=(e=j[s].el)&&(A[s]=r.getSize(e)),S[s]=n),w[s]&&!w[s].right&&(w[s].right=w[s].left+A[s][0],w[s].bottom=w[s].top+A[s][1],w[s].width=A[s][0],w[s].height=A[s][1],w[s].centerx=w[s].left+w[s].width/2,w[s].centery=w[s].top+w[s].height/2),{o:w[s],s:A[s]})};this.init=function(){x||(r.Defaults.Container&&r.setContainer(r.Defaults.Container),r.anchorManager=new t.jsPlumb.AnchorManager({jsPlumbInstance:r}),x=!0,r.fire("ready",r))}.bind(this),this.log=y,this.jsPlumbUIComponent=d,this.makeAnchor=function(){var n,o=function(e,n){if(t.jsPlumb.Anchors[e])return new t.jsPlumb.Anchors[e](n);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+e+"'"}};if(0===arguments.length)return null;var i=arguments[0],s=arguments[1],a=(arguments[2],null);if(i.compute&&i.getOrientation)return i;if("string"==typeof i)a=o(arguments[0],{elementId:s,jsPlumbInstance:r});else if(e.isArray(i))if(e.isArray(i[0])||e.isString(i[0]))2===i.length&&e.isObject(i[1])?e.isString(i[0])?(n=t.jsPlumb.extend({elementId:s,jsPlumbInstance:r},i[1]),a=o(i[0],n)):(n=t.jsPlumb.extend({elementId:s,jsPlumbInstance:r,anchors:i[0]},i[1]),a=new t.jsPlumb.DynamicAnchor(n)):a=new g.DynamicAnchor({anchors:i,selector:null,elementId:s,jsPlumbInstance:r});else{var l={x:i[0],y:i[1],orientation:i.length>=4?[i[2],i[3]]:[0,0],offsets:i.length>=6?[i[4],i[5]]:[0,0],elementId:s,jsPlumbInstance:r,cssClass:7===i.length?i[6]:null};(a=new t.jsPlumb.Anchor(l)).clone=function(){return new t.jsPlumb.Anchor(l)}}return a.id||(a.id="anchor_"+N()),a},this.makeAnchors=function(n,o,i){for(var s=[],a=0,l=n.length;a<l;a++)"string"==typeof n[a]?s.push(t.jsPlumb.Anchors[n[a]]({elementId:o,jsPlumbInstance:i})):e.isArray(n[a])&&s.push(r.makeAnchor(n[a],o,i));return s},this.makeDynamicAnchor=function(e,n){return new t.jsPlumb.DynamicAnchor({anchors:e,selector:n,elementId:null,jsPlumbInstance:r})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var it=function(n,o,i,s,a){var l=new d(o),u=o._jsPlumb.EndpointDropHandler({jsPlumb:r,enabled:function(){return n.def.enabled},isFull:function(){var t=r.select({target:n.id}).length;return n.def.maxConnections>0&&t>=n.def.maxConnections},element:n.el,elementId:n.id,isSource:s,isTarget:a,addClass:function(t){r.addClass(n.el,t)},removeClass:function(t){r.removeClass(n.el,t)},onDrop:function(t){t.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return l.isDropAllowed.apply(l,arguments)},isRedrop:function(t){return null!=t.suspendedElement&&null!=t.suspendedEndpoint&&t.suspendedEndpoint.element===n.el},getEndpoint:function(e){var i=n.def.endpoint;if(null==i||null==i._jsPlumb){var s=r.deriveEndpointAndAnchorSpec(e.getType().join(" "),!0),a=s.endpoints?t.jsPlumb.extend(o,{endpoint:n.def.def.endpoint||s.endpoints[1]}):o;s.anchors&&(a=t.jsPlumb.extend(a,{anchor:n.def.def.anchor||s.anchors[1]})),(i=r.addEndpoint(n.el,a))._mtNew=!0}if(o.uniqueEndpoint&&(n.def.endpoint=i),i.setDeleteOnEmpty(!0),e.isDetachable()&&i.initDraggable(),null!=i.anchor.positionFinder){var l=r.getUIPosition(arguments,r.getZoom()),u=r.getOffset(n.el),c=r.getSize(n.el),d=null==l?[0,0]:i.anchor.positionFinder(l,u,c,i.anchor.constructorParams);i.anchor.x=d[0],i.anchor.y=d[1]}return i},maybeCleanup:function(t){t._mtNew&&0===t.connections.length?r.deleteObject({endpoint:t}):delete t._mtNew}}),c=t.jsPlumb.dragEvents.drop;return i.scope=i.scope||o.scope||r.Defaults.Scope,i[c]=e.wrap(i[c],u,!0),a&&(i[t.jsPlumb.dragEvents.over]=function(){return!0}),!1===o.allowLoopback&&(i.canDrop=function(t){return t.getDragElement()._jsPlumbRelatedElement!==n.el}),r.initDroppable(n.el,i,"internal"),u};this.makeTarget=function(e,n,o){var i=t.jsPlumb.extend({_jsPlumb:this},o);t.jsPlumb.extend(i,n);for(var s=i.maxConnections||-1,a=function(e){var n=f(e),o=n.id,a=t.jsPlumb.extend({},i.dropOptions||{}),l=i.connectionType||"default";this.targetEndpointDefinitions[o]=this.targetEndpointDefinitions[o]||{},et(o),n.el._isJsPlumbGroup&&null==a.rank&&(a.rank=-1);var u={def:t.jsPlumb.extend({},i),uniqueEndpoint:i.uniqueEndpoint,maxConnections:s,enabled:!0};i.createEndpoint&&(u.uniqueEndpoint=!0,u.endpoint=r.addEndpoint(e,u.def),u.endpoint.setDeleteOnEmpty(!1)),n.def=u,this.targetEndpointDefinitions[o][l]=u,it(n,i,a,!0===i.isSource,!0),n.el._katavorioDrop[n.el._katavorioDrop.length-1].targetDef=u}.bind(this),l=e.length&&e.constructor!==String?e:[e],u=0,c=l.length;u<c;u++)a(l[u]);return this},this.unmakeTarget=function(t,e){var n=f(t);return r.destroyDroppable(n.el,"internal"),e||delete this.targetEndpointDefinitions[n.id],this},this.makeSource=function(n,o,i){var s=t.jsPlumb.extend({_jsPlumb:this},i);t.jsPlumb.extend(s,o);var a=s.connectionType||"default",l=r.deriveEndpointAndAnchorSpec(a);s.endpoint=s.endpoint||l.endpoints[0],s.anchor=s.anchor||l.anchors[0];for(var u=s.maxConnections||-1,c=s.onMaxConnections,d=function(o){var i=o.id,l=this.getElement(o.el);this.sourceEndpointDefinitions[i]=this.sourceEndpointDefinitions[i]||{},et(i);var d={def:t.jsPlumb.extend({},s),uniqueEndpoint:s.uniqueEndpoint,maxConnections:u,enabled:!0};s.createEndpoint&&(d.uniqueEndpoint=!0,d.endpoint=r.addEndpoint(n,d.def),d.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[i][a]=d,o.def=d;var p=t.jsPlumb.dragEvents.stop,f=t.jsPlumb.dragEvents.drag,g=t.jsPlumb.extend({},s.dragOptions||{}),m=g.drag,v=g.stop,b=null,y=!1;g.scope=g.scope||s.scope,g[f]=e.wrap(g[f],function(){m&&m.apply(this,arguments),y=!1}),g[p]=e.wrap(g[p],function(){if(v&&v.apply(this,arguments),this.currentlyDragging=!1,null!=b._jsPlumb){var t=s.anchor||this.Defaults.Anchor,e=b.anchor,n=b.connections[0],o=this.makeAnchor(t,i,this),a=b.element;if(null!=o.positionFinder){var l=r.getOffset(a),u=this.getSize(a),c={left:l.left+e.x*u[0],top:l.top+e.y*u[1]},d=o.positionFinder(c,l,u,o.constructorParams);o.x=d[0],o.y=d[1]}b.setAnchor(o,!0),b.repaint(),this.repaint(b.elementId),null!=n&&this.repaint(n.targetId)}}.bind(this));var x=function(n){if(3!==n.which&&2!==n.button){var d=this.sourceEndpointDefinitions[i][a];if(d.enabled){if(i=this.getId(this.getElement(o.el)),s.filter)if(!1===(e.isString(s.filter)?function(t,e,n,o,i){for(var r=t.target||t.srcElement,s=!1,a=o.getSelector(e,n),l=0;l<a.length;l++)if(a[l]===r){s=!0;break}return i?!s:s}(n,o.el,s.filter,this,s.filterExclude):s.filter(n,o.el)))return;var p=this.select({source:i}).length;if(d.maxConnections>=0&&p>=d.maxConnections)return c&&c({element:o.el,maxConnections:u},n),!1;var f=t.jsPlumb.getPositionOnElement(n,l,h),m={};t.jsPlumb.extend(m,s),m.isTemporarySource=!0,m.anchor=[f[0],f[1],0,0],m.dragOptions=g,d.def.scope&&(m.scope=d.def.scope),b=this.addEndpoint(i,m),y=!0,b.setDeleteOnEmpty(!0),d.uniqueEndpoint&&(d.endpoint?b.finalEndpoint=d.endpoint:(d.endpoint=b,b.setDeleteOnEmpty(!1)));var v=function t(){r.off(b.canvas,"mouseup",t),r.off(o.el,"mouseup",t),y&&(y=!1,r.deleteEndpoint(b))};r.on(b.canvas,"mouseup",v),r.on(o.el,"mouseup",v);var x={};if(d.def.extract)for(var C in d.def.extract){var P=(n.srcElement||n.target).getAttribute(C);P&&(x[d.def.extract[C]]=P)}r.trigger(b.canvas,"mousedown",n,x),e.consume(n)}}}.bind(this);this.on(o.el,"mousedown",x),d.trigger=x,s.filter&&(e.isString(s.filter)||e.isFunction(s.filter))&&r.setDragFilter(o.el,s.filter);var C=t.jsPlumb.extend({},s.dropOptions||{});it(o,s,C,!0,!0===s.isTarget)}.bind(this),p=n.length&&n.constructor!==String?n:[n],g=0,m=p.length;g<m;g++)d(f(p[g]));return this},this.unmakeSource=function(t,e,n){var o=f(t);r.destroyDroppable(o.el,"internal");var i=this.sourceEndpointDefinitions[o.id];if(i)for(var s in i)if(null==e||e===s){var a=i[s].trigger;a&&r.off(o.el,"mousedown",a),n||delete this.sourceEndpointDefinitions[o.id][s]}return this},this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions)r.unmakeSource(t,null,!0);return this.sourceEndpointDefinitions={},this};var rt=function(t,n,o){n=e.isArray(n)?n:[n];var i=W(t);o=o||"default";for(var r=0;r<n.length;r++){var s=this[n[r]][i];if(s&&s[o])return s[o].def.scope||this.Defaults.Scope}}.bind(this),st=function(t,n,o,i){o=e.isArray(o)?o:[o];var r=W(t);i=i||"default";for(var s=0;s<o.length;s++){var a=this[o[s]][r];a&&a[i]&&(a[i].def.scope=n)}}.bind(this);this.getScope=function(t,e){return rt(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(t){return rt(t,"sourceEndpointDefinitions")},this.getTargetScope=function(t){return rt(t,"targetEndpointDefinitions")},this.setScope=function(t,e,n){this.setSourceScope(t,e,n),this.setTargetScope(t,e,n)},this.setSourceScope=function(t,e,n){st(t,e,"sourceEndpointDefinitions",n),this.setDragScope(t,e)},this.setTargetScope=function(t,e,n){st(t,e,"targetEndpointDefinitions",n),this.setDropScope(t,e)},this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions)r.unmakeTarget(t,!0);return this.targetEndpointDefinitions={},this};var at=function(t,n,o,i,s){var a,l,u,c="source"===t?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(s=s||"default",n.length&&!e.isString(n)){a=[];for(var d=0,h=n.length;d<h;d++)c[(l=f(n[d])).id]&&c[l.id][s]&&(a[d]=c[l.id][s].enabled,u=i?!a[d]:o,c[l.id][s].enabled=u,r[u?"removeClass":"addClass"](l.el,"jtk-"+t+"-disabled"))}else{var p=(l=f(n)).id;c[p]&&c[p][s]&&(a=c[p][s].enabled,u=i?!a:o,c[p][s].enabled=u,r[u?"removeClass":"addClass"](l.el,"jtk-"+t+"-disabled"))}return a}.bind(this),lt=function(t,n){return e.isString(t)||!t.length?n.apply(this,[t]):t.length?n.apply(this,[t[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(t,e){return at("source",t,null,!0,e),this.isSourceEnabled(t,e)},this.setSourceEnabled=function(t,e,n){return at("source",t,e,null,n)},this.isSource=function(t,e){return e=e||"default",lt(t,function(t){var n=this.sourceEndpointDefinitions[f(t).id];return null!=n&&null!=n[e]}.bind(this))},this.isSourceEnabled=function(t,e){return e=e||"default",lt(t,function(t){var n=this.sourceEndpointDefinitions[f(t).id];return n&&n[e]&&!0===n[e].enabled}.bind(this))},this.toggleTargetEnabled=function(t,e){return at("target",t,null,!0,e),this.isTargetEnabled(t,e)},this.isTarget=function(t,e){return e=e||"default",lt(t,function(t){var n=this.targetEndpointDefinitions[f(t).id];return null!=n&&null!=n[e]}.bind(this))},this.isTargetEnabled=function(t,e){return e=e||"default",lt(t,function(t){var n=this.targetEndpointDefinitions[f(t).id];return n&&n[e]&&!0===n[e].enabled}.bind(this))},this.setTargetEnabled=function(t,e,n){return at("target",t,e,null,n)},this.ready=function(t){r.bind("ready",t)};var ut=function(t,e){if("object"===(void 0===t?"undefined":s()(t))&&t.length)for(var n=0,o=t.length;n<o;n++)e(t[n]);else e(t);return r};this.repaint=function(t,e,n){return ut(t,function(t){O(t,e,n)})},this.revalidate=function(t,e,n){return ut(t,function(t){var o=n?t:r.getId(t);r.updateOffset({elId:o,recalc:!0,timestamp:e});var i=r.getDragManager();i&&i.updateOffsets(o),r.repaint(t)})},this.repaintEverything=function(){var t,e=n();for(t in P)r.updateOffset({elId:t,recalc:!0,timestamp:e});for(t in P)O(t,null,e);return this},this.removeAllEndpoints=function(t,e,n){n=n||[];return function t(o){var i,s,a=f(o),l=P[a.id];if(l)for(n.push(a),i=0,s=l.length;i<s;i++)r.deleteEndpoint(l[i],!1);if(delete P[a.id],e&&a.el&&3!==a.el.nodeType&&8!==a.el.nodeType)for(i=0,s=a.el.childNodes.length;i<s;i++)t(a.el.childNodes[i])}(t),this};var ct=function(t,e){r.removeAllEndpoints(t.id,!0,e);for(var n=r.getDragManager(),o=function(t){n&&n.elementRemoved(t.id),r.anchorManager.clearFor(t.id),r.anchorManager.removeFloatingConnection(t.id),r.isSource(t.el)&&r.unmakeSource(t.el),r.isTarget(t.el)&&r.unmakeTarget(t.el),r.destroyDraggable(t.el),r.destroyDroppable(t.el),delete r.floatingConnections[t.id],delete j[t.id],delete w[t.id],t.el&&(r.removeElement(t.el),t.el._jsPlumb=null)},i=1;i<e.length;i++)o(e[i]);o(t)};this.remove=function(t,e){var n=f(t),o=[];return n.text?n.el.parentNode.removeChild(n.el):n.id&&r.batch(function(){ct(n,o)},!1===e),r},this.empty=function(t,e){var n=[];return r.batch(function(){!function t(e,o){var i=f(e);if(i.text)i.el.parentNode.removeChild(i.el);else if(i.el){for(;i.el.childNodes.length>0;)t(i.el.childNodes[0]);o||ct(i,n)}}(t,!0)},!1===e),r},this.reset=function(t){r.silently(function(){tt=!1,r.removeAllGroups(),r.removeGroupManager(),r.deleteEveryEndpoint(),t||r.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},C.length=0,this.doReset&&this.doReset()}.bind(this))};var dt=function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.cleanup(),t.destroy()};this.clear=function(){r.select().each(dt),r.selectEndpoints().each(dt),P={},E={}},this.setDefaultScope=function(t){return D=t,r},this.setDraggable=function(t,e){return g.each(t,function(t){r.isDragSupported(t)&&(k[r.getAttribute(t,"id")]=e,r.setElementDraggable(t,e))})},this.deriveEndpointAndAnchorSpec=function(t,e){for(var n=((e?"":"default ")+t).split(/[\s]/),o=null,i=null,s=null,a=null,l=0;l<n.length;l++){var u=r.getType(n[l],"connection");u&&(u.endpoints&&(o=u.endpoints),u.endpoint&&(i=u.endpoint),u.anchors&&(a=u.anchors),u.anchor&&(s=u.anchor))}return{endpoints:o||[i,i],anchors:a||[s,s]}},this.setId=function(t,n,o){var i;e.isString(t)?i=t:(t=this.getElement(t),i=this.getId(t));var r=this.getConnections({source:i,scope:"*"},!0),s=this.getConnections({target:i,scope:"*"},!0);n=""+n,o?t=this.getElement(n):(t=this.getElement(i),this.setAttribute(t,"id",n)),P[n]=P[i]||[];for(var a=0,l=P[n].length;a<l;a++)P[n][a].setElementId(n),P[n][a].setReferenceElement(t);delete P[i],this.sourceEndpointDefinitions[n]=this.sourceEndpointDefinitions[i],delete this.sourceEndpointDefinitions[i],this.targetEndpointDefinitions[n]=this.targetEndpointDefinitions[i],delete this.targetEndpointDefinitions[i],this.anchorManager.changeId(i,n);var u=this.getDragManager();u&&u.changeId(i,n),j[n]=j[i],delete j[i];var c=function(e,o,i){for(var r=0,s=e.length;r<s;r++)e[r].endpoints[o].setElementId(n),e[r].endpoints[o].setReferenceElement(t),e[r][i+"Id"]=n,e[r][i]=t};c(r,0,"source"),c(s,1,"target"),this.repaint(n)},this.setDebugLog=function(t){y=t},this.setSuspendDrawing=function(t,e){var n=_;return _=t,I=t?(new Date).getTime():null,e&&this.repaintEverything(),n},this.isSuspendDrawing=function(){return _},this.getSuspendedAt=function(){return I},this.batch=function(t,n){var o=this.isSuspendDrawing();o||this.setSuspendDrawing(!0);try{t()}catch(t){e.log("Function run while suspended failed",t)}o||this.setSuspendDrawing(!1,!n)},this.doWhileSuspended=this.batch,this.getCachedData=function(t){var e=w[t];return e?{o:e,s:A[t]}:ot({elId:t})},this.timestamp=n,this.show=function(t,e){return B(t,"block",e),r},this.toggleVisible=function(t,e){var n=null;e&&(n=function(t){var e=t.isVisible();t.setVisible(!e)}),V(t,function(t){var e=t.isVisible();t.setVisible(!e)},n)},this.toggleDraggable=function(t){var e;return g.each(t,function(t){var n=r.getAttribute(t,"id");return e=!(e=null!=k[n]&&k[n]),k[n]=e,r.setDraggable(t,e),e}.bind(this)),e},this.addListener=this.bind;var ht=[];this.registerFloatingConnection=function(t,n,o){ht[t.id]=n,e.addToList(P,t.id,o)},this.getFloatingConnectionFor=function(t){return ht[t]}};e.extend(t.jsPlumbInstance,e.EventGenerator,{setAttribute:function(t,e,n){this.setAttribute(t,e,n)},getAttribute:function(e,n){return this.getAttribute(t.jsPlumb.getElement(e),n)},convertToFullOverlaySpec:function(t){return e.isString(t)&&(t=[t,{}]),t[1].id=t[1].id||e.uuid(),t},registerConnectionType:function(e,n){if(this._connectionTypes[e]=t.jsPlumb.extend({},n),n.overlays){for(var o={},i=0;i<n.overlays.length;i++){var r=this.convertToFullOverlaySpec(n.overlays[i]);o[r[1].id]=r}this._connectionTypes[e].overlays=o}},registerConnectionTypes:function(t){for(var e in t)this.registerConnectionType(e,t[e])},registerEndpointType:function(e,n){if(this._endpointTypes[e]=t.jsPlumb.extend({},n),n.overlays){for(var o={},i=0;i<n.overlays.length;i++){var r=this.convertToFullOverlaySpec(n.overlays[i]);o[r[1].id]=r}this._endpointTypes[e].overlays=o}},registerEndpointTypes:function(t){for(var e in t)this.registerEndpointType(e,t[e])},getType:function(t,e){return"connection"===e?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,e){this.setId(t,e,!0)},setParent:function(t,e){var n=this.getElement(t),o=this.getId(n),i=this.getElement(e),r=this.getId(i),s=this.getDragManager();n.parentNode.removeChild(n),i.appendChild(n),s&&s.setParent(n,o,i,r)},extend:function(t,e,n){var o;if(n)for(o=0;o<n.length;o++)t[n[o]]=e[n[o]];else for(o in e)t[o]=e[o];return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:t.endpoints[1].isFloating()?1:-1}}),f.prototype.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"};var g=new f;t.jsPlumb=g,g.getInstance=function(t,e){var n=new f(t);if(e)for(var o in e)n[o]=e[o];return n.init(),n},g.each=function(t,e){if(null!=t)if("string"==typeof t)e(g.getElement(t));else if(null!=t.length)for(var n=0;n<t.length;n++)e(g.getElement(t[n]));else e(t)},"undefined"!=typeof exports&&(exports.jsPlumb=g)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbUtil,e=function(t,e){if(null==e)return[0,0];var n=s(e),o=r(n,0);return[o[t+"X"],o[t+"Y"]]},n=e.bind(this,"page"),o=e.bind(this,"screen"),i=e.bind(this,"client"),r=function(t,e){return t.item?t.item(e):t[e]},s=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},a=function(t,e,n){var o;e=null==(o=e)?null:o.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0!==t.className.baseVal?t.className.baseVal=e:t.className=e;try{for(var i=t.classList;i.length>0;)i.remove(i.item(0));for(var r=0;r<n.length;r++)n[r]&&i.add(n[r])}catch(t){console.log("JSPLUMB: cannot set class list",t)}},l=function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},u=function(e,n,o){n=null==n?[]:t.isArray(n)?n:n.split(/\s+/),o=null==o?[]:t.isArray(o)?o:o.split(/\s+/);var i=l(e).split(/\s+/),r=function(t,e){for(var n=0;n<e.length;n++)if(t)-1===i.indexOf(e[n])&&i.push(e[n]);else{var o=i.indexOf(e[n]);-1!==o&&i.splice(o,1)}};r(!0,n),r(!1,o),a(e,i.join(" "),i)};this.jsPlumb.extend(this.jsPlumbInstance.prototype,{headless:!1,pageLocation:n,screenLocation:o,clientLocation:i,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new function(t){var e={},n=[],o={},i={},r={};this.register=function(s){var a=t.getId(s),l=t.getOffset(s);e[a]||(e[a]=s,n.push(s),o[a]={}),function e(n){if(n)for(var s=0;s<n.childNodes.length;s++)if(3!==n.childNodes[s].nodeType&&8!==n.childNodes[s].nodeType){var u=jsPlumb.getElement(n.childNodes[s]),c=t.getId(n.childNodes[s],null,!0);if(c&&i[c]&&i[c]>0){var d=t.getOffset(u);o[a][c]={id:c,offset:{left:d.left-l.left,top:d.top-l.top}},r[c]=a}e(n.childNodes[s])}}(s)},this.updateOffsets=function(e,n){if(null!=e){n=n||{};var i=jsPlumb.getElement(e),s=t.getId(i),a=o[s],l=t.getOffset(i);if(a)for(var u in a)if(a.hasOwnProperty(u)){var c=jsPlumb.getElement(u),d=n[u]||t.getOffset(c);if(null==c.offsetParent&&null!=o[s][u])continue;o[s][u]={id:u,offset:{left:d.left-l.left,top:d.top-l.top}},r[u]=s}}},this.endpointAdded=function(n,s){s=s||t.getId(n);var a=document.body,l=n.parentNode;for(i[s]=i[s]?i[s]+1:1;null!=l&&l!==a;){var u=t.getId(l,null,!0);if(u&&e[u]){var c=t.getOffset(l);if(null==o[u][s]){var d=t.getOffset(n);o[u][s]={id:s,offset:{left:d.left-c.left,top:d.top-c.top}},r[s]=u}break}l=l.parentNode}},this.endpointDeleted=function(t){if(i[t.elementId]&&(i[t.elementId]--,i[t.elementId]<=0))for(var e in o)o.hasOwnProperty(e)&&o[e]&&(delete o[e][t.elementId],delete r[t.elementId])},this.changeId=function(t,e){o[e]=o[t],o[t]={},r[e]=r[t],r[t]=null},this.getElementsForDraggable=function(t){return o[t]},this.elementRemoved=function(t){var e=r[t];e&&(delete o[e][t],delete r[t])},this.reset=function(){e={},n=[],o={},i={}},this.dragEnded=function(e){if(null!=e.offsetParent){var n=t.getId(e),o=r[n];o&&this.updateOffsets(o)}},this.setParent=function(e,n,i,s,a){var l=r[n];o[s]||(o[s]={});var u=t.getOffset(i),c=a||t.getOffset(e);l&&o[l]&&delete o[l][n],o[s][n]={id:n,offset:{left:c.left-u.left,top:c.top-u.top}},r[n]=s},this.clearParent=function(t,e){var n=r[e];n&&(delete o[n][e],delete r[e])},this.revalidateParent=function(e,n,o){var i=r[n];if(i){var s={};s[n]=o,this.updateOffsets(i,s),t.revalidate(i)}},this.getDragAncestor=function(e){var n=jsPlumb.getElement(e),o=t.getId(n),i=r[o];return i?jsPlumb.getElement(i):null}}(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,e,n,o){return this.createElementNS(null,t,e,n,o)},createElementNS:function(t,e,n,o,i){var r,s=null==t?document.createElement(e):document.createElementNS(t,e);for(r in n=n||{})s.style[r]=n[r];for(r in o&&(s.className=o),i=i||{})s.setAttribute(r,""+i[r]);return s},getAttribute:function(t,e){return null!=t.getAttribute?t.getAttribute(e):null},setAttribute:function(t,e,n){null!=t.setAttribute&&t.setAttribute(e,n)},setAttributes:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:l,addClass:function(t,e){jsPlumb.each(t,function(t){u(t,e)})},hasClass:function(t,e){return(t=jsPlumb.getElement(t)).classList?t.classList.contains(e):-1!==l(t).indexOf(e)},removeClass:function(t,e){jsPlumb.each(t,function(t){u(t,null,e)})},updateClasses:function(t,e,n){jsPlumb.each(t,function(t){u(t,e,n)})},setClass:function(t,e){null!=e&&jsPlumb.each(t,function(t){a(t,e,e.split(/\s+/))})},setPosition:function(t,e){t.style.left=e.left+"px",t.style.top=e.top+"px"},getPosition:function(t){var e=function(e){var n=t.style[e];return n?n.substring(0,n.length-2):0};return{left:e("left"),top:e("top")}},getStyle:function(t,e){return void 0!==window.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},getSelector:function(t,e){return 1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(e)},getOffset:function(t,e,n){t=jsPlumb.getElement(t),n=n||this.getContainer();for(var o={left:t.offsetLeft,top:t.offsetTop},i=e||null!=n&&t!==n&&t.offsetParent!==n?t.offsetParent:null,r=function(t){null!=t&&t!==document.body&&(t.scrollTop>0||t.scrollLeft>0)&&(o.left-=t.scrollLeft,o.top-=t.scrollTop)}.bind(this);null!=i;)o.left+=i.offsetLeft,o.top+=i.offsetTop,r(i),i=e?i.offsetParent:i.offsetParent===n?null:i.offsetParent;if(null!=n&&!e&&(n.scrollTop>0||n.scrollLeft>0)){var s=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",a=this.getStyle(t,"position");"absolute"!==a&&"fixed"!==a&&"absolute"!==s&&"fixed"!==s&&(o.left-=n.scrollLeft,o.top-=n.scrollTop)}return o},getPositionOnElement:function(t,e,n){var o=void 0!==e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},i=document.body,r=document.documentElement,s=window.pageYOffset||r.scrollTop||i.scrollTop,a=window.pageXOffset||r.scrollLeft||i.scrollLeft,l=r.clientTop||i.clientTop||0,u=r.clientLeft||i.clientLeft||0,c=o.top+s-l+0*n,d=o.left+a-u+0*n,h=jsPlumb.pageLocation(t),p=o.width||e.offsetWidth*n,f=o.height||e.offsetHeight*n;return[(h[0]-d)/p,(h[1]-c)/f]},getAbsolutePosition:function(t){var e=function(e){var n=t.style[e];if(n)return parseFloat(n.substring(0,n.length-2))};return[e("left"),e("top")]},setAbsolutePosition:function(t,e,n,o){n?this.animate(t,{left:"+="+(e[0]-n[0]),top:"+="+(e[1]-n[1])},o):(t.style.left=e[0]+"px",t.style.top=e[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"}})}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil;e.OverlayCapableJsPlumbUIComponent=function(e){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},e.label&&(this.getDefaultType().overlays.__label=["Label",{label:e.label,location:e.labelLocation||this.defaultLabelLocation||.5,labelStyle:e.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:"__label"}]),this.setListenerComponent=function(t){if(this._jsPlumb)for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].setListenerComponent(t)}},e.OverlayCapableJsPlumbUIComponent.applyType=function(t,e){if(e.overlays){var n,o={};for(n in e.overlays){var i=t._jsPlumb.overlays[e.overlays[n][1].id];if(i)i.updateFrom(e.overlays[n][1]),o[e.overlays[n][1].id]=!0;else{var r=t.getCachedTypeItem("overlay",e.overlays[n][1].id);null!=r?(r.reattach(t._jsPlumb.instance,t),r.setVisible(!0),r.updateFrom(e.overlays[n][1]),t._jsPlumb.overlays[r.id]=r):r=t.addOverlay(e.overlays[n],!0),o[r.id]=!0}}for(n in t._jsPlumb.overlays)null==o[t._jsPlumb.overlays[n].id]&&t.removeOverlay(t._jsPlumb.overlays[n].id,!0)}},n.extend(e.OverlayCapableJsPlumbUIComponent,t.jsPlumbUIComponent,{setHover:function(t,e){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(t,o){var i=function(t,o){var i=null;if(n.isArray(o)){var r=o[0],s=e.extend({component:t,_jsPlumb:t._jsPlumb.instance},o[1]);3===o.length&&e.extend(s,o[2]),i=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][r])(s)}else i=o.constructor===String?new(e.Overlays[t._jsPlumb.instance.getRenderMode()][o])({component:t,_jsPlumb:t._jsPlumb.instance}):o;return i.id=i.id||n.uuid(),t.cacheTypeItem("overlay",i,i.id),t._jsPlumb.overlays[i.id]=i,i}(this,t);return o||this.repaint(),i},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var e=this.getOverlay(t);e&&e.hide()},hideOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].hide()},showOverlay:function(t){var e=this.getOverlay(t);e&&e.show()},showOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].show()},removeAllOverlays:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup&&this._jsPlumb.overlays[e].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,t||this.repaint()},removeOverlay:function(t,e){var n=this._jsPlumb.overlays[t];n&&(n.setVisible(!1),!e&&n.cleanup&&n.cleanup(),delete this._jsPlumb.overlays[t],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[t])},removeOverlays:function(){for(var t=0,e=arguments.length;t<e;t++)this.removeOverlay(arguments[t])},moveParent:function(t){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),t.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var e in this.canvas.parentNode.removeChild(this.canvas),t.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[e].getElement();n.parentNode.removeChild(n),t.appendChild(n)}},getLabel:function(){var t=this.getOverlay("__label");return null!=t?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay("__label")},setLabel:function(t){var n=this.getOverlay("__label");n?t.constructor===String||t.constructor===Function?n.setLabel(t):(t.label&&n.setLabel(t.label),t.location&&n.setLocation(t.location)):(n=function(t,n){var o={cssClass:n.cssClass,labelStyle:t.labelStyle,id:"__label",component:t,_jsPlumb:t._jsPlumb.instance},i=e.extend(o,n);return new(e.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(i)}(this,t.constructor===String||t.constructor===Function?{label:t}:t),this._jsPlumb.overlays.__label=n);this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup(t),this._jsPlumb.overlays[e].destroy(t);t&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,e){this._jsPlumb.overlayPositions[t.id]=e},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null},_clazzManip:function(t,e,n){if(!n)for(var o in this._jsPlumb.overlays)this._jsPlumb.overlays[o][t+"Class"](e)},addClass:function(t,e){this._clazzManip("add",t,e)},removeClass:function(t,e){this._clazzManip("remove",t,e)}})}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];t.Endpoint=function(o){var i=o._jsPlumb,r=o.newConnection,a=o.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],t.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:o.connectionType,maxConnections:null==o.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:o.maxConnections,paintStyle:o.endpointStyle||o.paintStyle||o.style||this._jsPlumb.instance.Defaults.EndpointStyle||t.Defaults.EndpointStyle,hoverPaintStyle:o.endpointHoverStyle||o.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||t.Defaults.EndpointHoverStyle,connectorStyle:o.connectorStyle,connectorHoverStyle:o.connectorHoverStyle,connectorClass:o.connectorClass,connectorHoverClass:o.connectorHoverClass,connectorOverlays:o.connectorOverlays,connector:o.connector,connectorTooltip:o.connectorTooltip}),this._jsPlumb.enabled=!(!1===o.enabled),this._jsPlumb.visible=!0,this.element=t.getElement(o.source),this._jsPlumb.uuid=o.uuid,this._jsPlumb.floatingEndpoint=null;this._jsPlumb.uuid&&(o.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=o.elementId,this.dragProxy=o.dragProxy,this._jsPlumb.connectionCost=o.connectionCost,this._jsPlumb.connectionsDirected=o.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var l=!0===o.deleteOnEmpty;this.setDeleteOnEmpty=function(t){l=t};var u=function(){var e=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var n=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(e),this.addClass(n),t.updateClasses(this.element,n,e)}.bind(this);this.prepareAnchor=function(t){var e=this._jsPlumb.instance.makeAnchor(t,this.elementId,i);return e.bind("anchorChanged",function(t){this.fire("anchorChanged",{endpoint:this,anchor:t}),u()}.bind(this)),e},this.setPreparedAnchor=function(t,e){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=t,u(),e||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(t,e){var n=this.prepareAnchor(t);return this.setPreparedAnchor(n,e),this};var c=function(t){if(this.connections.length>0)for(var e=0;e<this.connections.length;e++)this.connections[e].setHover(t,!1);else this.setHover(t)}.bind(this);this.bind("mouseover",function(){c(!0)}),this.bind("mouseout",function(){c(!1)}),o._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(n,r){var s,a=function(e,n){var o=i.getRenderMode();if(t.Endpoints[o][e])return new t.Endpoints[o][e](n);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+e+"'"}},l={_jsPlumb:this._jsPlumb.instance,cssClass:o.cssClass,container:o.container,tooltip:o.tooltip,connectorTooltip:o.connectorTooltip,endpoint:this};return e.isString(n)?s=a(n,l):e.isArray(n)?(l=e.merge(n[1],l),s=a(n[0],l)):s=n.clone(),s.clone=function(){return e.isString(n)?a(n,l):e.isArray(n)?(l=e.merge(n[1],l),a(n[0],l)):void 0}.bind(this),s.typeId=r,s},this.setEndpoint=function(t,e){var n=this.prepareEndpoint(t);this.setPreparedEndpoint(n,!0)},this.setPreparedEndpoint=function(t,e){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=t,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},t.extend(this,o,n),this.isSource=o.isSource||!1,this.isTemporarySource=o.isTemporarySource||!1,this.isTarget=o.isTarget||!1,this.connections=o.connections||[],this.connectorPointerEvents=o["connector-pointer-events"],this.scope=o.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=o.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,!1!==o.connectionsDetachable&&!1!==o.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==o.dragAllowedWhenFull,o.onMaxConnections&&this.bind("maxConnections",o.onMaxConnections),this.addConnection=function(t){this.connections.push(t),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(t,e,n){(e=null==e?this.connections.indexOf(t):e)>=0&&(this.connections.splice(e,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!n&&l&&0===this.connections.length&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==n})},this.deleteEveryConnection=function(t){for(var e=this.connections.length,n=0;n<e;n++)i.deleteConnection(this.connections[0],t)},this.detachFrom=function(t,e,n){for(var o=[],r=0;r<this.connections.length;r++)this.connections[r].endpoints[1]!==t&&this.connections[r].endpoints[0]!==t||o.push(this.connections[r]);for(var s=0,a=o.length;s<a;s++)i.deleteConnection(o[0]);return this},this.getElement=function(){return this.element},this.setElement=function(n){var r=this._jsPlumb.instance.getId(n),s=this.elementId;return e.removeWithFunction(o.endpointsByElement[this.elementId],function(t){return t.id===this.id}.bind(this)),this.element=t.getElement(n),this.elementId=i.getId(this.element),i.anchorManager.rehomeEndpoint(this,s,this.element),i.dragManager.endpointAdded(this.element),e.addToList(o.endpointsByElement,r,this),this},this.makeInPlaceCopy=function(){var t=this.anchor.getCurrentLocation({element:this}),e=this.anchor.getOrientation(this),n=this.anchor.getCssClass(),i={bind:function(){},compute:function(){return[t[0],t[1]]},getCurrentLocation:function(){return[t[0],t[1]]},getOrientation:function(){return e},getCssClass:function(){return n}};return a({dropOptions:o.dropOptions,anchor:i,source:this.element,paintStyle:this.getPaintStyle(),endpoint:o.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(t){var e=(t=t||{}).timestamp,n=!(!1===t.recalc);if(!e||this.timestamp!==e){var o=i.updateOffset({elId:this.elementId,timestamp:e}),r=t.offset?t.offset.o:o.o;if(null!=r){var s=t.anchorPoint,a=t.connectorPaintStyle;if(null==s){var l=t.dimensions||o.s,u={xy:[r.left,r.top],wh:l,element:this,timestamp:e};if(n&&this.anchor.isDynamic&&this.connections.length>0){var c=function(t,e){var n=0;if(null!=e)for(var o=0;o<t.connections.length;o++)if(t.connections[o].sourceId===e||t.connections[o].targetId===e){n=o;break}return t.connections[n]}(this,t.elementWithPrecedence),d=c.endpoints[0]===this?1:0,h=0===d?c.sourceId:c.targetId,p=i.getCachedData(h),f=p.o,g=p.s;u.index=0===d?1:0,u.connection=c,u.txy=[f.left,f.top],u.twh=g,u.tElement=c.endpoints[d]}else this.connections.length>0&&(u.connection=this.connections[0]);s=this.anchor.compute(u)}for(var m in this.endpoint.compute(s,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,a||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=e,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var v=this._jsPlumb.overlays[m];v.isVisible()&&(this._jsPlumb.overlayPlacements[m]=v.draw(this.endpoint,this._jsPlumb.paintStyleInUse),v.paint(this._jsPlumb.overlayPlacements[m]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var d=!1;this.initDraggable=function(){if(!d&&t.isDragSupported(this.element)){var n,l={id:null,element:null},u=null,c=!1,h=null,p=function(t,e,n){var o=!1;return{drag:function(){if(o)return o=!1,!0;if(e.element){var i=n.getUIPosition(arguments,n.getZoom());null!=i&&n.setPosition(e.element,i),n.repaint(e.element,i),t.paint({anchorPoint:t.anchor.getCurrentLocation({element:t})})}},stopDrag:function(){o=!0}}}(this,l,i),f=o.dragOptions||{},g=t.dragEvents.start,m=t.dragEvents.stop,v=t.dragEvents.drag,b=t.dragEvents.beforeStart,y=function(e){u=this.connectorSelector();var d=!0;this.isEnabled()||(d=!1),null!=u||this.isSource||this.isTemporarySource||(d=!1),!this.isSource||!this.isFull()||null!=u&&this.dragAllowedWhenFull||(d=!1),null==u||u.isDetachable(this)||(d=!1);var f=i.checkCondition(null==u?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:u});if(!1===f?d=!1:"object"===(void 0===f?"undefined":s()(f))?t.extend(f,n||{}):f=n||{},!1===d)return i.stopDrag&&i.stopDrag(this.canvas),p.stopDrag(),!1;for(var g=0;g<this.connections.length;g++)this.connections[g].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),u&&!this.isFull()&&this.isSource&&(u=null),i.updateOffset({elId:this.elementId});var m=this._jsPlumb.instance.getOffset(this.canvas),v=this.canvas,b=this._jsPlumb.instance.getSize(this.canvas);!function(t,e,n,o){var i=e.createElement("div",{position:"absolute"});e.appendElement(i);var r=e.getId(i);e.setPosition(i,n),i.style.width=o[0]+"px",i.style.height=o[1]+"px",e.manage(r,i,!0),t.id=r,t.element=i}(l,i,m,b),i.setAttributes(this.canvas,{dragId:l.id,elId:this.elementId});var y=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var x=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);x.endpoints[1]&&(y=x.endpoints[1])}var C=this._jsPlumb.instance.makeAnchor("Center");C.isFloating=!0,this._jsPlumb.floatingEndpoint=function(e,n,o,i,r,s,a,l){return a({paintStyle:e,endpoint:o,anchor:new t.FloatingAnchor({reference:n,referenceCanvas:i,jsPlumbInstance:s}),source:r,scope:l})}(this.getPaintStyle(),C,y,this.canvas,l.element,i,a,this.scope);var P=this._jsPlumb.floatingEndpoint.anchor;if(null==u)this.setHover(!1,!1),(u=r({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:l.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:o.connectorStyle,hoverPaintStyle:o.connectorHoverStyle,connector:o.connector,overlays:o.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:o.scope,data:f})).pending=!0,u.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=P,i.fire("connectionDrag",u),i.anchorManager.newConnection(u);else{c=!0,u.setHover(!1);var E=u.endpoints[0].id===this.id?0:1;this.detachFromConnection(u,null,!0);var j=i.getDragScope(v);i.setAttribute(this.canvas,"originalScope",j),i.fire("connectionDrag",u),0===E?(h=[u.source,u.sourceId,v,j],i.anchorManager.sourceChanged(u.endpoints[E].elementId,l.id,u,l.element)):(h=[u.target,u.targetId,v,j],u.target=l.element,u.targetId=l.id,i.anchorManager.updateOtherEndpoint(u.sourceId,u.endpoints[E].elementId,u.targetId,u)),u.suspendedEndpoint=u.endpoints[E],u.suspendedElement=u.endpoints[E].getElement(),u.suspendedElementId=u.endpoints[E].elementId,u.suspendedElementType=0===E?"source":"target",u.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=u.suspendedEndpoint,u.endpoints[E]=this._jsPlumb.floatingEndpoint,u.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(l,u,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),x=function(){if(i.setConnectionBeingDragged(!1),u&&null!=u.endpoints){var t=i.getDropEvent(arguments),e=i.getFloatingAnchorIndex(u);if(u.endpoints[0===e?1:0].anchor.locked=!1,u.removeClass(i.draggingClass),this._jsPlumb&&(u.deleteConnectionNow||u.endpoints[e]===this._jsPlumb.floatingEndpoint)&&c&&u.suspendedEndpoint){0===e?(u.floatingElement=u.source,u.floatingId=u.sourceId,u.floatingEndpoint=u.endpoints[0],u.floatingIndex=0,u.source=h[0],u.sourceId=h[1]):(u.floatingElement=u.target,u.floatingId=u.targetId,u.floatingEndpoint=u.endpoints[1],u.floatingIndex=1,u.target=h[0],u.targetId=h[1]);var n=this._jsPlumb.floatingEndpoint;i.setDragScope(h[2],h[3]),u.endpoints[e]=u.suspendedEndpoint,u.isReattach()||u._forceReattach||u._forceDetach||!i.deleteConnection(u,{originalEvent:t})?(u.setHover(!1),u._forceDetach=null,u._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(u),u.suspendedEndpoint.addConnection(u),1===e?i.anchorManager.updateOtherEndpoint(u.sourceId,u.floatingId,u.targetId,u):i.anchorManager.sourceChanged(u.floatingId,u.sourceId,u,u.source),i.repaint(h[1])):i.deleteObject({endpoint:n})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",u,t),u.pending&&i.fire("connectionAborted",u,t),i.currentlyDragging=!1,u.suspendedElement=null,u.suspendedEndpoint=null,u=null}l&&l.element&&i.remove(l.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);(f=t.extend({},f)).scope=this.scope||f.scope,f[b]=e.wrap(f[b],function(t){n=t.e.payload||{}},!1),f[g]=e.wrap(f[g],y,!1),f[v]=e.wrap(f[v],p.drag),f[m]=e.wrap(f[m],x),f.multipleDrop=!1,f.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),i.initDraggable(this.canvas,f,"internal"),this.canvas._jsPlumbRelatedElement=this.element,d=!0}};var h=o.endpoint||this._jsPlumb.instance.Defaults.Endpoint||t.Defaults.Endpoint;this.setEndpoint(h,!0);var p=o.anchor?o.anchor:o.anchors?o.anchors:i.Defaults.Anchor||"Top";this.setAnchor(p,!0);var f=["default",o.type||""].join(" ");this.addType(f,o.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var g=function(n,r,s,a){if(t.isDropSupported(this.element)){var l=o.dropOptions||i.Defaults.DropOptions||t.Defaults.DropOptions;(l=t.extend({},l)).scope=l.scope||this.scope;var u=t.dragEvents.drop,c=t.dragEvents.over,d=t.dragEvents.out,h=this,p=i.EndpointDropHandler({getEndpoint:function(){return h},jsPlumb:i,enabled:function(){return null==s||s.isEnabled()},isFull:function(){return s.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){h.addClass(t)},removeClass:function(t){h.removeClass(t)},isDropAllowed:function(){return h.isDropAllowed.apply(h,arguments)},reference:a,isRedrop:function(t,e){return t.suspendedEndpoint&&e.reference&&t.suspendedEndpoint.id===e.reference.id}});l[u]=e.wrap(l[u],p,!0),l[c]=e.wrap(l[c],function(){var e=t.getDragObject(arguments),n=i.getAttribute(t.getElement(e),"dragId"),o=i.getFloatingConnectionFor(n);if(null!=o){var r=i.getFloatingAnchorIndex(o);if(this.isTarget&&0!==r||o.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===o.suspendedEndpoint.id){var s=i.checkCondition("checkDropAllowed",{sourceEndpoint:o.endpoints[r],targetEndpoint:this,connection:o});this[(s?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(s?"remove":"add")+"Class"](i.endpointDropForbiddenClass),o.endpoints[r].anchor.over(this.anchor,this)}}}.bind(this)),l[d]=e.wrap(l[d],function(){var e=t.getDragObject(arguments),n=null==e?null:i.getAttribute(t.getElement(e),"dragId"),o=n?i.getFloatingConnectionFor(n):null;if(null!=o){var r=i.getFloatingAnchorIndex(o);(this.isTarget&&0!==r||o.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===o.suspendedEndpoint.id)&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),o.endpoints[r].anchor.out())}}.bind(this)),i.initDroppable(n,l,"internal",r)}}.bind(this);return this.anchor.isFloating||g(this.canvas,!(o._transient||this.anchor.isFloating),this,o.reference),this},e.extend(t.Endpoint,t.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,e,n){if(this._jsPlumb.visible=t,this.canvas&&(this.canvas.style.display=t?"block":"none"),this[t?"showOverlays":"hideOverlays"](),!e)for(var o=0;o<this.connections.length;o++)if(this.connections[o].setVisible(t),!n){var i=this===this.connections[o].endpoints[0]?1:0;1===this.connections[o].endpoints[i].connections.length&&this.connections[o].endpoints[i].setVisible(t,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(e,o){this.setPaintStyle(e.endpointStyle||e.paintStyle,o),this.setHoverPaintStyle(e.endpointHoverStyle||e.hoverPaintStyle,o),null!=e.maxConnections&&(this._jsPlumb.maxConnections=e.maxConnections),e.scope&&(this.scope=e.scope),t.extend(this,e,n),null!=e.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,e.cssClass),t.OverlayCapableJsPlumbUIComponent.applyType(this,e)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){var e=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");t.removeClass(this.element,e),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(t)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(t){var e=!1;if(t)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]===t||this.connections[n].endpoints[0]===t){e=!0;break}return e},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t,this.anchor.elementId=t},setReferenceElement:function(e){this.element=t.getElement(e)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}}),this.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(n){var o=t.jsPlumb;t.removeClass(o.endpointDropAllowedClass),t.removeClass(o.endpointDropForbiddenClass);var i=o.getDropEvent(arguments),r=o.getDragObject(arguments),s=o.getAttribute(r,"dragId"),a=(o.getAttribute(r,"elId"),o.getAttribute(r,"originalScope")),l=o.getFloatingConnectionFor(s);if(null!=l){var u=null!=l.suspendedEndpoint;if(!u||null!=l.suspendedEndpoint._jsPlumb){var c=t.getEndpoint(l);if(null!=c){if(t.isRedrop(l,t))return l._forceReattach=!0,l.setHover(!1),void(t.maybeCleanup&&t.maybeCleanup(c));var d=o.getFloatingAnchorIndex(l);if(0===d&&!t.isSource||1===d&&!t.isTarget)t.maybeCleanup&&t.maybeCleanup(c);else{t.onDrop&&t.onDrop(l),a&&o.setDragScope(r,a);var h=t.isFull(n);if(h&&c.fire("maxConnections",{endpoint:this,connection:l,maxConnections:c._jsPlumb.maxConnections},i),!h&&t.enabled()){var p=!0;0===d?(l.floatingElement=l.source,l.floatingId=l.sourceId,l.floatingEndpoint=l.endpoints[0],l.floatingIndex=0,l.source=t.element,l.sourceId=t.elementId):(l.floatingElement=l.target,l.floatingId=l.targetId,l.floatingEndpoint=l.endpoints[1],l.floatingIndex=1,l.target=t.element,l.targetId=t.elementId),u&&l.suspendedEndpoint.id!==c.id&&(l.isDetachAllowed(l)&&l.endpoints[d].isDetachAllowed(l)&&l.suspendedEndpoint.isDetachAllowed(l)&&o.checkCondition("beforeDetach",l)||(p=!1));var f=function(n){l.endpoints[d].detachFromConnection(l),l.suspendedEndpoint&&l.suspendedEndpoint.detachFromConnection(l),l.endpoints[d]=c,c.addConnection(l);var r=c.getParameters();for(var s in r)l.setParameter(s,r[s]);if(u){var a=l.suspendedEndpoint.elementId;o.fireMoveEvent({index:d,originalSourceId:0===d?a:l.sourceId,newSourceId:0===d?c.elementId:l.sourceId,originalTargetId:1===d?a:l.targetId,newTargetId:1===d?c.elementId:l.targetId,originalSourceEndpoint:0===d?l.suspendedEndpoint:l.endpoints[0],newSourceEndpoint:0===d?c:l.endpoints[0],originalTargetEndpoint:1===d?l.suspendedEndpoint:l.endpoints[1],newTargetEndpoint:1===d?c:l.endpoints[1],connection:l},i)}else r.draggable&&o.initDraggable(this.element,t.dragOptions,"internal",o);(1===d?o.anchorManager.updateOtherEndpoint(l.sourceId,l.floatingId,l.targetId,l):o.anchorManager.sourceChanged(l.floatingId,l.sourceId,l,l.source),l.endpoints[0].finalEndpoint)&&(l.endpoints[0].detachFromConnection(l),l.endpoints[0]=l.endpoints[0].finalEndpoint,l.endpoints[0].addConnection(l));e.isObject(n)&&l.mergeData(n),o.finaliseConnection(l,null,i,!1),l.setHover(!1)}.bind(this);if(p=p&&t.isDropAllowed(l.sourceId,l.targetId,l.scope,l,c))return f(p),!0;l.suspendedEndpoint&&(l.endpoints[d]=l.suspendedEndpoint,l.setHover(!1),l._forceDetach=!0,0===d?(l.source=l.suspendedEndpoint.element,l.sourceId=l.suspendedEndpoint.elementId):(l.target=l.suspendedEndpoint.element,l.targetId=l.suspendedEndpoint.elementId),l.suspendedEndpoint.addConnection(l),1===d?o.anchorManager.updateOtherEndpoint(l.sourceId,l.floatingId,l.targetId,l):o.anchorManager.sourceChanged(l.floatingId,l.sourceId,l,l.source),o.repaint(l.sourceId),l._forceDetach=!1)}t.maybeCleanup&&t.maybeCleanup(c),o.currentlyDragging=!1}}}}}}}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,o=function(t,n,o,i,r){if(!t.Defaults.DoNotThrowErrors&&null==e.Connectors[n][o])throw{msg:"jsPlumb: unknown connector type '"+o+"'"};return new e.Connectors[n][o](i,r)},i=function(t,e,n){return t?n.makeAnchor(t,e,n):null},r=function(t,e,o,i){null!=e&&(e._jsPlumbConnections=e._jsPlumbConnections||{},i?delete e._jsPlumbConnections[t.id]:e._jsPlumbConnections[t.id]=!0,n.isEmpty(e._jsPlumbConnections)?o.removeClass(e,o.connectedClass):o.addClass(e,o.connectedClass))};e.Connection=function(t){var o=t.newEndpoint;this.id=t.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=t.previousConnection,this.source=e.getElement(t.source),this.target=e.getElement(t.target),e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),t.sourceEndpoint?(this.source=t.sourceEndpoint.getElement(),this.sourceId=t.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),t.targetEndpoint?(this.target=t.targetEndpoint.getElement(),this.targetId=t.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=t.scope,this.endpoints=[],this.endpointStyles=[];var i=this._jsPlumb.instance;i.manage(this.sourceId,this.source),i.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(e,n,r,s){return r=r||this._jsPlumb.instance.getId(n),this.prepareEndpoint(i,o,this,s,e?0:1,t,n,r)},t.type&&(t.endpoints=t.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(t.type).endpoints);var r=this.makeEndpoint(!0,this.source,this.sourceId,t.sourceEndpoint),s=this.makeEndpoint(!1,this.target,this.targetId,t.targetEndpoint);r&&n.addToList(t.endpointsByElement,this.sourceId,r),s&&n.addToList(t.endpointsByElement,this.targetId,s),this.scope||(this.scope=this.endpoints[0].scope),null!=t.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(t.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(t.deleteEndpointsOnEmpty));var a=i.Defaults.ConnectionsDetachable;!1===t.detachable&&(a=!1),!1===this.endpoints[0].connectionsDetachable&&(a=!1),!1===this.endpoints[1].connectionsDetachable&&(a=!1);var l=t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||i.Defaults.ReattachConnections;this.appendToDefaultType({detachable:a,reattach:l,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||i.Defaults.PaintStyle||e.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||i.Defaults.HoverPaintStyle||e.Defaults.HoverPaintStyle});var u=i.getSuspendedAt();if(!i.isSuspendDrawing()){var c=i.getCachedData(this.sourceId),d=c.o,h=c.s,p=i.getCachedData(this.targetId),f=p.o,g=p.s,m=u||i.timestamp(),v=this.endpoints[0].anchor.compute({xy:[d.left,d.top],wh:h,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[f.left,f.top],twh:g,tElement:this.endpoints[1],timestamp:m});this.endpoints[0].paint({anchorLoc:v,timestamp:m}),v=this.endpoints[1].anchor.compute({xy:[f.left,f.top],wh:g,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[d.left,d.top],twh:h,tElement:this.endpoints[0],timestamp:m}),this.endpoints[1].paint({anchorLoc:v,timestamp:m})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return!0===this._jsPlumb.detachable},this.setDetachable=function(t){this._jsPlumb.detachable=!0===t},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(t){this._jsPlumb.reattach=!0===t},this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=t.directed,null==t.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var b=e.extend({},this.endpoints[1].getParameters());e.extend(b,this.endpoints[0].getParameters()),e.extend(b,this.getParameters()),this.setParameters(b),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||i.Defaults.Connector||e.Defaults.Connector,!0);var y=null!=t.data&&n.isObject(t.data)?t.data:{};this.getData=function(){return y},this.setData=function(t){y=t||{}},this.mergeData=function(t){y=e.extend(y,t)};var x=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,t.type].join(" ");/[^\s]/.test(x)&&this.addType(x,t.data,!0),this.updateConnectedClass()},n.extend(e.Connection,e.OverlayCapableJsPlumbUIComponent,{applyType:function(t,n,o){var i=null;null!=t.connector&&(null==(i=this.getCachedTypeItem("connector",o.connector))&&(i=this.prepareConnector(t.connector,o.connector),this.cacheTypeItem("connector",i,o.connector)),this.setPreparedConnector(i)),null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var r=null;t.anchor?null==(r=this.getCachedTypeItem("anchors",o.anchor))&&(r=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",r,o.anchor)):t.anchors&&null==(r=this.getCachedTypeItem("anchors",o.anchors))&&(r=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",r,o.anchors)),null!=r&&(this.endpoints[0].anchor=r[0],this.endpoints[1].anchor=r[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,e){e&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.connector.addClass(t)},removeClass:function(t,e){e&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.connector.removeClass(t)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t,this.connector&&this.connector.setVisible(t),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(t){this._jsPlumb&&(r(this,this.source,this._jsPlumb.instance,t),r(this,this.target,this._jsPlumb.instance,t))},setHover:function(e){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(e),t.jsPlumb[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),t.jsPlumb[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(t,e){var i,r={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass||"",container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},s=this._jsPlumb.instance.getRenderMode();return n.isString(t)?i=o(this._jsPlumb.instance,s,t,r,this):n.isArray(t)&&(i=1===t.length?o(this._jsPlumb.instance,s,t[0],r,this):o(this._jsPlumb.instance,s,t[0],n.merge(t[1],r),this)),null!=e&&(i.typeId=e),i},setPreparedConnector:function(t,e,n,o){if(this.connector!==t){var i,r="";if(null!=this.connector&&(r=(i=this.connector).getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=t,o&&this.cacheTypeItem("connector",t,o),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.addClass(r),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=i)for(var s=this.getOverlays(),a=0;a<s.length;a++)s[a].transfer&&s[a].transfer(this.connector);n||this.setListenerComponent(this.connector),e||this.repaint()}},setConnector:function(t,e,n,o){var i=this.prepareConnector(t,o);this.setPreparedConnector(i,e,n,o)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var e=(t=t||{}).timestamp,n=this.targetId,o=this.sourceId;if(null==e||e!==this._jsPlumb.lastPaintedAt){var i=this._jsPlumb.instance.updateOffset({elId:o}).o,r=this._jsPlumb.instance.updateOffset({elId:n}).o,s=this.endpoints[0],a=this.endpoints[1],l=s.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:s,timestamp:e}),u=a.anchor.getCurrentLocation({xy:[r.left,r.top],wh:[r.width,r.height],element:a,timestamp:e});this.connector.resetBounds(),this.connector.compute({sourcePos:l,targetPos:u,sourceEndpoint:this.endpoints[0],targetEndpoint:this.endpoints[1],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:i,targetInfo:r});var c={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var d in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(d)){var h=this._jsPlumb.overlays[d];h.isVisible()&&(this._jsPlumb.overlayPlacements[d]=h.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(h)),c.minX=Math.min(c.minX,this._jsPlumb.overlayPlacements[d].minX),c.maxX=Math.max(c.maxX,this._jsPlumb.overlayPlacements[d].maxX),c.minY=Math.min(c.minY,this._jsPlumb.overlayPlacements[d].minY),c.maxY=Math.max(c.maxY,this._jsPlumb.overlayPlacements[d].maxY))}var p=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,f=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),g={xmin:Math.min(this.connector.bounds.minX-(p+f),c.minX),ymin:Math.min(this.connector.bounds.minY-(p+f),c.minY),xmax:Math.max(this.connector.bounds.maxX+(p+f),c.maxX),ymax:Math.max(this.connector.bounds.maxY+(p+f),c.maxY)};for(var m in this.connector.paint(this._jsPlumb.paintStyleInUse,null,g),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var v=this._jsPlumb.overlays[m];v.isVisible()&&v.paint(this._jsPlumb.overlayPlacements[m],g)}}this._jsPlumb.lastPaintedAt=e}},repaint:function(t){t=t||{},this.paint({elId:this.sourceId,recalc:!(!1===t.recalc),timestamp:t.timestamp})},prepareEndpoint:function(t,n,o,r,s,a,l,u){var c;if(r)o.endpoints[s]=r,r.addConnection(o);else{a.endpoints||(a.endpoints=[null,null]);var d=a.endpoints[s]||a.endpoint||t.Defaults.Endpoints[s]||e.Defaults.Endpoints[s]||t.Defaults.Endpoint||e.Defaults.Endpoint;a.endpointStyles||(a.endpointStyles=[null,null]),a.endpointHoverStyles||(a.endpointHoverStyles=[null,null]);var h=a.endpointStyles[s]||a.endpointStyle||t.Defaults.EndpointStyles[s]||e.Defaults.EndpointStyles[s]||t.Defaults.EndpointStyle||e.Defaults.EndpointStyle;null==h.fill&&null!=a.paintStyle&&(h.fill=a.paintStyle.stroke),null==h.outlineStroke&&null!=a.paintStyle&&(h.outlineStroke=a.paintStyle.outlineStroke),null==h.outlineWidth&&null!=a.paintStyle&&(h.outlineWidth=a.paintStyle.outlineWidth);var p=a.endpointHoverStyles[s]||a.endpointHoverStyle||t.Defaults.EndpointHoverStyles[s]||e.Defaults.EndpointHoverStyles[s]||t.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle;null!=a.hoverPaintStyle&&(null==p&&(p={}),null==p.fill&&(p.fill=a.hoverPaintStyle.stroke));var f=a.anchors?a.anchors[s]:a.anchor?a.anchor:i(t.Defaults.Anchors[s],u,t)||i(e.Defaults.Anchors[s],u,t)||i(t.Defaults.Anchor,u,t)||i(e.Defaults.Anchor,u,t);c=n({paintStyle:h,hoverPaintStyle:p,endpoint:d,connections:[o],uuid:a.uuids?a.uuids[s]:null,anchor:f,source:l,scope:a.scope,reattach:a.reattach||t.Defaults.ReattachConnections,detachable:a.detachable||t.Defaults.ConnectionsDetachable}),null==r&&c.setDeleteOnEmpty(!0),o.endpoints[s]=c,!1===a.drawEndpoints&&c.setVisible(!1,!0,!0)}return c}})}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbUtil,e=this.jsPlumb;e.AnchorManager=function(n){var o={},i={},r={},s={},a="identity",l=["left","top","right","bottom"],u={},c=this,d={},h=n.jsPlumbInstance,p={},f=function(t,e,n,o,i,r){if(t===e)return{orientation:a,a:["top","top"]};var s=Math.atan2(o.centery-n.centery,o.centerx-n.centerx),u=Math.atan2(n.centery-o.centery,n.centerx-o.centerx),c=[],d={};!function(t,e){for(var n=0;n<t.length;n++)d[t[n]]={left:[e[n].left,e[n].centery],right:[e[n].right,e[n].centery],top:[e[n].centerx,e[n].top],bottom:[e[n].centerx,e[n].bottom]}}(["source","target"],[n,o]);for(var h=0;h<l.length;h++)for(var p=0;p<l.length;p++)c.push({source:l[h],target:l[p],dist:Biltong.lineLength(d.source[l[h]],d.target[l[p]])});c.sort(function(t,e){return t.dist<e.dist?-1:t.dist>e.dist?1:0});for(var f=c[0].source,g=c[0].target,m=0;m<c.length&&(f=!i.isContinuous||i.isEdgeSupported(c[m].source)?c[m].source:null,g=!r.isContinuous||r.isEdgeSupported(c[m].target)?c[m].target:null,null==f||null==g);m++);return i.isContinuous&&i.setCurrentFace(f),r.isContinuous&&r.setCurrentFace(g),{a:[f,g],theta:s,theta2:u}},g=function(t){return function(e,n){return!1===(t?e[0][0]<n[0][0]:e[0][0]>n[0][0])?-1:1}},m={top:function(t,e){return t[0]>e[0]?1:-1},right:g(!0),bottom:g(!0),left:function(t,e){return(t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0])>(e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0])?1:-1}},v=function(t,e){var n=h.getCachedData(t),o=n.s,r=n.o,a=function(e,n,o,r,a,l,u){if(r.length>0)for(var c=function(t,e,n,o,i,r,s){for(var a=[],l=e[i?0:1]/(o.length+1),u=0;u<o.length;u++){var c=(u+1)*l,d=r*e[i?1:0];s&&(c=e[i?0:1]-c);var h=i?c:d,p=n[0]+h,f=h/e[0],g=i?d:c,m=n[1]+g,v=g/e[1];a.push([p,m,f,v,o[u][1],o[u][2]])}return a}(0,n,o,(v=m[e],r.sort(v)),a,l,"right"===e||"top"===e),d=function(t,e){i[t.id]=[e[0],e[1],e[2],e[3]],s[t.id]=u},h=0;h<c.length;h++){var p=c[h][4],f=p.endpoints[0].elementId===t,g=p.endpoints[1].elementId===t;f&&d(p.endpoints[0],c[h]),g&&d(p.endpoints[1],c[h])}var v};a("bottom",o,[r.left,r.top],e.bottom,!0,1,[0,1]),a("top",o,[r.left,r.top],e.top,!0,0,[0,-1]),a("left",o,[r.left,r.top],e.left,!1,0,[-1,0]),a("right",o,[r.left,r.top],e.right,!1,1,[1,0])};this.reset=function(){o={},u={},d={}},this.addFloatingConnection=function(t,e){p[t]=e},this.removeFloatingConnection=function(t){delete p[t]},this.newConnection=function(n){var o=n.sourceId,i=n.targetId,r=n.endpoints,s=!0,a=function(a,l,c,d,h){o===i&&c.isContinuous&&(n._jsPlumb.instance.removeElement(r[1].canvas),s=!1),t.addToList(u,d,[h,l,c.constructor===e.DynamicAnchor])};a(0,r[0],r[0].anchor,i,n),s&&a(0,r[1],r[1].anchor,o,n)};var b=function(e){!function(e,n){if(e){var o=function(t){return t[4]===n};t.removeWithFunction(e.top,o),t.removeWithFunction(e.left,o),t.removeWithFunction(e.bottom,o),t.removeWithFunction(e.right,o)}}(d[e.elementId],e.id)};this.connectionDetached=function(e,n){var o=e.connection||e,i=e.sourceId,r=e.targetId,s=o.endpoints,a=function(e,n,o,i,r){t.removeWithFunction(u[i],function(t){return t[0].id===r.id})};a(0,s[1],s[1].anchor,i,o),a(0,s[0],s[0].anchor,r,o),o.floatingId&&(a(o.floatingIndex,o.floatingEndpoint,o.floatingEndpoint.anchor,o.floatingId,o),b(o.floatingEndpoint)),b(o.endpoints[0]),b(o.endpoints[1]),n||(c.redraw(o.sourceId),o.targetId!==o.sourceId&&c.redraw(o.targetId))},this.add=function(e,n){t.addToList(o,n,e)},this.changeId=function(t,e){u[e]=u[t],o[e]=o[t],delete u[t],delete o[t]},this.getConnectionsFor=function(t){return u[t]||[]},this.getEndpointsFor=function(t){return o[t]||[]},this.deleteEndpoint=function(e){t.removeWithFunction(o[e.elementId],function(t){return t.id===e.id}),b(e)},this.clearFor=function(t){delete o[t],o[t]=[]};var y=function(e,o,i,r,s,a,l,u,c,d,h,p){var f,g,m=-1,v=r.endpoints[l],b=v.id,y=[1,0][l],x=[[o,i],r,s,a,b],C=e[c],P=v._continuousAnchorEdge?e[v._continuousAnchorEdge]:null;if(P){var E=t.findWithFunction(P,function(t){return t[4]===b});if(-1!==E)for(P.splice(E,1),f=0;f<P.length;f++)g=P[f][1],t.addWithFunction(h,g,function(t){return t.id===g.id}),t.addWithFunction(p,P[f][1].endpoints[l],function(t){return t.id===g.endpoints[l].id}),t.addWithFunction(p,P[f][1].endpoints[y],function(t){return t.id===g.endpoints[y].id})}for(f=0;f<C.length;f++)g=C[f][1],1===n.idx&&C[f][3]===a&&-1===m&&(m=f),t.addWithFunction(h,g,function(t){return t.id===g.id}),t.addWithFunction(p,C[f][1].endpoints[l],function(t){return t.id===g.endpoints[l].id}),t.addWithFunction(p,C[f][1].endpoints[y],function(t){return t.id===g.endpoints[y].id});var j=u?-1!==m?m:0:C.length;C.splice(j,0,x),v._continuousAnchorEdge=c};this.updateOtherEndpoint=function(n,o,i,r){var s=t.findWithFunction(u[n],function(t){return t[0].id===r.id}),a=t.findWithFunction(u[o],function(t){return t[0].id===r.id});-1!==s&&(u[n][s][0]=r,u[n][s][1]=r.endpoints[1],u[n][s][2]=r.endpoints[1].anchor.constructor===e.DynamicAnchor),a>-1&&(u[o].splice(a,1),t.addToList(u,i,[r,r.endpoints[0],r.endpoints[0].anchor.constructor===e.DynamicAnchor])),r.updateConnectedClass()},this.sourceChanged=function(n,o,i,r){if(n!==o){i.sourceId=o,i.source=r,t.removeWithFunction(u[n],function(t){return t[0].id===i.id});var s=t.findWithFunction(u[i.targetId],function(t){return t[0].id===i.id});s>-1&&(u[i.targetId][s][0]=i,u[i.targetId][s][1]=i.endpoints[0],u[i.targetId][s][2]=i.endpoints[0].anchor.constructor===e.DynamicAnchor),t.addToList(u,o,[i,i.endpoints[1],i.endpoints[1].anchor.constructor===e.DynamicAnchor]),i.endpoints[1].anchor.isContinuous&&(i.source===i.target?i._jsPlumb.instance.removeElement(i.endpoints[1].canvas):null==i.endpoints[1].canvas.parentNode&&i._jsPlumb.instance.appendElement(i.endpoints[1].canvas)),i.updateConnectedClass()}},this.rehomeEndpoint=function(t,e,n){var i=o[e]||[],r=h.getId(n);if(r!==e){var s=i.indexOf(t);if(s>-1){var a=i.splice(s,1)[0];c.add(a,r)}}for(var l=0;l<t.connections.length;l++)t.connections[l].sourceId===e?c.sourceChanged(e,t.elementId,t.connections[l],t.element):t.connections[l].targetId===e&&(t.connections[l].targetId=t.elementId,t.connections[l].target=t.element,c.updateOtherEndpoint(t.connections[l].sourceId,e,t.elementId,t.connections[l]))},this.redraw=function(n,i,r,s,a,l){if(!h.isSuspendDrawing()){var c=o[n]||[],g=u[n]||[],m=[],b=[],x=[];r=r||h.timestamp(),s=s||{left:0,top:0},i&&(i={left:i.left+s.left,top:i.top+s.top});for(var C=h.updateOffset({elId:n,offset:i,recalc:!1,timestamp:r}),P={},E=0;E<g.length;E++){var j=g[E][0],w=j.sourceId,S=j.targetId,k=j.endpoints[0].anchor.isContinuous,T=j.endpoints[1].anchor.isContinuous;if(k||T){var A=w+"_"+S,_=P[A],I=j.sourceId===n?1:0;k&&!d[w]&&(d[w]={top:[],right:[],bottom:[],left:[]}),T&&!d[S]&&(d[S]={top:[],right:[],bottom:[],left:[]}),n!==S&&h.updateOffset({elId:S,timestamp:r}),n!==w&&h.updateOffset({elId:w,timestamp:r});var D=h.getCachedData(S),M=h.getCachedData(w);S===w&&(k||T)?(y(d[w],-Math.PI/2,0,j,!1,S,0,!1,"top",0,m,b),y(d[S],-Math.PI/2,0,j,!1,w,1,!1,"top",0,m,b)):(_||(_=f(w,S,M.o,D.o,j.endpoints[0].anchor,j.endpoints[1].anchor),P[A]=_),k&&y(d[w],_.theta,0,j,!1,S,0,!1,_.a[0],0,m,b),T&&y(d[S],_.theta2,-1,j,!0,w,1,!0,_.a[1],0,m,b)),k&&t.addWithFunction(x,w,function(t){return t===w}),T&&t.addWithFunction(x,S,function(t){return t===S}),t.addWithFunction(m,j,function(t){return t.id===j.id}),(k&&0===I||T&&1===I)&&t.addWithFunction(b,j.endpoints[I],function(t){return t.id===j.endpoints[I].id})}}for(E=0;E<c.length;E++)0===c[E].connections.length&&c[E].anchor.isContinuous&&(d[n]||(d[n]={top:[],right:[],bottom:[],left:[]}),y(d[n],-Math.PI/2,0,{endpoints:[c[E],c[E]],paint:function(){}},!1,n,0,!1,c[E].anchor.getDefaultFace(),0,m,b),t.addWithFunction(x,n,function(t){return t===n}));for(E=0;E<x.length;E++)v(x[E],d[x[E]]);for(E=0;E<c.length;E++)c[E].paint({timestamp:r,offset:C,dimensions:C.s,recalc:!0!==l});for(E=0;E<b.length;E++){var N=h.getCachedData(b[E].elementId);b[E].paint({timestamp:r,offset:N,dimensions:N.s})}for(E=0;E<g.length;E++){var L=g[E][1];if(L.anchor.constructor===e.DynamicAnchor){L.paint({elementWithPrecedence:n,timestamp:r}),t.addWithFunction(m,g[E][0],function(t){return t.id===g[E][0].id});for(var O=0;O<L.connections.length;O++)L.connections[O]!==g[E][0]&&t.addWithFunction(m,L.connections[O],function(t){return t.id===L.connections[O].id})}else t.addWithFunction(m,g[E][0],function(t){return t.id===g[E][0].id})}var F=p[n];for(F&&F.paint({timestamp:r,recalc:!1,elId:n}),E=0;E<m.length;E++)m[E].paint({elId:n,timestamp:r,recalc:!1,clearEdits:a})}};h.continuousAnchorFactory={get:function(e){return new function(e){t.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var n=e.faces||["top","right","bottom","left"],o=!(!1===e.clockwise),a={},l={top:"bottom",right:"left",left:"right",bottom:"top"},u={top:"right",right:"bottom",left:"top",bottom:"left"},c={top:"left",right:"top",left:"bottom",bottom:"right"},d=o?u:c,h=o?c:u,p=e.cssClass||"",f=null,g=null,m=["left","right"],v=["top","bottom"],b=null,y=0;y<n.length;y++)a[n[y]]=!0;this.getDefaultFace=function(){return 0===n.length?"top":n[0]},this.verifyEdge=function(t){return a[t]?t:a[l[t]]?l[t]:a[d[t]]?d[t]:a[h[t]]?h[t]:t},this.isEdgeSupported=function(t){return null==b?null==g?!0===a[t]:g===t:-1!==b.indexOf(t)},this.setCurrentFace=function(t){f=t},this.getCurrentFace=function(){return f},this.lockCurrentFace=function(){g=f},this.unlockCurrentFace=function(){g=null},this.lockCurrentAxis=function(){null!=f&&(b="left"===f||"right"===f?m:v)},this.unlockCurrentAxis=function(){b=null},this.compute=function(t){return r[t.element.id]||i[t.element.id]||[0,0]},this.getCurrentLocation=function(t){return r[t.element.id]||i[t.element.id]||[0,0]},this.getOrientation=function(t){return s[t.id]||[0,0]},this.clearUserDefinedLocation=function(){delete r[e.elementId]},this.setUserDefinedLocation=function(t){r[e.elementId]=t},this.getCssClass=function(){return p}}(e)},clear:function(t){delete r[t],delete i[t]}}},e.Anchor=function(e){this.x=e.x||0,this.y=e.y||0,this.elementId=e.elementId,this.cssClass=e.cssClass||"",this.userDefinedLocation=null,this.orientation=e.orientation||[0,0],this.lastReturnValue=null,this.offsets=e.offsets||[0,0],this.timestamp=null,t.EventGenerator.apply(this),this.compute=function(t){var e=t.xy,n=t.wh,o=t.timestamp;return t.clearUserDefinedLocation&&(this.userDefinedLocation=null),o&&o===this.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[e[0]+this.x*n[0]+this.offsets[0],e[1]+this.y*n[1]+this.offsets[1]],this.timestamp=o,this.lastReturnValue)},this.getCurrentLocation=function(t){return t=t||{},null==this.lastReturnValue||null!=t.timestamp&&this.timestamp!==t.timestamp?this.compute(t):this.lastReturnValue}},t.extend(e.Anchor,t.EventGenerator,{equals:function(t){if(!t)return!1;var e=t.getOrientation(),n=this.getOrientation();return this.x===t.x&&this.y===t.y&&this.offsets[0]===t.offsets[0]&&this.offsets[1]===t.offsets[1]&&n[0]===e[0]&&n[1]===e[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(t){this.userDefinedLocation=t},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),e.FloatingAnchor=function(t){e.Anchor.apply(this,arguments);var n=t.reference,o=t.referenceCanvas,i=e.getSize(o),r=null,s=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(t){var e=t.xy,n=[e[0]+i[0]/2,e[1]+i[1]/2];return s=n,n},this.getOrientation=function(t){if(r)return r;var e=n.getOrientation(t);return[0*Math.abs(e[0])*-1,0*Math.abs(e[1])*-1]},this.over=function(t,e){r=t.getOrientation(e)},this.out=function(){r=null},this.getCurrentLocation=function(t){return null==s?this.compute(t):s}},t.extend(e.FloatingAnchor,e.Anchor);e.DynamicAnchor=function(t){e.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=t.elementId,this.jsPlumbInstance=t.jsPlumbInstance;for(var n=0;n<t.anchors.length;n++)this.anchors[n]=(o=t.anchors[n],i=this.jsPlumbInstance,r=this.elementId,o.constructor===e.Anchor?o:i.makeAnchor(o,r,i));var o,i,r;this.getAnchors=function(){return this.anchors},this.locked=!1;var s=this.anchors.length>0?this.anchors[0]:null,a=s,l=this,u=function(t,e,n,o,i){var r=o[0]+t.x*i[0],s=o[1]+t.y*i[1],a=o[0]+i[0]/2,l=o[1]+i[1]/2;return Math.sqrt(Math.pow(e-r,2)+Math.pow(n-s,2))+Math.sqrt(Math.pow(a-r,2)+Math.pow(l-s,2))},c=t.selector||function(t,e,n,o,i){for(var r=n[0]+o[0]/2,s=n[1]+o[1]/2,a=-1,l=1/0,c=0;c<i.length;c++){var d=u(i[c],r,s,t,e);d<l&&(a=c+0,l=d)}return i[a]};this.compute=function(t){var e=t.xy,n=t.wh,o=t.txy,i=t.twh;this.timestamp=t.timestamp;var r=l.getUserDefinedLocation();return null!=r?r:this.locked||null==o||null==i?s.compute(t):(t.timestamp=null,s=c(e,n,o,i,this.anchors),this.x=s.x,this.y=s.y,s!==a&&this.fire("anchorChanged",s),a=s,s.compute(t))},this.getCurrentLocation=function(t){return this.getUserDefinedLocation()||(null!=s?s.getCurrentLocation(t):null)},this.getOrientation=function(t){return null!=s?s.getOrientation(t):[0,0]},this.over=function(t,e){null!=s&&s.over(t,e)},this.out=function(){null!=s&&s.out()},this.getCssClass=function(){return s&&s.getCssClass()||""}},t.extend(e.DynamicAnchor,e.Anchor);var n=function(t,n,o,i,r,s){e.Anchors[r]=function(e){var a=e.jsPlumbInstance.makeAnchor([t,n,o,i,0,0],e.elementId,e.jsPlumbInstance);return a.type=r,s&&s(a,e),a}};n(.5,0,0,-1,"TopCenter"),n(.5,1,0,1,"BottomCenter"),n(0,.5,-1,0,"LeftMiddle"),n(1,.5,1,0,"RightMiddle"),n(.5,0,0,-1,"Top"),n(.5,1,0,1,"Bottom"),n(0,.5,-1,0,"Left"),n(1,.5,1,0,"Right"),n(.5,.5,0,0,"Center"),n(1,0,0,-1,"TopRight"),n(1,1,0,1,"BottomRight"),n(0,0,0,-1,"TopLeft"),n(0,1,0,1,"BottomLeft"),e.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)},e.Anchors.AutoDefault=function(t){var n=t.jsPlumbInstance.makeDynamicAnchor(e.Defaults.DynamicAnchors(t));return n.type="AutoDefault",n};var o=function(t,n){e.Anchors[t]=function(e){var o=e.jsPlumbInstance.makeAnchor(["Continuous",{faces:n}],e.elementId,e.jsPlumbInstance);return o.type=t,o}};e.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)},o("ContinuousLeft",["left"]),o("ContinuousTop",["top"]),o("ContinuousBottom",["bottom"]),o("ContinuousRight",["right"]),n(0,0,0,0,"Assign",function(t,e){var n=e.position||"Fixed";t.positionFinder=n.constructor===String?e.jsPlumbInstance.AnchorPositionFinders[n]:n,t.constructorParams=e}),this.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,e,n){return[(t.left-e.left)/n[0],(t.top-e.top)/n[1]]},Grid:function(t,e,n,o){var i=t.left-e.left,r=t.top-e.top,s=n[0]/o.grid[0],a=n[1]/o.grid[1],l=Math.floor(i/s),u=Math.floor(r/a);return[(l*s+s/2)/n[0],(u*a+a/2)/n[1]]}},e.Anchors.Perimeter=function(t){var e=(t=t||{}).anchorCount||60,n=t.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");var o=function(){for(var t=2*Math.PI/e,n=0,o=[],i=0;i<e;i++){var r=.5+.5*Math.sin(n),s=.5+.5*Math.cos(n);o.push([r,s,0,0]),n+=t}return o},i=function(t){for(var n=e/t.length,o=[],i=function(t,i,r,s,a){for(var l=(r-t)/(n=e*a),u=(s-i)/n,c=0;c<n;c++)o.push([t+l*c,i+u*c,0,0])},r=0;r<t.length;r++)i.apply(null,t[r]);return o},r=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n][0],t[n][1],t[n][2],t[n][3],1/t.length]);return i(e)},s=function(){return r([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},a={Circle:o,Ellipse:o,Diamond:function(){return r([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:s,Square:s,Triangle:function(){return r([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){for(var e=t.points,n=[],o=0,r=0;r<e.length-1;r++){var s=Math.sqrt(Math.pow(e[r][2]-e[r][0])+Math.pow(e[r][3]-e[r][1]));o+=s,n.push([e[r][0],e[r][1],e[r+1][0],e[r+1][1],s])}for(var a=0;a<n.length;a++)n[a][4]=n[a][4]/o;return i(n)}};if(!a[n])throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var l=a[n](t);t.rotation&&(l=function(t,e){for(var n=[],o=e/180*Math.PI,i=0;i<t.length;i++){var r=t[i][0]-.5,s=t[i][1]-.5;n.push([r*Math.cos(o)-s*Math.sin(o)+.5,r*Math.sin(o)+s*Math.cos(o)+.5,t[i][2],t[i][3]])}return n}(l,t.rotation));var u=t.jsPlumbInstance.makeDynamicAnchor(l);return u.type="Perimeter",u}}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,o=t.Biltong;e.Segments={AbstractSegment:function(t){this.params=t,this.findClosestPointOnPath=function(t,e){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}}},Straight:function(t){var n,i,r,s,a,l,u;e.Segments.AbstractSegment.apply(this,arguments);this.type="Straight",this.getLength=function(){return n},this.getGradient=function(){return i},this.getCoordinates=function(){return{x1:s,y1:l,x2:a,y2:u}},this.setCoordinates=function(t){s=t.x1,l=t.y1,a=t.x2,u=t.y2,n=Math.sqrt(Math.pow(a-s,2)+Math.pow(u-l,2)),i=o.gradient({x:s,y:l},{x:a,y:u}),r=-1/i},this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),this.getBounds=function(){return{minX:Math.min(s,a),minY:Math.min(l,u),maxX:Math.max(s,a),maxY:Math.max(l,u)}},this.pointOnPath=function(t,e){if(0!==t||e){if(1!==t||e){var i=e?t>0?t:n+t:t*n;return o.pointOnLine({x:s,y:l},{x:a,y:u},i)}return{x:a,y:u}}return{x:s,y:l}},this.gradientAtPoint=function(t){return i},this.pointAlongPathFrom=function(t,e,n){var i=this.pointOnPath(t,n),r=e<=0?{x:s,y:l}:{x:a,y:u};return e<=0&&Math.abs(e)>1&&(e*=-1),o.pointOnLine(i,r,e)};var c=function(t,e,n){return n>=Math.min(t,e)&&n<=Math.max(t,e)},d=function(t,e,n){return Math.abs(n-t)<Math.abs(n-e)?t:e};this.findClosestPointOnPath=function(t,e){var h={d:1/0,x:null,y:null,l:null,x1:s,x2:a,y1:l,y2:u};if(0===i)h.y=l,h.x=c(s,a,t)?t:d(s,a,t);else if(i===1/0||i===-1/0)h.x=s,h.y=c(l,u,e)?e:d(l,u,e);else{var p=l-i*s,f=(e-r*t-p)/(i-r),g=i*f+p;h.x=c(s,a,f)?f:d(s,a,f),h.y=c(l,u,g)?g:d(l,u,g)}var m=o.lineLength([h.x,h.y],[s,l]);return h.d=o.lineLength([t,e],[h.x,h.y]),h.l=m/n,h}},Arc:function(t){e.Segments.AbstractSegment.apply(this,arguments);var n=function(e,n){return o.theta([t.cx,t.cy],[e,n])},i=2*Math.PI;this.radius=t.r,this.anticlockwise=t.ac,this.type="Arc",t.startAngle&&t.endAngle?(this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.x1=t.cx+this.radius*Math.cos(t.startAngle),this.y1=t.cy+this.radius*Math.sin(t.startAngle),this.x2=t.cx+this.radius*Math.cos(t.endAngle),this.y2=t.cy+this.radius*Math.sin(t.endAngle)):(this.startAngle=n(t.x1,t.y1),this.endAngle=n(t.x2,t.y2),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2),this.endAngle<0&&(this.endAngle+=i),this.startAngle<0&&(this.startAngle+=i);var r=this.endAngle<this.startAngle?this.endAngle+i:this.endAngle;this.sweep=Math.abs(r-this.startAngle),this.anticlockwise&&(this.sweep=i-this.sweep);var s=2*Math.PI*this.radius,a=this.sweep/i,l=s*a;this.getLength=function(){return l},this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var u=function(t){var e=Math.floor(t),n=Math.ceil(t);return t-e<1e-10?e:n-t<1e-10?n:t};this.pointOnPath=function(e,n){if(0===e)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===e)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e/=l);var o=function(t,e){if(t.anticlockwise){var n=t.startAngle<t.endAngle?t.startAngle+i:t.startAngle;return n-Math.abs(n-t.endAngle)*e}var o=t.endAngle<t.startAngle?t.endAngle+i:t.endAngle,r=Math.abs(o-t.startAngle);return t.startAngle+r*e}(this,e),r=t.cx+t.r*Math.cos(o),s=t.cy+t.r*Math.sin(o);return{x:u(r),y:u(s),theta:o}},this.gradientAtPoint=function(e,n){var i=this.pointOnPath(e,n),r=o.normal([t.cx,t.cy],[i.x,i.y]);return this.anticlockwise||r!==1/0&&r!==-1/0||(r*=-1),r},this.pointAlongPathFrom=function(e,n,o){var i=this.pointOnPath(e,o),r=n/s*2*Math.PI,a=this.anticlockwise?-1:1,l=i.theta+a*r;return{x:t.cx+this.radius*Math.cos(l),y:t.cy+this.radius*Math.sin(l)}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];e.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier";var o=function(e,n,o){return o&&(n=t.jsBezier.locationAlongCurveFrom(e,n>0?0:1,n)),n};this.pointOnPath=function(e,n){return e=o(this.curve,e,n),t.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,n){return e=o(this.curve,e,n),t.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,n,i){return e=o(this.curve,e,i),t.jsBezier.pointAlongCurveFrom(this.curve,e,n)},this.getLength=function(){return t.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}},e.SegmentRenderer={getPath:function(t){return{Straight:function(){var e=t.getCoordinates();return"M "+e.x1+" "+e.y1+" L "+e.x2+" "+e.y2},Bezier:function(){var e=t.params;return"M "+e.x1+" "+e.y1+" C "+e.cp1x+" "+e.cp1y+" "+e.cp2x+" "+e.cp2y+" "+e.x2+" "+e.y2},Arc:function(){var e=t.params,n=t.sweep>Math.PI?1:0,o=t.anticlockwise?0:1;return"M"+t.x1+" "+t.y1+" A "+t.radius+" "+e.r+" 0 "+n+","+o+" "+t.x2+" "+t.y2}}[t.type]()}};var i=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};e.Connectors.AbstractConnector=function(t){i.apply(this,arguments);var r=[],s=0,a=[],l=[],u=t.stub||0,c=n.isArray(u)?u[0]:u,d=n.isArray(u)?u[1]:u,h=t.gap||0,p=n.isArray(h)?h[0]:h,f=n.isArray(h)?h[1]:h,g=null,m=null;this.getPathData=function(){for(var t="",n=0;n<r.length;n++)t+=e.SegmentRenderer.getPath(r[n]),t+=" ";return t},this.findSegmentForPoint=function(t,e){for(var n={d:1/0,s:null,x:null,y:null,l:null},o=0;o<r.length;o++){var i=r[o].findClosestPointOnPath(t,e);i.d<n.d&&(n.d=i.d,n.l=i.l,n.x=i.x,n.y=i.y,n.s=r[o],n.x1=i.x1,n.x2=i.x2,n.y1=i.y1,n.y2=i.y2,n.index=o)}return n};var v=function(t,e){e&&(t=t>0?t/s:(s+t)/s);for(var n=a.length-1,o=1,i=0;i<a.length;i++)if(a[i][1]>=t){n=i,o=1===t?1:0===t?0:(t-a[i][0])/l[i];break}return{segment:r[n],proportion:o,index:n}};this.setSegments=function(t){g=[],s=0;for(var e=0;e<t.length;e++)g.push(t[e]),s+=t[e].getLength()},this.getLength=function(){return s};var b=function(t){this.strokeWidth=t.strokeWidth;var e=o.quadrant(t.sourcePos,t.targetPos),n=t.targetPos[0]<t.sourcePos[0],i=t.targetPos[1]<t.sourcePos[1],r=t.strokeWidth||1,s=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),a=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),l=n?t.targetPos[0]:t.sourcePos[0],u=i?t.targetPos[1]:t.sourcePos[1],h=Math.abs(t.targetPos[0]-t.sourcePos[0]),g=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(0===s[0]&&0===s[1]||0===a[0]&&0===a[1]){var m=h>g?0:1,v=[1,0][m];a=[],(s=[])[m]=t.sourcePos[m]>t.targetPos[m]?-1:1,a[m]=t.sourcePos[m]>t.targetPos[m]?1:-1,s[v]=0,a[v]=0}var b=n?h+p*s[0]:p*s[0],y=i?g+p*s[1]:p*s[1],x=n?f*a[0]:h+f*a[0],C=i?f*a[1]:g+f*a[1],P=s[0]*a[0]+s[1]*a[1],E={sx:b,sy:y,tx:x,ty:C,lw:r,xSpan:Math.abs(x-b),ySpan:Math.abs(C-y),mx:(b+x)/2,my:(y+C)/2,so:s,to:a,x:l,y:u,w:h,h:g,segment:e,startStubX:b+s[0]*c,startStubY:y+s[1]*c,endStubX:x+a[0]*d,endStubY:C+a[1]*d,isXGreaterThanStubTimes2:Math.abs(b-x)>c+d,isYGreaterThanStubTimes2:Math.abs(y-C)>c+d,opposite:-1===P,perpendicular:0===P,orthogonal:1===P,sourceAxis:0===s[0]?"y":"x",points:[l,u,h,g,b,y,x,C],stubs:[c,d]};return E.anchorOrientation=E.opposite?"opposite":E.orthogonal?"orthogonal":"perpendicular",E};this.getSegments=function(){return r},this.updateBounds=function(t){var e=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,e.minX),this.bounds.maxX=Math.max(this.bounds.maxX,e.maxX),this.bounds.minY=Math.min(this.bounds.minY,e.minY),this.bounds.maxY=Math.max(this.bounds.maxY,e.maxY)};return this.pointOnPath=function(t,e){var n=v(t,e);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||[0,0]},this.gradientAtPoint=function(t,e){var n=v(t,e);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0},this.pointAlongPathFrom=function(t,e,n){var o=v(t,n);return o.segment&&o.segment.pointAlongPathFrom(o.proportion,e,!1)||[0,0]},this.compute=function(t){m=b.call(this,t),s=r.length=a.length=l.length=0,this._compute(m,t),this.x=m.points[0],this.y=m.points[1],this.w=m.points[2],this.h=m.points[3],this.segment=m.segment,function(){for(var t=0,e=0;e<r.length;e++){var n=r[e].getLength();l[e]=n/s,a[e]=[t,t+=n/s]}}()},{addSegment:function(t,n,o){if(o.x1!==o.x2||o.y1!==o.y2){var i=new e.Segments[n](o);r.push(i),s+=i.getLength(),t.updateBounds(i)}},prepareCompute:b,sourceStub:c,targetStub:d,maxStub:Math.max(c,d),sourceGap:p,targetGap:f,maxGap:Math.max(p,f)}},n.extend(e.Connectors.AbstractConnector,i),e.Endpoints.AbstractEndpoint=function(t){return i.apply(this,arguments),{compute:this.compute=function(t,e,n,o){var i=this._compute.apply(this,arguments);return this.x=i[0],this.y=i[1],this.w=i[2],this.h=i[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,i},cssClass:t.cssClass}},n.extend(e.Endpoints.AbstractEndpoint,i),e.Endpoints.Dot=function(t){this.type="Dot";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.radius=t.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(t,e,n,o){this.radius=n.radius||this.radius;var i=t[0]-this.radius,r=t[1]-this.radius,s=2*this.radius,a=2*this.radius;if(n.stroke){var l=n.strokeWidth||1;i-=l,r-=l,s+=2*l,a+=2*l}return[i,r,s,a,this.radius]}},n.extend(e.Endpoints.Dot,e.Endpoints.AbstractEndpoint),e.Endpoints.Rectangle=function(t){this.type="Rectangle";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.width=t.width||20,this.height=t.height||20,this._compute=function(t,e,n,o){var i=n.width||this.width,r=n.height||this.height;return[t[0]-i/2,t[1]-r/2,i,r]}},n.extend(e.Endpoints.Rectangle,e.Endpoints.AbstractEndpoint);var r=function(t){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};n.extend(r,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}}),e.Endpoints.Image=function(o){this.type="Image",r.apply(this,arguments),e.Endpoints.AbstractEndpoint.apply(this,arguments);var i=o.onload,s=o.src||o.url,a=o.cssClass?" "+o.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=o.width,this._jsPlumb.heightToUse=o.height,this._jsPlumb.endpoint=o.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,i&&i(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(t,e){var n=t.constructor===String?t:t.src;i=e,this._jsPlumb.img.src=n,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(s,i),this._compute=function(t,e,n,o){return this.anchorPoint=t,this._jsPlumb.ready?[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=e.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(t,e,o){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var i=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,r=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,i,r,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(e,n){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(e,n):t.setTimeout(function(){this.paint(e,n)}.bind(this),200))}},n.extend(e.Endpoints.Image,[r,e.Endpoints.AbstractEndpoint],{cleanup:function(t){t&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),e.Endpoints.Blank=function(t){e.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",r.apply(this,arguments),this._compute=function(t,e,n,o){return[t[0],t[1],10,0]};var o=t.cssClass?" "+t.cssClass:"";this.canvas=e.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+o),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(t,e){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},n.extend(e.Endpoints.Blank,[e.Endpoints.AbstractEndpoint,r],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),e.Endpoints.Triangle=function(t){this.type="Triangle",e.Endpoints.AbstractEndpoint.apply(this,arguments);var n=this;(t=t||{}).width=t.width||55,t.height=t.height||55,this.width=t.width,this.height=t.height,this._compute=function(t,e,o,i){var r=o.width||n.width,s=o.height||n.height;return[t[0]-r/2,t[1]-s/2,r,s]}};var s=e.Overlays.AbstractOverlay=function(t){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=t.component,this.loc=null==t.location?.5:t.location,this.endpointLoc=null==t.endpointLocation?[.5,.5]:t.endpointLocation,this.visible=!1!==t.visible};s.prototype={cleanup:function(t){t&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(t,e){},setVisible:function(t){this.visible=t,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(t){this.loc+=t,this.component.repaint()},setLocation:function(t){this.loc=t,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},e.Overlays.Arrow=function(t){this.type="Arrow",s.apply(this,arguments),this.isAppendedAtTopLevel=!1,t=t||{};var i=this;this.length=t.length||20,this.width=t.width||20,this.id=t.id;var r=(t.direction||1)<0?-1:1,a=t.paintStyle||{"stroke-width":1},l=t.foldback||.623;this.computeMaxSize=function(){return 1.5*i.width},this.elementCreated=function(n,o){if(this.path=n,t.events)for(var i in t.events)e.on(n,i,t.events[i])},this.draw=function(t,e){var i,s,u,c;if(t.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var d=parseInt(this.loc,10),h=this.loc<0?1:0;i=t.pointAlongPathFrom(h,d,!1),s=t.pointAlongPathFrom(h,d-r*this.length/2,!1),u=o.pointOnLine(i,s,this.length)}else if(1===this.loc){if(i=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,-this.length),u=o.pointOnLine(i,s,this.length),-1===r){var p=u;u=i,i=p}}else if(0===this.loc){if(u=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,this.length),i=o.pointOnLine(u,s,this.length),-1===r){var f=u;u=i,i=f}}else i=t.pointAlongPathFrom(this.loc,r*this.length/2),s=t.pointOnPath(this.loc),u=o.pointOnLine(i,s,this.length);var g={hxy:i,tail:c=o.perpendicularLineTo(i,u,this.width),cxy:o.pointOnLine(i,u,l*this.length)},m=a.stroke||e.stroke,v=a.fill||e.stroke;return{component:t,d:g,"stroke-width":a.strokeWidth||e.strokeWidth,stroke:m,fill:v,minX:Math.min(i.x,c[0].x,c[1].x),maxX:Math.max(i.x,c[0].x,c[1].x),minY:Math.min(i.y,c[0].y,c[1].y),maxY:Math.max(i.y,c[0].y,c[1].y)}}return{component:t,minX:0,maxX:0,minY:0,maxY:0}}},n.extend(e.Overlays.Arrow,s,{updateFrom:function(t){this.length=t.length||this.length,this.width=t.width||this.width,this.direction=null!=t.direction?t.direction:this.direction,this.foldback=t.foldback||this.foldback}}),e.Overlays.PlainArrow=function(t){t=t||{};var n=e.extend(t,{foldback:1});e.Overlays.Arrow.call(this,n),this.type="PlainArrow"},n.extend(e.Overlays.PlainArrow,e.Overlays.Arrow),e.Overlays.Diamond=function(t){var n=(t=t||{}).length||40,o=e.extend(t,{length:n/2,foldback:2});e.Overlays.Arrow.call(this,o),this.type="Diamond"},n.extend(e.Overlays.Diamond,e.Overlays.Arrow);var a=function(t,e){return(null==t._jsPlumb.cachedDimensions||e)&&(t._jsPlumb.cachedDimensions=t.getDimensions()),t._jsPlumb.cachedDimensions},l=function(t){e.jsPlumbUIComponent.apply(this,arguments),s.apply(this,arguments);var o=this.fire;this.fire=function(){o.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=t.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=t.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=t.create,this._jsPlumb.initiallyInvisible=!1===t.visible,this.getElement=function(){if(null==this._jsPlumb.div){var n=this._jsPlumb.div=e.getElement(this._jsPlumb.create(this._jsPlumb.component));n.style.position="absolute",n.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:""),this._jsPlumb.instance.appendElement(n),this._jsPlumb.instance.getId(n),this.canvas=n;var o="translate(-50%, -50%)";n.style.webkitTransform=o,n.style.mozTransform=o,n.style.msTransform=o,n.style.oTransform=o,n.style.transform=o,n._jsPlumb=this,!1===t.visible&&(n.style.display="none")}return this._jsPlumb.div},this.draw=function(t,e,o){var i=a(this);if(null!=i&&2===i.length){var r={x:0,y:0};if(o)r={x:o[0],y:o[1]};else if(t.pointOnPath){var s=this.loc,l=!1;(n.isString(this.loc)||this.loc<0||this.loc>1)&&(s=parseInt(this.loc,10),l=!0),r=t.pointOnPath(s,l)}else{var u=this.loc.constructor===Array?this.loc:this.endpointLoc;r={x:u[0]*t.w,y:u[1]*t.h}}var c=r.x-i[0]/2,d=r.y-i[1]/2;return{component:t,d:{minx:c,miny:d,td:i,cxy:r},minX:c,maxX:c+i[0],minY:d,maxY:d+i[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};n.extend(l,[e.jsPlumbUIComponent,s],{getDimensions:function(){return[1,1]},setVisible:function(t){this._jsPlumb.div&&(this._jsPlumb.div.style.display=t?"block":"none",t&&this._jsPlumb.initiallyInvisible&&(a(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){t?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(t,e){null!=this._jsPlumb.div&&t.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var t=a(this);return Math.max(t[0],t[1])},paint:function(t,e){this._jsPlumb.initialised||(this.getElement(),t.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px",this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}}),e.Overlays.Custom=function(t){this.type="Custom",l.apply(this,arguments)},n.extend(e.Overlays.Custom,l),e.Overlays.GuideLines=function(){var t=this;t.length=50,t.strokeWidth=5,this.type="GuideLines",s.apply(this,arguments),e.jsPlumbUIComponent.apply(this,arguments),this.draw=function(e,n){var i=e.pointAlongPathFrom(t.loc,t.length/2),r=e.pointOnPath(t.loc),s=o.pointOnLine(i,r,t.length),a=o.perpendicularLineTo(i,s,40),l=o.perpendicularLineTo(s,i,20);return{connector:e,head:i,tail:s,headLine:l,tailLine:a,minX:Math.min(i.x,s.x,l[0].x,l[1].x),minY:Math.min(i.y,s.y,l[0].y,l[1].y),maxX:Math.max(i.x,s.x,l[0].x,l[1].x),maxY:Math.max(i.y,s.y,l[0].y,l[1].y)}}},e.Overlays.Label=function(t){this.labelStyle=t.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var n=e.extend({create:function(){return e.createElement("div")}},t);if(e.Overlays.Custom.call(this,n),this.type="Label",this.label=t.label||"",this.labelText=null,this.labelStyle){var o=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",o.style.font=this.labelStyle.font,o.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(o.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var i=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";o.style.border=this.labelStyle.borderWidth+"px solid "+i}this.labelStyle.padding&&(o.style.padding=this.labelStyle.padding)}},n.extend(e.Overlays.Label,e.Overlays.Custom,{cleanup:function(t){t&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(t){this.label=t,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(t){null!=t.label&&this.setLabel(t.label)}})}.call("undefined"!=typeof window?window:this),function(){var t=this;t.jsPlumb.extend(t.jsPlumbInstance.prototype,{getEventManager:function(){return(n=(e=this)._mottle)||(n=e._mottle=new t.Mottle),n;var e,n},on:function(t,e,n){return this.getEventManager().on.apply(this,arguments),this},off:function(t,e,n){return this.getEventManager().off.apply(this,arguments),this}})}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumbUtil,n=t.jsPlumbInstance,o="stop",i="revert",r="_jsPlumbGroup",s="show",a="hide",l=function(t){var n={},o={},i={},l=this;function u(e,n){for(var o=e.getMembers(),i=0;i<o.length;i++)t[n?s:a](o[i],!0)}t.bind("connection",function(t){null!=t.source[r]&&null!=t.target[r]&&t.source[r]===t.target[r]?(o[t.connection.id]=t.source[r],i[t.connection.id]=t.source[r]):(null!=t.source[r]&&(e.suggest(t.source[r].connections.source,t.connection),o[t.connection.id]=t.source[r]),null!=t.target[r]&&(e.suggest(t.target[r].connections.target,t.connection),i[t.connection.id]=t.target[r]))}),t.bind("internal.connectionDetached",function(t){!function(t){delete t.proxies;var n,r=o[t.id];null!=r&&(n=function(e){return e.id===t.id},e.removeWithFunction(r.connections.source,n),e.removeWithFunction(r.connections.target,n),delete o[t.id]),null!=(r=i[t.id])&&(n=function(e){return e.id===t.id},e.removeWithFunction(r.connections.source,n),e.removeWithFunction(r.connections.target,n),delete i[t.id])}(t.connection)}),t.bind("connectionMoved",function(t){var e=(0===t.index?o:i)[t.connection.id];if(e){var n=e.connections[0===t.index?"source":"target"],r=n.indexOf(t.connection);-1!==r&&n.splice(r,1)}}),this.addGroup=function(e){t.addClass(e.getEl(),"jtk-group-expanded"),n[e.id]=e,e.manager=this,h(e),t.fire("group:add",{group:e})},this.addToGroup=function(e,n,o){if(e=this.getGroup(e)){var i=e.getEl();if(n._isJsPlumbGroup)return;var r=n._jsPlumbGroup;if(r!==e){var s=t.getOffset(n,!0),a=e.collapsed?t.getOffset(i,!0):t.getOffset(e.getDragArea(),!0);null!=r&&(r.remove(n,o),l.updateConnectionsForGroup(r)),e.add(n,o);var u=function(t,n){var o=0===n?1:0;t.each(function(t){t.setVisible(!1),t.endpoints[o].element._jsPlumbGroup===e?(t.endpoints[o].setVisible(!1),l.expandConnection(t,o,e)):(t.endpoints[n].setVisible(!1),l.collapseConnection(t,n,e))})};e.collapsed&&(u(t.select({source:n}),0),u(t.select({target:n}),1));var c=t.getId(n);t.dragManager.setParent(n,c,i,t.getId(i),s);var d={left:s.left-a.left,top:s.top-a.top};t.setPosition(n,d),t.dragManager.revalidateParent(n,c,s),l.updateConnectionsForGroup(e),t.revalidate(c),setTimeout(function(){t.fire("group:addMember",{group:e,el:n})},0)}}},this.removeFromGroup=function(t,e,n){(t=this.getGroup(t))&&t.remove(e,null,n)},this.getGroup=function(t){var o=t;if(e.isString(t)&&null==(o=n[t]))throw new TypeError("No such group ["+t+"]");return o},this.getGroups=function(){var t=[];for(var e in n)t.push(n[e]);return t},this.removeGroup=function(e,o,i,r){e=this.getGroup(e),this.expandGroup(e,!0),e[o?"removeAll":"orphanAll"](i,r),t.remove(e.getEl()),delete n[e.id],delete t._groups[e.id],t.fire("group:remove",{group:e})},this.removeAllGroups=function(t,e,o){for(var i in n)this.removeGroup(n[i],t,e,o)};var c=this.collapseConnection=function(e,n,o){var i,s=o.getEl(),a=t.getId(s),l=e.endpoints[n].elementId,u=e.endpoints[0===n?1:0].element;u[r]&&!u[r].shouldProxy()&&u[r].collapsed||(e.proxies=e.proxies||[],(i=e.proxies[n]?e.proxies[n].ep:t.addEndpoint(s,{endpoint:o.getEndpoint(e,n),anchor:o.getAnchor(e,n),parameters:{isProxyEndpoint:!0}})).setDeleteOnEmpty(!0),e.proxies[n]={ep:i,originalEp:e.endpoints[n]},0===n?t.anchorManager.sourceChanged(l,a,e,s):(t.anchorManager.updateOtherEndpoint(e.endpoints[0].elementId,l,a,e),e.target=s,e.targetId=a),e.proxies[n].originalEp.detachFromConnection(e,null,!0),i.connections=[e],e.endpoints[n]=i,e.setVisible(!0))};this.collapseGroup=function(e){if(null!=(e=this.getGroup(e))&&!e.collapsed){var n=e.getEl();if(u(e,!1),e.shouldProxy()){var o=function(t,n){for(var o=0;o<t.length;o++){var i=t[o];c(i,n,e)}};o(e.connections.source,0),o(e.connections.target,1)}e.collapsed=!0,t.removeClass(n,"jtk-group-expanded"),t.addClass(n,"jtk-group-collapsed"),t.revalidate(n),t.fire("group:collapse",{group:e})}};var d=this.expandConnection=function(e,n,o){if(null!=e.proxies&&null!=e.proxies[n]){var i=t.getId(o.getEl()),r=e.proxies[n].originalEp.element,s=e.proxies[n].originalEp.elementId;e.endpoints[n]=e.proxies[n].originalEp,0===n?t.anchorManager.sourceChanged(i,s,e,r):(t.anchorManager.updateOtherEndpoint(e.endpoints[0].elementId,i,s,e),e.target=r,e.targetId=s),e.proxies[n].ep.detachFromConnection(e,null),e.proxies[n].originalEp.addConnection(e),delete e.proxies[n]}};function h(e){var n=e.getMembers(),r=t.getConnections({source:n,scope:"*"},!0),s=t.getConnections({target:n,scope:"*"},!0),a={};e.connections.source.length=0,e.connections.target.length=0;var l=function(t){for(var n=0;n<t.length;n++)a[t[n].id]||(a[t[n].id]=!0,t[n].source._jsPlumbGroup===e?(t[n].target._jsPlumbGroup!==e&&e.connections.source.push(t[n]),o[t[n].id]=e):t[n].target._jsPlumbGroup===e&&(e.connections.target.push(t[n]),i[t[n].id]=e))};l(r),l(s)}this.expandGroup=function(e,n){if(null!=(e=this.getGroup(e))&&e.collapsed){var o=e.getEl();if(u(e,!0),e.shouldProxy()){var i=function(t,n){for(var o=0;o<t.length;o++){var i=t[o];d(i,n,e)}};i(e.connections.source,0),i(e.connections.target,1)}e.collapsed=!1,t.addClass(o,"jtk-group-expanded"),t.removeClass(o,"jtk-group-collapsed"),t.revalidate(o),this.repaintGroup(e),n||t.fire("group:expand",{group:e})}},this.repaintGroup=function(e){for(var n=(e=this.getGroup(e)).getMembers(),o=0;o<n.length;o++)t.revalidate(n[o])},this.updateConnectionsForGroup=h,this.refreshAllGroups=function(){for(var e in n)h(n[e]),t.dragManager.updateOffsets(t.getId(n[e].getEl()))}};n.prototype.addGroup=function(n){var s=this;if(s._groups=s._groups||{},null!=s._groups[n.id])throw new TypeError("cannot create Group ["+n.id+"]; a Group with that ID exists");if(null!=n.el[r])throw new TypeError("cannot create Group ["+n.id+"]; the given element is already a Group");var a=new function(n,s){var a=this,l=s.el;this.getEl=function(){return l},this.id=s.id||e.uuid(),l._isJsPlumbGroup=!0;var u=this.getDragArea=function(){var t=n.getSelector(l,"[jtk-group-content]");return t&&t.length>0?t[0]:l},c=!0===s.ghost,d=c||!0===s.constrain,h=!1!==s.revert,p=!0===s.orphan,f=!0===s.prune,g=!0===s.dropOverride,m=!1!==s.proxied,v=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(t,e){return s.anchor||"Continuous"},this.getEndpoint=function(t,e){return s.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==s.draggable){var b={stop:function(t){n.fire("groupDragStop",jsPlumb.extend(t,{group:a}))},scope:"_jsPlumbGroupDrag"};s.dragOptions&&t.jsPlumb.extend(b,s.dragOptions),n.draggable(s.el,b)}!1!==s.droppable&&n.droppable(s.el,{drop:function(t){var e=t.drag.el;if(!e._isJsPlumbGroup){var o=e._jsPlumbGroup;if(o!==a){if(null!=o&&o.overrideDrop(e,a))return;n.getGroupManager().addToGroup(a,e,!1)}}}});var y=function(t,e){for(var n=null==t.nodeType?t:[t],o=0;o<n.length;o++)e(n[o])};function x(t,e){var o=function(t){return t.offsetParent}(t),i=n.getSize(o),r=n.getSize(t),s=e[0],a=s+r[0],l=e[1],u=l+r[1];return a>0&&s<i[0]&&u>0&&l<i[1]}function C(t){var e=n.getId(t),o=n.getOffset(t);t.parentNode.removeChild(t),n.getContainer().appendChild(t),n.setPosition(t,o),delete t._jsPlumbGroup,j(t),n.dragManager.clearParent(t,e)}function P(t){if(!x(t.el,t.pos)){var e=t.el._jsPlumbGroup;f?n.remove(t.el):C(t.el),e.remove(t.el)}}function E(t){var e=n.getId(t);n.revalidate(t),n.dragManager.revalidateParent(t,e)}function j(t){t._katavorioDrag&&((f||p)&&t._katavorioDrag.off(o,P),f||p||!h||(t._katavorioDrag.off(i,E),t._katavorioDrag.setRevert(null)))}function w(t){t._katavorioDrag&&((f||p)&&t._katavorioDrag.on(o,P),d&&t._katavorioDrag.setConstrain(!0),c&&t._katavorioDrag.setUseGhostProxy(!0),f||p||!h||(t._katavorioDrag.on(i,E),t._katavorioDrag.setRevert(function(t,e){return!x(t,e)})))}this.overrideDrop=function(t,e){return g&&(h||f||p)},this.add=function(t,e){var o=u();y(t,function(t){if(null!=t._jsPlumbGroup){if(t._jsPlumbGroup===a)return;t._jsPlumbGroup.remove(t,!0,e,!1)}t._jsPlumbGroup=a,v.push(t),n.isAlreadyDraggable(t)&&w(t),t.parentNode!==o&&o.appendChild(t),e||n.fire("group:addMember",{group:a,el:t})}),n.getGroupManager().updateConnectionsForGroup(a)},this.remove=function(t,o,i,r){y(t,function(t){if(delete t._jsPlumbGroup,e.removeWithFunction(v,function(e){return e===t}),o)try{a.getDragArea().removeChild(t)}catch(t){jsPlumbUtil.log("Could not remove element from Group "+t)}j(t),i||n.fire("group:removeMember",{group:a,el:t})}),r||n.getGroupManager().updateConnectionsForGroup(a)},this.removeAll=function(t,e){for(var o=0,i=v.length;o<i;o++)a.remove(v[0],t,e,!0);v.length=0,n.getGroupManager().updateConnectionsForGroup(a)},this.orphanAll=function(){for(var t=0;t<v.length;t++)C(v[t]);v.length=0},this.getMembers=function(){return v},l[r]=this,n.bind("elementDraggable",function(t){t.el._jsPlumbGroup===this&&w(t.el)}.bind(this)),this.shouldProxy=function(){return m},n.getGroupManager().addGroup(this)}(s,n);return s._groups[a.id]=a,n.collapsed&&this.collapseGroup(a),a},n.prototype.addToGroup=function(t,e,n){var o=function(e){var o=this.getId(e);this.manage(o,e),this.getGroupManager().addToGroup(t,e,n)}.bind(this);if(Array.isArray(e))for(var i=0;i<e.length;i++)o(e[i]);else o(e)},n.prototype.removeFromGroup=function(t,e,n){this.getGroupManager().removeFromGroup(t,e,n)},n.prototype.removeGroup=function(t,e,n,o){this.getGroupManager().removeGroup(t,e,n,o)},n.prototype.removeAllGroups=function(t,e,n){this.getGroupManager().removeAllGroups(t,e,n)},n.prototype.getGroup=function(t){return this.getGroupManager().getGroup(t)},n.prototype.getGroups=function(){return this.getGroupManager().getGroups()},n.prototype.expandGroup=function(t){this.getGroupManager().expandGroup(t)},n.prototype.collapseGroup=function(t){this.getGroupManager().collapseGroup(t)},n.prototype.repaintGroup=function(t){this.getGroupManager().repaintGroup(t)},n.prototype.toggleGroup=function(t){null!=(t=this.getGroupManager().getGroup(t))&&this.getGroupManager()[t.collapsed?"expandGroup":"collapseGroup"](t)},n.prototype.getGroupManager=function(){var t=this._groupManager;return null==t&&(t=this._groupManager=new l(this)),t},n.prototype.removeGroupManager=function(){delete this._groupManager},n.prototype.getGroupFor=function(t){if(t=this.getElement(t))return t[r]}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil;t.Connectors.Flowchart=function(e){this.type="Flowchart",(e=e||{}).stub=null==e.stub?30:e.stub;var n,o=t.Connectors.AbstractConnector.apply(this,arguments),i=null==e.midpoint?.5:e.midpoint,r=!0===e.alwaysRespectStubs,s=null,a=null,l=null!=e.cornerRadius?e.cornerRadius:0,u=(e.loopbackRadius,function(t){return t<0?-1:0===t?0:1}),c=function(t){return[u(t[2]-t[0]),u(t[3]-t[1])]},d=function(t,e,n,o){if(s!==e||a!==n){var i=null==s?o.sx:s,r=null==a?o.sy:a,l=i===e?"v":"h";s=e,a=n,t.push([i,r,e,n,l])}},h=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},p=function(t){var e=[];return e.push.apply(e,t),e};this._compute=function(t,e){n=[],s=null,a=null;var u=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},f={perpendicular:u,orthogonal:u,opposite:function(e){var n=t,o="x"===e?0:1;return!r&&{x:function(){return 1===n.so[o]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1===n.so[o]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1===n.so[o]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1===n.so[o]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}}[e]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}}[t.anchorOrientation](t.sourceAxis),g="x"===t.sourceAxis?0:1,m="x"===t.sourceAxis?1:0,v=f[g],b=f[m],y=f[g+2],x=f[m+2];d(n,f[0],f[1],t);var C=t.startStubX+(t.endStubX-t.startStubX)*i,P=t.startStubY+(t.endStubY-t.startStubY)*i,E={x:[0,1],y:[1,0]},j={perpendicular:function(e){var n=t,o={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},i={x:[[C,n.startStubY],[C,n.endStubY]],y:[[n.startStubX,P],[n.endStubX,P]]},r={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},s={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},a={x:[[n.startStubX,P],[n.endStubX,P],[n.endStubX,n.endStubY]],y:[[C,n.startStubY],[C,n.endStubY],[n.endStubX,n.endStubY]]},l={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},u=E[e][0],c=E[e][1],d=n.so[u]+1,h=n.to[c]+1,p=-1===n.to[c]&&l[e][1]<l[e][0]||1===n.to[c]&&l[e][1]>l[e][0],f=o[e][d][0],g=o[e][d][1],m={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]}[e][d][h];return n.segment===m[3]||n.segment===m[2]&&p?i[e]:n.segment===m[2]&&g<f?r[e]:n.segment===m[2]&&g>=f||n.segment===m[1]&&!p?a[e]:n.segment===m[0]||n.segment===m[1]&&p?s[e]:void 0},orthogonal:function(e,n,o,i,r){var s=t,a={x:-1===s.so[0]?Math.min(n,i):Math.max(n,i),y:-1===s.so[1]?Math.min(n,i):Math.max(n,i)}[e];return{x:[[a,o],[a,r],[i,r]],y:[[o,a],[r,a],[r,i]]}[e]},opposite:function(n,i,r,s){var a=t,l={x:"y",y:"x"}[n],u={x:"height",y:"width"}[n],c=a["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var d=r+(1-e.sourceEndpoint.anchor[l])*e.sourceInfo[u]+o.maxStub;return{x:[[i,d],[s,d]],y:[[d,i],[d,s]]}[n]}return!c||1===a.so[g]&&i>s||-1===a.so[g]&&i<s?{x:[[i,P],[s,P]],y:[[C,i],[C,s]]}[n]:1===a.so[g]&&i<s||-1===a.so[g]&&i>s?{x:[[C,a.sy],[C,a.ty]],y:[[a.sx,P],[a.tx,P]]}[n]:void 0}}[t.anchorOrientation](t.sourceAxis,v,b,y,x);if(j)for(var w=0;w<j.length;w++)d(n,j[w][0],j[w][1],t);d(n,f[2],f[3],t),d(n,t.tx,t.ty,t),function(t,e,n){for(var i,r,s,a=null,u=0;u<e.length-1;u++){if(a=a||p(e[u]),i=p(e[u+1]),r=c(a),s=c(i),l>0&&a[4]!==i[4]){var d=Math.min(l,h(a),h(i));a[2]-=r[0]*d,a[3]-=r[1]*d,i[0]+=s[0]*d,i[1]+=s[1]*d;var f=r[1]===s[0]&&1===s[0]||r[1]===s[0]&&0===s[0]&&r[0]!==s[1]||r[1]===s[0]&&-1===s[0],g=(i[1]>a[3]?1:-1)==(i[0]>a[2]?1:-1),m=g&&f||!g&&!f?i[0]:a[2],v=g&&f||!g&&!f?a[3]:i[1];o.addSegment(t,"Straight",{x1:a[0],y1:a[1],x2:a[2],y2:a[3]}),o.addSegment(t,"Arc",{r:d,x1:a[2],y1:a[3],x2:i[0],y2:i[1],cx:m,cy:v,ac:f})}else{var b=a[2]===a[0]?0:a[2]>a[0]?n.lw/2:-n.lw/2,y=a[3]===a[1]?0:a[3]>a[1]?n.lw/2:-n.lw/2;o.addSegment(t,"Straight",{x1:a[0]-b,y1:a[1]-y,x2:a[2]+b,y2:a[3]+y})}a=i}null!=i&&o.addSegment(t,"Straight",{x1:i[0],y1:i[1],x2:i[2],y2:i[3]})}(this,n,t)}},e.extend(t.Connectors.Flowchart,t.Connectors.AbstractConnector)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil;t.Connectors.AbstractBezierConnector=function(e){var n,o=!1!==(e=e||{}).showLoopback,i=(e.curviness,e.margin||5),r=(e.proximityLimit,e.orientation&&"clockwise"===e.orientation),s=e.loopbackRadius||25;return this._compute=function(t,e){var a=e.sourcePos,l=e.targetPos,u=Math.abs(a[0]-l[0]),c=Math.abs(a[1]-l[1]);if(o&&e.sourceEndpoint.elementId===e.targetEndpoint.elementId){!0;var d=e.sourcePos[0],h=e.sourcePos[1]-i,p=d,f=h-s,g=p-s,m=f-s;u=2*s,c=2*s,t.points[0]=g,t.points[1]=m,t.points[2]=u,t.points[3]=c,n.addSegment(this,"Arc",{loopback:!0,x1:d-g+4,y1:h-m,startAngle:0,endAngle:2*Math.PI,r:s,ac:!r,x2:d-g-4,y2:h-m,cx:p-g,cy:f-m})}else!1,this._computeBezier(t,e,a,l,u,c)},n=t.Connectors.AbstractConnector.apply(this,arguments)},e.extend(t.Connectors.AbstractBezierConnector,t.Connectors.AbstractConnector);var n=function(e){e=e||{},this.type="Bezier";var n=t.Connectors.AbstractBezierConnector.apply(this,arguments),o=e.curviness||150;this.getCurviness=function(){return o},this._findControlPoint=function(t,e,n,i,r,s,a){var l=[];return s[0]!==a[0]||s[1]===a[1]?(0===a[0]?l.push(n[0]<e[0]?t[0]+10:t[0]-10):l.push(t[0]+o*a[0]),0===a[1]?l.push(n[1]<e[1]?t[1]+10:t[1]-10):l.push(t[1]+o*s[1])):(0===s[0]?l.push(e[0]<n[0]?t[0]+10:t[0]-10):l.push(t[0]-o*s[0]),0===s[1]?l.push(e[1]<n[1]?t[1]+10:t[1]-10):l.push(t[1]+o*a[1])),l},this._computeBezier=function(t,e,o,i,r,s){var a,l,u=o[0]<i[0]?r:0,c=o[1]<i[1]?s:0,d=o[0]<i[0]?0:r,h=o[1]<i[1]?0:s;a=this._findControlPoint([u,c],o,i,e.sourceEndpoint,e.targetEndpoint,t.so,t.to),l=this._findControlPoint([d,h],i,o,e.targetEndpoint,e.sourceEndpoint,t.to,t.so),n.addSegment(this,"Bezier",{x1:u,y1:c,x2:d,y2:h,cp1x:a[0],cp1y:a[1],cp2x:l[0],cp2y:l[1]})}};t.Connectors.Bezier=n,e.extend(n,t.Connectors.AbstractBezierConnector)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n=function(e){e=e||{},this.type="StateMachine";var n,o=t.Connectors.AbstractBezierConnector.apply(this,arguments),i=e.curviness||10,r=e.margin||5,s=e.proximityLimit||80;e.orientation&&e.orientation;this._computeBezier=function(t,e,a,l,u,c){var d=e.sourcePos[0]<e.targetPos[0]?0:u,h=e.sourcePos[1]<e.targetPos[1]?0:c,p=e.sourcePos[0]<e.targetPos[0]?u:0,f=e.sourcePos[1]<e.targetPos[1]?c:0;0===e.sourcePos[2]&&(d-=r),1===e.sourcePos[2]&&(d+=r),0===e.sourcePos[3]&&(h-=r),1===e.sourcePos[3]&&(h+=r),0===e.targetPos[2]&&(p-=r),1===e.targetPos[2]&&(p+=r),0===e.targetPos[3]&&(f-=r),1===e.targetPos[3]&&(f+=r);var g,m,v,b,y,x,C,P,E=(d+p)/2,j=(h+f)/2,w=(x=h,P=f,(y=d)<=(C=p)&&P<=x?1:y<=C&&x<=P?2:C<=y&&P>=x?3:4),S=Math.sqrt(Math.pow(p-d,2)+Math.pow(f-h,2));g=(n=function(t,e,n,o,i,r,s,a,l){return a<=l?[t,e]:1===n?o[3]<=0&&i[3]>=1?[t+(o[2]<.5?-1*r:r),e]:o[2]>=1&&i[2]<=0?[t,e+(o[3]<.5?-1*s:s)]:[t+-1*r,e+-1*s]:2===n?o[3]>=1&&i[3]<=0?[t+(o[2]<.5?-1*r:r),e]:o[2]>=1&&i[2]<=0?[t,e+(o[3]<.5?-1*s:s)]:[t+r,e+-1*s]:3===n?o[3]>=1&&i[3]<=0?[t+(o[2]<.5?-1*r:r),e]:o[2]<=0&&i[2]>=1?[t,e+(o[3]<.5?-1*s:s)]:[t+-1*r,e+-1*s]:4===n?o[3]<=0&&i[3]>=1?[t+(o[2]<.5?-1*r:r),e]:o[2]<=0&&i[2]>=1?[t,e+(o[3]<.5?-1*s:s)]:[t+r,e+-1*s]:void 0}(E,j,w,e.sourcePos,e.targetPos,i,i,S,s))[0],m=n[0],v=n[1],b=n[1],o.addSegment(this,"Bezier",{x1:p,y1:f,x2:d,y2:h,cp1x:g,cp1y:v,cp2x:m,cp2y:b})}};t.Connectors.StateMachine=n,e.extend(n,t.Connectors.AbstractBezierConnector)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n=function(e){this.type="Straight";var n=t.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,e){n.addSegment(this,"Straight",{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),n.addSegment(this,"Straight",{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),n.addSegment(this,"Straight",{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};t.Connectors.Straight=n,e.extend(n,t.Connectors.AbstractConnector)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},o="http://www.w3.org/2000/svg",i=function(t,e){for(var n in e)t.setAttribute(n,""+e[n])},r=function(e,n){return(n=n||{}).version="1.1",n.xmlns=o,t.createElementNS(o,e,null,null,n)},s=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},a=function(t){for(var e=t.querySelectorAll(" defs,linearGradient,radialGradient"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])},l=function(t,e,o,i,s){if(e.setAttribute("fill",o.fill?o.fill:"none"),e.setAttribute("stroke",o.stroke?o.stroke:"none"),o.gradient?function(t,e,n,o,i){var s,l="jsplumb_gradient_"+i._jsPlumb.instance.idstamp();a(t),s=n.gradient.offset?r("radialGradient",{id:l}):r("linearGradient",{id:l,gradientUnits:"userSpaceOnUse"});var u=r("defs");t.appendChild(u),u.appendChild(s);for(var c=0;c<n.gradient.stops.length;c++){var d=1===i.segment||2===i.segment?c:n.gradient.stops.length-1-c,h=n.gradient.stops[d][1],p=r("stop",{offset:Math.floor(100*n.gradient.stops[c][0])+"%","stop-color":h});s.appendChild(p)}var f=n.stroke?"stroke":"fill";e.setAttribute(f,"url(#"+l+")")}(t,e,o,0,s):(a(t),e.setAttribute("style","")),o.strokeWidth&&e.setAttribute("stroke-width",o.strokeWidth),o.dashstyle&&o.strokeWidth&&!o["stroke-dasharray"]){var l=-1===o.dashstyle.indexOf(",")?" ":",",u="";o.dashstyle.split(l).forEach(function(t){u+=Math.floor(t*o.strokeWidth)+l}),e.setAttribute("stroke-dasharray",u)}else o["stroke-dasharray"]&&e.setAttribute("stroke-dasharray",o["stroke-dasharray"]);for(var c in n)o[c]&&e.setAttribute(n[c],o[c])},u=function(t,e,n){t.childNodes.length>n?t.insertBefore(e,t.childNodes[n]):t.appendChild(e)};e.svg={node:r,attr:i,pos:s};var c=function(n){var o=n.pointerEventsSpec||"all",a={};t.jsPlumbUIComponent.apply(this,n.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var l=n.cssClass+" "+(n.originalArgs[0].cssClass||""),u={style:"",width:0,height:0,"pointer-events":o,position:"absolute"};this.svg=r("svg",u),n.useDivWrapper?(this.canvas=t.createElement("div",{position:"absolute"}),e.sizeElement(this.canvas,0,0,1,1),this.canvas.className=l):(i(this.svg,{class:l}),this.canvas=this.svg),n._jsPlumb.appendElement(this.canvas,n.originalArgs[0].parent),n.useDivWrapper&&this.canvas.appendChild(this.svg);var c=[this.canvas];return this.getDisplayElements=function(){return c},this.appendDisplayElement=function(t){c.push(t)},this.paint=function(t,o,r){if(null!=t){var l,u=[this.x,this.y],c=[this.w,this.h];null!=r&&(r.xmin<0&&(u[0]+=r.xmin),r.ymin<0&&(u[1]+=r.ymin),c[0]=r.xmax+(r.xmin<0?-r.xmin:0),c[1]=r.ymax+(r.ymin<0?-r.ymin:0)),n.useDivWrapper?(e.sizeElement(this.canvas,u[0],u[1],c[0],c[1]),u[0]=0,u[1]=0,l=s([0,0])):l=s([u[0],u[1]]),a.paint.apply(this,arguments),i(this.svg,{style:l,width:c[0]||0,height:c[1]||0})}},{renderer:a}};e.extend(c,t.jsPlumbUIComponent,{cleanup:function(t){t||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(t){var e=t.getContainer();this.canvas&&null==this.canvas.parentNode&&e.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&e.appendChild(this.bgCanvas)},setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none")}}),t.ConnectorRenderers.svg=function(e){var n=this;c.apply(this,[{cssClass:e._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:e._jsPlumb}]).renderer.paint=function(o,s,a){var c=n.getSegments(),d=[0,0];if(a.xmin<0&&(d[0]=-a.xmin),a.ymin<0&&(d[1]=-a.ymin),c.length>0){var h={d:n.getPathData(),transform:"translate("+d[0]+","+d[1]+")","pointer-events":e["pointer-events"]||"visibleStroke"},p=null;n.x,n.y,n.w,n.h;if(o.outlineStroke){var f=o.outlineWidth||1,g=o.strokeWidth+2*f;delete(p=t.extend({},o)).gradient,p.stroke=o.outlineStroke,p.strokeWidth=g,null==n.bgPath?(n.bgPath=r("path",h),t.addClass(n.bgPath,t.connectorOutlineClass),u(n.svg,n.bgPath,0)):i(n.bgPath,h),l(n.svg,n.bgPath,p,0,n)}null==n.path?(n.path=r("path",h),u(n.svg,n.path,o.outlineStroke?1:0)):i(n.path,h),l(n.svg,n.path,o,0,n)}}},e.extend(t.ConnectorRenderers.svg,c);var d=t.SvgEndpoint=function(e){c.apply(this,[{cssClass:e._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:e._jsPlumb}]).renderer.paint=function(e){var n=t.extend({},e);n.outlineStroke&&(n.stroke=n.outlineStroke),null==this.node?(this.node=this.makeNode(n),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),l(this.svg,this.node,n,(this.x,this.y,this.w,this.h),this),s(this.node,(this.x,this.y))}.bind(this)};e.extend(d,c),t.Endpoints.svg.Dot=function(){t.Endpoints.Dot.apply(this,arguments),d.apply(this,arguments),this.makeNode=function(t){return r("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(t){i(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}},e.extend(t.Endpoints.svg.Dot,[t.Endpoints.Dot,d]),t.Endpoints.svg.Rectangle=function(){t.Endpoints.Rectangle.apply(this,arguments),d.apply(this,arguments),this.makeNode=function(t){return r("rect",{width:this.w,height:this.h})},this.updateNode=function(t){i(t,{width:this.w,height:this.h})}},e.extend(t.Endpoints.svg.Rectangle,[t.Endpoints.Rectangle,d]),t.Connectors.svg.Flowchart=function(){t.Connectors.Flowchart.apply(this,arguments),t.ConnectorRenderers.svg.apply(this,arguments)},e.extend(t.Connectors.svg.Flowchart,[t.Connectors.Flowchart,t.ConnectorRenderers.svg]),t.Connectors.svg.Bezier=function(){t.Connectors.Bezier.apply(this,arguments),t.ConnectorRenderers.svg.apply(this,arguments)},e.extend(t.Connectors.svg.Bezier,[t.Connectors.Bezier,t.ConnectorRenderers.svg]),t.Connectors.svg.Straight=function(){t.Connectors.Straight.apply(this,arguments),t.ConnectorRenderers.svg.apply(this,arguments)},e.extend(t.Connectors.svg.Straight,[t.Connectors.Straight,t.ConnectorRenderers.svg]),t.Connectors.svg.StateMachine=function(){t.Connectors.StateMachine.apply(this,arguments),t.ConnectorRenderers.svg.apply(this,arguments)},e.extend(t.Connectors.svg.StateMachine,[t.Connectors.StateMachine,t.ConnectorRenderers.svg]),t.Endpoints.svg.Image=t.Endpoints.Image,t.Endpoints.svg.Blank=t.Endpoints.Blank,t.Overlays.svg.Label=t.Overlays.Label,t.Overlays.svg.Custom=t.Overlays.Custom;var h=function(e,n){e.apply(this,n),t.jsPlumbUIComponent.apply(this,n),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(t,e){if(t.component.svg&&e){null==this.path&&(this.path=r("path",{"pointer-events":"all"}),t.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,t.component),this.canvas=t.component.svg);var s=n&&1===n.length&&n[0].cssClass||"",a=[0,0];e.xmin<0&&(a[0]=-e.xmin),e.ymin<0&&(a[1]=-e.ymin),i(this.path,{d:o(t.d),class:s,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+a[0]+","+a[1]+")"})}};var o=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){t.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),t.canvas.appendChild(this.path))}};e.extend(h,[t.jsPlumbUIComponent,t.Overlays.AbstractOverlay],{cleanup:function(t){null!=this.path&&(t?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(t,e){this.path&&e.canvas&&e.canvas.appendChild(this.path)},setVisible:function(t){null!=this.path&&(this.path.style.display=t?"block":"none")}}),t.Overlays.svg.Arrow=function(){h.apply(this,[t.Overlays.Arrow,arguments])},e.extend(t.Overlays.svg.Arrow,[t.Overlays.Arrow,h]),t.Overlays.svg.PlainArrow=function(){h.apply(this,[t.Overlays.PlainArrow,arguments])},e.extend(t.Overlays.svg.PlainArrow,[t.Overlays.PlainArrow,h]),t.Overlays.svg.Diamond=function(){h.apply(this,[t.Overlays.Diamond,arguments])},e.extend(t.Overlays.svg.Diamond,[t.Overlays.Diamond,h]),t.Overlays.svg.GuideLines=function(){var e,n,o=null,s=this;t.Overlays.GuideLines.apply(this,arguments),this.paint=function(t,l){null==o&&(o=r("path"),t.connector.svg.appendChild(o),s.attachListeners(o,t.connector),s.attachListeners(o,s),e=r("path"),t.connector.svg.appendChild(e),s.attachListeners(e,t.connector),s.attachListeners(e,s),n=r("path"),t.connector.svg.appendChild(n),s.attachListeners(n,t.connector),s.attachListeners(n,s));var u=[0,0];l.xmin<0&&(u[0]=-l.xmin),l.ymin<0&&(u[1]=-l.ymin),i(o,{d:a(t.head,t.tail),stroke:"red",fill:null,transform:"translate("+u[0]+","+u[1]+")"}),i(e,{d:a(t.tailLine[0],t.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+u[0]+","+u[1]+")"}),i(n,{d:a(t.headLine[0],t.headLine[1]),stroke:"green",fill:null,transform:"translate("+u[0]+","+u[1]+")"})};var a=function(t,e){return"M "+t.x+","+t.y+" L"+e.x+","+e.y}},e.extend(t.Overlays.svg.GuideLines,t.Overlays.GuideLines)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n=this.Katavorio,o=this.Biltong,i=function(e,i){var r="_katavorio_"+(i=i||"main"),s=e[r],a=e.getEventManager();return s||((s=new n({bind:a.on,unbind:a.off,getSize:t.getSize,getConstrainingRectangle:function(t){return[t.parentNode.scrollWidth,t.parentNode.scrollHeight]},getPosition:function(t,n){var o=e.getOffset(t,n,t._katavorioDrag?t.offsetParent:null);return[o.left,o.top]},setPosition:function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"},addClass:t.addClass,removeClass:t.removeClass,intersects:o.intersects,indexOf:function(t,e){return t.indexOf(e)},scope:e.getDefaultScope(),css:{noSelect:e.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}})).setZoom(e.getZoom()),e[r]=s,e.bind("zoom",s.setZoom)),s};t.extend(this.jsPlumbInstance.prototype,{animationSupported:!0,getElement:function(t){return null==t?null:"string"==typeof(t="string"==typeof t?t:null!=t.length&&null==t.enctype?t[0]:t)?document.getElementById(t):t},removeElement:function(t){i(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(n,o,i){i=i||{};var r=this.getOffset(n),s=function(t,n){var o=function(o){if(null!=n[o]){if(e.isString(n[o])){var i=n[o].match(/-=/)?-1:1,r=n[o].substring(2);return t[o]+i*r}return n[o]}return t[o]};return[o("left"),o("top")]}(r,o),a=s[0]-r.left,l=s[1]-r.top,u=i.duration||250,c=u/15,d=15/u*a,h=15/u*l,p=0,f=setInterval(function(){t.setPosition(n,{left:r.left+d*(p+1),top:r.top+h*(p+1)}),null!=i.step&&i.step(p,Math.ceil(c)),++p>=c&&(window.clearInterval(f),null!=i.complete&&i.complete())},15)},destroyDraggable:function(t,e){i(this,e).destroyDraggable(t)},unbindDraggable:function(t,e,n,o){i(this,o).destroyDraggable(t,e,n)},destroyDroppable:function(t,e){i(this,e).destroyDroppable(t)},unbindDroppable:function(t,e,n,o){i(this,o).destroyDroppable(t,e,n)},initDraggable:function(t,e,n){i(this,n).draggable(t,e)},initDroppable:function(t,e,n){i(this,n).droppable(t,e)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,e){return!0},isDropSupported:function(t,e){return!0},isElementDraggable:function(e){return(e=t.getElement(e))._katavorioDrag&&e._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,e){var n=t[0].el;if(null==n.offsetParent)return null;var o=t[0].finalPos||t[0].pos,i={left:o[0],top:o[1]};if(n._katavorioDrag&&n.offsetParent!==this.getContainer()){var r=this.getOffset(n.offsetParent);i.left+=r.left,i.top+=r.top}return i},setDragFilter:function(t,e,n){t._katavorioDrag&&t._katavorioDrag.setFilter(e,n)},setElementDraggable:function(e,n){(e=t.getElement(e))._katavorioDrag&&e._katavorioDrag.setEnabled(n)},setDragScope:function(t,e){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,e)},setDropScope:function(t,e){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,e)},addToPosse:function(e,n){var o=Array.prototype.slice.call(arguments,1),r=i(this);t.each(e,function(e){(e=[t.getElement(e)]).push.apply(e,o),r.addToPosse.apply(r,e)})},setPosse:function(e,n){var o=Array.prototype.slice.call(arguments,1),r=i(this);t.each(e,function(e){(e=[t.getElement(e)]).push.apply(e,o),r.setPosse.apply(r,e)})},removeFromPosse:function(e,n){var o=Array.prototype.slice.call(arguments,1),r=i(this);t.each(e,function(e){(e=[t.getElement(e)]).push.apply(e,o),r.removeFromPosse.apply(r,e)})},removeFromAllPosses:function(e){var n=i(this);t.each(e,function(e){n.removeFromAllPosses(t.getElement(e))})},setPosseState:function(e,n,o){var r=i(this);t.each(e,function(e){r.setPosseState(t.getElement(e),n,o)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){i(this).select(t)},removeFromDragSelection:function(t){i(this).deselect(t)},clearDragSelection:function(){i(this).deselectAll()},trigger:function(t,e,n,o){this.getEventManager().trigger(t,e,n,o)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()}});var r;r=t.init,function t(){/complete|loaded|interactive/.test(document.readyState)&&void 0!==document.body&&null!=document.body?r():setTimeout(t,9)}()}.call("undefined"!=typeof window?window:this),function(){var t=this.Farahey={};"undefined"!=typeof exports&&(exports.Farahey=t);var e=this.Biltong,n=function(t,e,n){var o=function(t,e,n){for(var o=0,i=t.length,r=-1,s=0;o<i;)if((s=n(t[r=parseInt((o+i)/2)],e))<0)o=r+1;else{if(!(s>0))return r;i=r}return o}(t,e,n);t.splice(o,0,e)},o=[function(t,e){return t.x+t.w-e.x},function(t,e){return t.x-(e.x+e.w)}],i=[function(t,e){return t.y+t.h-e.y},function(t,e){return t.y-(e.y+e.h)}],r=[null,[o[0],i[1]],[o[0],i[0]],[o[1],i[0]],[o[1],i[1]]],s=t.calculateSpacingAdjustment=function(t,n){var o=t.center||[t.x+t.w/2,t.y+t.h/2],i=n.center||[n.x+n.w/2,n.y+n.h/2],s=e.gradient(o,i),a=e.quadrant(o,i);return function(t,e,n,o,i){isNaN(n)&&(n=0);var s,a,l,u,c,d,h=e.y+e.h,p=n==1/0||n==-1/0?e.x+e.w/2:(h-o)/n,f=Math.atan(n);return c="w",d=p,(l=e)[u="x"]<=d&&d<=l[u]+l[c]?{left:a=(s=r[i][1](t,e))/Math.sin(f)*Math.cos(f),top:s}:{left:a=r[i][0](t,e),top:s=a/Math.cos(f)*Math.sin(f)}}(t,n,s,s==1/0||s==-1/0||isNaN(s)?0:o[1]-s*o[0],a)},a=t.paddedRectangle=function(t,e,n){return{x:t[0]-n[0],y:t[1]-n[1],w:e[0]+2*n[0],h:e[1]+2*n[1]}},l=function(t){if(null==t)return null;if("[object Array]"===Object.prototype.toString.call(t)){var e=[];return e.push.apply(e,t),e}var n=[];for(var o in t)n.push(t[o]);return n},u=function(t){var o,i,r=t.getPosition,u=t.getSize,c=t.getId,d=t.setPosition,h=t.padding||[20,20],p=t.constrain||function(t,e,n){return n},f=[],g={},m={},v=l(t.elements||[]),b=t.origin||[0,0],y=t.executeNow,x=(this.getOrigin=function(){return b},t.filter||function(t){return!0}),C=t.exclude||function(t){return!1},P=t.orderByDistanceFromOrigin,E=new function(t,n){var o=t,i={},r=function(t){if(!i[t[1]]){var e=n(t[2]);i[t[1]]={l:t[0][0],t:t[0][1],w:e[0],h:e[1],center:[t[0][0]+e[0]/2,t[0][1]+e[1]/2]}}return i[t[1]]};this.setOrigin=function(t){o=t,i={}},this.compare=function(t,n){var i=e.lineLength(o,r(t).center),s=e.lineLength(o,r(n).center);return i<s?-1:i===s?0:1}}(b,u),j=t.updateOnStep,w=t.stepInterval||350,S=t.debug,k=function(t){P&&0!==f.length?n(f,t,E.compare):f.push(t)},T=function(){return E.setOrigin(b),f.length=0,g={},m={},function(t){var e,n,o,i;e=n=1/0,o=i=-1/0;for(var s=0;s<t.length;s++){var a=r(t[s]),l=u(t[s]),d=c(t[s]);g[d]=[a.left,a.top],k([[a.left,a.top],d,t[s]]),m[d]=l,e=Math.min(e,a.left),n=Math.min(n,a.top),o=Math.max(o,a.left+l[0]),i=Math.max(i,a.top+l[1])}return[e,o,n,i]}(v)},A=function(t){if(v.length>1){var n=(t=t||{}).filter||x,o=t.padding||h,i=t.iterations,r=t.exclude||C,l=t.excludeFocus;t.gather&&function(t,e,n,o,i,r,l,u,c,d,h,p,f){for(var g=a(r=r||[0,0],[1,1],o),m=0;m<t.length;m++)if(!p(t[m][1],t[m][2])){var v=e[t[m][1]],b=n[t[m][1]],y=a(v,b,o);if(l(t[m][1],t[m][2])){var x=s(g,y);v[0]+=x.left,v[1]+=x.top}}}(f,g,m,o,0,b,n,0,0,0,0,r);var u=function(t,n,o,i,r,l,u,c,d,h,p,f,g){l=l||[0,0],h=h||function(){},p=p||2;var m,v,b=a(l,[1,1],i),y=1,x=!0,C={},P=function(t,e,n,o){C[t]=!0,e[0]+=n,e[1]+=o};return function l(){for(var C=0;C<t.length;C++)if(!f(t[C][1],t[C][2])){var E=n[t[C][1]],j=t[C][1],w=(t[C][2],o[t[C][1]]),S=a(E,w,i);!g&&u(t[C][1],t[C][2])&&e.intersects(b,S)&&(m=s(b,S),v=r(t[C][1],E,m),P(j,E,v.left,v.top)),S=a(E,w,i);for(var k=0;k<t.length;k++)if(C!==k){if(f(t[k][1],t[k][2]))continue;if(u(t[k][1],t[k][2])){var T=n[t[k][1]],A=o[t[k][1]],_=a(T,A,i);e.intersects(S,_)&&(x=!0,m=s(S,_),v=r(t[k][1],T,m),P(t[k][1],T,v.left,v.top))}}}c&&h(),x&&y<p&&(x=!1,y++,c?window.setTimeout(l,d):l())}(),C}(f,g,m,o,p,b,n,j,w,_,i,r,l);_(u)}},_=function(t){for(var e=0;e<v.length;e++){var n=c(v[e]);t[n]&&d(v[e],{left:g[n][0],top:g[n][1]})}},I=function(t){null!=t&&(b=t,E.setOrigin(t))};return this.execute=function(t,e){I(t),T(),A(e)},this.executeAtCenter=function(t){var e=T();I([(e[0]+e[1])/2,(e[2]+e[3])/2]),A(t)},this.executeAtEvent=function(e,n){var i=t.container,r=t.getContainerPosition(i),s=e.pageX-r.left+i.scrollLeft,a=e.pageY-r.top+i.scrollTop;S&&(o.style.left=e.pageX+"px",o.style.top=e.pageY+"px"),this.execute([s,a],n)},this.setElements=function(t){return v=l(t),this},this.addElement=function(t,e){return null==t||!e&&-1!==v.indexOf(t)||v.push(t),this},this.addElements=function(t,e){if(e)Array.prototype.push.apply(v,t);else for(var n=0;n<t.length;n++)this.addElement(t[n]);return this},this.getElements=function(){return v},this.removeElement=function(t){for(var e=-1,n=0;n<v.length;n++)if(v[n]===t){e=n;break}return-1!==e&&v.splice(e,1),this},this.setPadding=function(t){h=t},this.setConstrain=function(t){p=t},this.setFilter=function(t){x=t},this.reset=function(){v.length=0},S&&((i=document.createElement("div")).style.position="absolute",i.style.width="10px",i.style.height="10px",i.style.backgroundColor="red",document.body.appendChild(i),o=i),y&&this.execute(),this};t.getInstance=function(t){return new u(t)}}.call("undefined"!=typeof window?window:this),function(){var t=this,e="undefined"!=typeof navigator&&/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,n=e>-1&&e<9,o=function(t,e,n){for(var o in e)t[o]=e[o],n&&n(o,t[o]);return t},i=function t(e,n,o){if(null==e)return null;if("$data"===n||null==n)return e;var i=n.match(/^\{(.*)\}$/);if(i){for(var r={},s=i[1].split(","),a=0;a<s.length;a++){var l=s[a].split(":"),c=t(e,l[1]);r[u(l[0])]=c||l[1].replace(/'/g,"")}return r}var d=e,h=null;return(n=n.replace(/\['([^']*)'\]/g,".$1")).replace(/([^\.])+/g,function(t,e,n,i){if(null==h){var r=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),s=function(){return d[r[1]]||(d[r[1]]=[],d[r[1]])};if(n+t.length>=i.length)if(r){var a=s(),l=r[3];null==o?h=a[l]:a[l]=o}else null==o?h=d[t]:d[t]=o;else if(r){var u=s();d=u[r[3]]||(u[r[3]]={},u[r[3]])}else d=d[t]||(d[t]={},d[t])}}),h},r=function(e){var n=t.document.getElementById(e);return null!=n?n.innerHTML:null},s=function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function t(e){for(var n=[],o=0;o<e.length;o++)s(e[o])?n.push.apply(n,t(e[o])):n[n.length]=e[o];return n},l=function(t,e){for(var n=[],o=0,i=t.length;o<i;o++)e(t[o])&&n.push(t[o]);return n},u=function(t){if(null==t)return t;for(var e=t.replace(/^\s\s*/,""),n=/\s/,o=e.length;n.test(e.charAt(--o)););return e.slice(0,o+1)},c=function(t,e,n,o,i){var r=h(),s={w:e,e:[],u:r};i.bindings[r]=s;return s.reapply=new Function("$data",(null!=o?"var out='';try { with($data) { if ("+o+") out = this.w; else return null; }}catch(_){return null;}":"var out = this.w;")+"for (var k = 0; k < this.e.length; k++) { with($data) { "+(null!=o?"try {  if("+o+") { out = out.replace(this.e[k][0], eval(this.e[k][1])); } else out=''; } catch(__) { out='';}":"try { out = out.replace(this.e[k][0], eval(this.e[k][1])); } catch(__) { out=out.replace(this.e[k][0], '');}")+" }} return out;"),n.bindings[t]=s,e.replace(/\$\{([^\}]*)\}/g,function(t,e,n,o){s.e.push([t,e])}),r},d=function(t,e,n,o,i){n.atts[t]=e,c(t,e,n,o,i)},h=function(t){return(t?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx":"xxxxxxxx-xxxx-4xxx").replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},p=function(t,e){this.uuid=h(),this.children=[],this.instance=e,e.entries[this.uuid]=this},f=function(t,e){p.apply(this,arguments);var n=function(t,e){var n=e.parseAttributes(t),o={el:u(n[0]),atts:{},bindings:{}};function i(t,n){var i=t.match(/([^=]+)=['"](.*)['"]/);return null==i&&null==n?o.atts[t]="":null==i?d(t,"",o,n,e):d(i[1],i[2],o,n,e),i}for(var r=1;r<n.length;r++){var s=u(n[r]);if(null!=s&&s.length>0){var a=s.match(e.inlineIfRe);if(a)for(var l=a[2].split(e.attributesRe),c=0;c<l.length;c++){var h=u(l[c]);null!=h&&h.length>0&&i(h,a[1])}else i(s)}}return o}(t,e);null!=n.atts["r-toggle"]&&null!=e.toggleManager&&(this.discard=!1===e.toggleManager(n.atts["r-toggle"]));var o=n.el.split(":");this.tag=n.el,2===o.length&&(this.namespace=o[0]),this.atts=n.atts,this.bindings=n.bindings,this.type="element",this.compile=function(t,e){var n=t.customTags[this.tag]||t.globalTags[this.tag];if(n){for(var o=n.getFunctionBody(this),i=t.customTags[this.tag]?"_rotors.customTags['"+this.tag+"'].rendered(_le, _rotors, data[0]);":"_rotors.globalTags['"+this.tag+"'].rendered(_le, _rotors, data[0]);",r=0;r<this.children.length;r++)this.children[r].precompile&&(o+=this.children[r].precompile(t)),o+=this.children[r].compile(t),this.children[r].postcompile&&(o+=this.children[r].postcompile(t));return o+="_le=_els.pop();"+i+"_rotors.pet(_eid,'"+this.uuid+"');"}var s="/* element entry "+this.uuid+" */;";if(!0!==this.remove)for(var a in s+=t.getExecutionContent(this.tag,this.uuid,!1,this.namespace),this.atts){if(this.atts.hasOwnProperty(a))s+="__a="+(null!=this.bindings[a]?"_rotors.bind(data[0], '"+this.bindings[a].u+"');":"'"+this.atts[a]+"'")+";if(__a!=null) {_rotors.setAttribute(e,'"+a+"',__a || '');}"}for(var l=0;l<this.children.length;l++)this.children[l].precompile&&(s+=this.children[l].precompile(t)),s+=this.children[l].compile(t),this.children[l].postcompile&&(s+=this.children[l].postcompile(t));return!0===this.remove||e||(s+="_le=_els.pop();",s+="_rotors.pet(_eid, '"+this.uuid+"');"),s};var i=function(t,n){e.each(n.split(";"),function(e){var n=e.indexOf(":"),o=e.substring(0,n);t.style[o]=e.substring(n+1)})};this.update=function(t,n){for(var o in this.atts){var r;if(this.atts.hasOwnProperty(o)&&"class"!==o)null!=(r=null!=this.bindings[o]?this.bindings[o].reapply(n):"'"+this.atts[o]+"'")&&("style"===o&&null!=t.style?i(t,r):t.setAttribute(o,r))}if(this.originalCustomTag){var s=e.customTags[this.originalCustomTag]||e.globalTags[this.originalCustomTag];s&&s.updated(t,n)}}},g=function(){this.childNodes=[],this.appendChild=function(t){this.childNodes.push(t)},this.toString=function(){for(var t="",e=0;e<this.childNodes.length;e++)t+=this.childNodes[e].toString();return t}},m=function(t,e,n){return function(o){var i=n?null:t.cache[o];return null==i&&(i=e(o)),null==i&&(i=t.defaultTemplate),null!=i&&(t.cache[o]=i),i}},v=function(t){t=t||{},this.cache={},this.templateCache={},this.customTags={},null!=t.defaultTemplate&&this.setDefaultTemplate(t.defaultTemplate),this.templateResolver=t.templateResolver?t.templateResolver:t.templates?function(e){return t.templates[e]}:this.isBrowser?r:null,this.toggleManager=null};!function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(v.prototype,{bindings:{},entries:{},executions:{},bind:function(t,e){var n=this.bindings[e];return null==n?"":n.reapply(t)},defaultTemplate:"<div></div>",defaultCompiledTemplate:null,setDefaultTemplate:function(t){null!=t?(this.defaultTemplate=t,this.defaultCompiledTemplate=this.compile(this.parse(t))):this.clearDefaultTemplate()},clearDefaultTemplate:function(){this.defaultTemplate=null,this.defaultCompiledTemplate=null},clearCache:function(){this.cache={},this.templateCache={}},namespaceHandlers:{svg:function(t){return"e = document.createElementNS('http://www.w3.org/2000/svg', '"+t.split(":")[1]+"');e.setAttribute('version', '1.1');e.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');"}},namespaces:{xlink:"http://www.w3.org/1999/xlink"},each:function(t,e,n,o){var i;if(s(t))for(i=0;i<t.length;i++)e(t[i],n,i,o);else for(i in t)t.hasOwnProperty(i)&&e({$key:i,$value:t[i]},n,i,o)},openRe:new RegExp("<([^/>]*?)>$|<([^/].*[^/])>$"),closeRe:new RegExp("^</([^>]+)>"),openCloseRe:new RegExp("<(.*)(/>$)"),tokenizerRe:/(<[^\^>]+\/>)|(<!--[\s\S]*?-->)|(<[\/a-zA-Z0-9\-:]+(?:\s*[a-zA-Z\-]+=\"[^\"]*\"|\s*[a-zA-Z\-]+='[^']+'|\s*[a-zA-Z\-]|\s*\{\{.*\}\})*>)/,commentRe:/<!--[\s\S]*?-->/,attributesRe:/([a-zA-Z0-9\-_:]+="[^"]*")|(\{\{if [^(?:\}\})]+\}\}.*\{\{\/if\}\})/,inlineIfRe:/\{\{if ([^\}]+)\}\}(.*)\{\{\/if\}\}/,singleExpressionRe:/^[\s]*\$\{([^\}]*)\}[\s]*$/,parseAttributes:function(t){return null==t?t:this.filterEmpty(t.replace("/>",">").split(/^<|>$/)[1].split(this.attributesRe))},map:function(t,e){for(var n=[],o=0,i=t.length;o<i;o++)n.push(e(t[o]));return a(n)},flatten:a,filter:l,data:i,uuid:h,filterEmpty:function(t){return l(t,function(t){return null!=t&&u(t).length>0})},isBrowser:"undefined"!=typeof navigator,isOldIE:function(){return n},cf:function(){return this.isBrowser?this.isOldIE()?t.document.createElement("div"):t.document.createDocumentFragment():new g},ctn:function(e){return this.isBrowser?t.document.createTextNode(e):new function(t){this.nodeValue=t,this.toString=function(){return this.nodeValue}}(e)},ce:function(e){return this.isBrowser?t.document.createElement(e):new function(t){g.apply(this),this.tag=t;var e={};this.setAttribute=function(t,n){e[t]=n},this.getAttribute=function(t){return e[t]},this.setAttributeNS=function(t,n,o){e[t+":"+n]=o},this.toString=function(){var t="<"+this.tag,n="";for(var o in e)n+=" "+o+'="'+e[o]+'"';t=t+n+">";for(var i=0;i<this.childNodes.length;i++)t+=this.childNodes[i].toString();return t+"</"+this.tag+">"}}(e)},customElements:{"r-each":{parse:function(t,e,n,o){t.context=t.atts.in,t.type="each"},compile:function(t){var e=function(){var e="function(item, _rotorsLoopId, _rotorsLoopIndex, _rotorsLoopContext) { ";e+="data.unshift(item);$value=item;$key=_rotorsLoopIndex;";for(var n=0;n<this.children.length;n++)e+=this.children[n].compile(t);return e+="data.splice(0,1);",e+="}"}.bind(this);return";_rotors.te(null, _eid, '"+this.uuid+"');"+(this.context?';data.unshift(_rotors.data(data[0], "'+this.context+'"));':"")+("_rotors.each(data[0], "+e()+",'"+this.uuid+"', '"+this.context.replace(/'/g,"\\'")+"');")+(this.context?";data.splice(0, 1);":"")+(";_rotors.pet(_eid, '"+this.uuid+"');")}},"r-if":{parse:function(t,e,n,o){t.test=t.atts.test},compile:function(t){var e,n="",o="",i=this.happyFlowChildren||this.children;for(e=0;e<i.length;e++)n+=i[e].compile(t)+";";if(null!=this.happyFlowChildren){for(o="else {",e=0;e<this.children.length;e++)o+=this.children[e].compile(t)+";";o+="}"}return";with (data[0]) { if("+this.test+") { "+n+" }"+o+"}"}},"r-else":{remove:!0,parse:function(t,e,n,o,i){var r=b.peek(i);null!=r&&"r-if"===r.tag&&(r.happyFlowChildren=r.children,r.children=[])},compile:function(t){}},"r-for":{parse:function(t,e,n,o,i){t.loop=t.atts.loop},compile:function(t){var e="";e+="var __limit; with(data[0]){__limit=("+this.loop+");}",e+="for(var $index=0;$index<__limit;$index++){data[0].$index=$index;";for(var n=0;n<this.children.length;n++)e+=this.children[n].compile(t)+";";return e+="}delete data[0].$index;"}},"r-tmpl":{remove:!0,parse:function(t,e,n,o,i,r){if(t.type="template",t.context=t.atts.context,t.atts.lookup)t.lookup=t.atts.lookup,t.default=t.atts.default||"",t.compile=function(e){return';with(data[0]){var tlid=eval("'+t.lookup.replace(/[\$\{\}]/g,"")+'");}if (_rotors.templateCache[tlid] == null){var ___t = _rotors.templateResolver(tlid) || _rotors.templateResolver("'+t.default+'");_rotors.templateCache[tlid]=_rotors.compile(_rotors.parse(___t));} eval(_rotors.templateCache[tlid].functionBody);'};else{t.templateId=t.atts.id;var s=function(t){if(null==t||0===t.length)return!1;for(var e=t.length-1;e>-1;e--)if("each"===t[e].type)return!0;return!1}(i);if(-1!==r.indexOf(t.templateId)){if(!s)throw new TypeError("recursive template call ["+t.templateId+"]");t.compile=function(e){return";eval(_rotors.templateCache['"+t.templateId+"'].functionBody);"}}else{var a=n(t.templateId);r.push(t.templateId);var l=o.parse(a,n,null,r);null==o.templateCache[t.templateId]&&(o.templateCache[t.templateId]=o.compile(l));for(var u=0;u<l.length;u++)l[u].context=t.context;o.debug("nested ast",l),t.children=l,r.pop()}}},precompile:function(t){return this.context?';data.unshift(_rotors.data(data[0], "'+this.context+'"));':""},postcompile:function(t){return this.context?";data.splice(0, 1);":""}},"r-html":{parse:function(t,e,n,o){},compile:function(t){try{return";var __hp=_rotors.parse(data[0]."+this.children[0].bindings.__element.e[0][1]+"),__hc=_rotors.compile(__hp,true);var __f=__hc(data[0], _rotors);Rotors.peek(_els).appendChild(__f.childNodes[0]);"}catch(e){return t.maybeDebug("Could not find key to bind for r-html element. Should be in the form <r-html>${key}</r-html> ('key' can be anything)"),""}}}},globalTags:{},registerTag:function(t,e,n){this[n?"globalTags":"customTags"][t]=new function(t,e,n){var i=function(e,n){for(var i=[],r=0;r<e.length;r++){var s=o({},e[r]);i.push(s),o(s.atts,n.atts,function(e,n){d(e,n,s,null,t)})}return i}.bind(this);this.template=n.template,this.getFunctionBody=function(e){return t.compile(i(t.parse(n.template,null,{originalCustomTag:e.tag,context:e.context}),e),!1,!0,!0)}.bind(this),this.getFunctionEnd=function(){return";_els.pop();"},this.rendered=n.rendered||function(){},this.updated=n.updated||function(){}}(this,t,e)},setAttribute:function(t,e,n){var o=e.split(":");1===o.length||null==this.namespaces[o[0]]?t.setAttribute(o[0],n):t.setAttributeNS(this.namespaces[o[0]],o[1],n)},setToggleManager:function(t){this.toggleManager=t},debugEnabled:!1,debug:function(){this.debugEnabled&&console.log.apply(console,arguments)},maybeDebug:function(){this.debugEnabled&&arguments[0]&&console.log.apply(console,arguments)},parse:function(t,e,n,o){o=o||[],e=m(this,e||this.templateResolver,null);var i=[],r=[],s=function(t,e){var n=t.match(e);return null!=n&&n},a=function(){return i.length>0?i[i.length-1]:null},l=function(t,e){i.length>0&&a().children.push(t),e?0==i.length&&r.push(t):i.push(t)},d=function(){var t=i.pop();if(0!==i.length||t.discard){if(t.discard){var e=b.peek(i);e&&e.children.pop()}}else r.push(t);return t},g=function(t,e,n,o,r){var s=new f(t,o),a=o.customElements[s.tag];return a&&(a.parse(s,e,n,o,i,r),a.compile&&(s.compile=a.compile),s.precompile=a.precompile,s.postcompile=a.postcompile,s.custom=!0,s.remove=a.remove,o.debug("  element is a custom element"),o.maybeDebug(s.remove,"  element's root should not appear in output")),s},v=[{re:this.commentRe,handler:function(t,e,n,o){o.debug("comment",t,e),l(new function(t){this.uuid=h(),this.comment=t,this.compile=function(){return""}}(t),!0)}},{re:this.openRe,handler:function(t,e,n,o,i){o.debug("open element",t,e);var r=g(t,e,n,o,i);l(r,r.remove)}},{re:this.closeRe,handler:function(t,e,n,o){o.debug("close element",t,e);var i=o.customElements[e[1]];if(null==i||!i.remove){if(r=e[1],null==(s=a())||s.tag!=r)throw new TypeError("Unbalanced closing tag '"+e[1]+"'; opening tag was '"+d().tag+"'");var r,s;d()}}},{re:this.openCloseRe,handler:function(t,e,n,o,i){o.debug("open and close element",t,e);var r=g(t,e,n,o,i);l(r,!0)}},{re:/.*/,handler:function(t,e,n,o){o.debug("text node",t);var i=new function(t,e){p.apply(this,arguments),this.value=t.value,this.type="text",this.bindings={};var n=function(){return"_rotors.bind(data[0], '"+this.bindings.__element.u+"', typeof $key !== 'undefined' ? $key : null, typeof $value !== 'undefined' ? $value : null)"}.bind(this);this.compile=function(t){return t.getExecutionContent(n(),this.uuid,!0)+";_rotors.pet(_eid, '"+this.uuid+"');"},this.update=function(t,e){t.nodeValue=this.bindings.__element.reapply(e)}}({value:t},o);l(i,!0),c("__element",t,i,null,o)}}];if(function(t,e){for(var n=0;n<t.length;n++){var o=t[n];null!=o&&0!==o.length&&e(n,o)}}(u(t).split(this.tokenizerRe),function(t,n){for(var i=u(n),r=0;r<v.length;r++){var a=s(i,v[r].re);if(a){v[r].handler(n,a,e,this,o);break}}}.bind(this)),r.length>0&&n)for(var y in n)r[0][y]=n[y];return r},compile:function(t,e,n,o){for(var i=[],r=0;r<t.length;r++){var s="";t[r].precompile&&(s+=t[r].precompile(this)),s+=t[r].compile(this,o),t[r].postcompile&&(s+=t[r].postcompile(this)),i.push(s)}var a=i.join("");if(this.debug("function body :",a),n)return a;var l=new Function("data,_rotors","data=[data||{}];var frag=_rotors.cf(),_els=[],e,_le,__a,$value,$key,_eid = _rotors.nec();_els.push(frag);"+a+"return frag;"),u=this;if(e)return l;var c=function(t){return l.apply(this,[t,u])};return c.functionBody=a,c},nec:function(){var t=this.uuid();return this.executions[t]={current:[{children:[]}]},t},te:function(t,e,n,o){var i={el:t,children:[],id:n,index:o};this.executions[e].current[0].children.push(i);var r=n+(null!=o?"-"+o:"");this.executions[e][r]=i,this.executions[e].current.unshift(i)},pet:function(t,e){this.executions[t].current=this.executions[t].current.splice(1)},getExecutionContent:function(t,e,n,o,i){return(null!=o?this.namespaceHandlers[o](t):n?"e=_rotors.ctn("+t+");":"e=_rotors.ce('"+t+"');")+"Rotors.peek(_els).appendChild(e);"+(n?"":"_els.push(e);")+"e._rotors=_rotors.entries['"+e+"'];e._rotorsEid=_eid;if(typeof _rotorsLoopId !== 'undefined') {e._rotorsLoopId=_rotorsLoopId;e._rotorsLoopIndex=_rotorsLoopIndex;e._rotorsLoopContext=_rotorsLoopContext;}_rotors.te(e, _eid, '"+e+"', typeof _rotorsLoopIndex != 'undefined' ? _rotorsLoopIndex : null);"},updaters:{},onUpdate:function(t,e){if(null!=t._rotors){var n=t._rotors.instance;t._RotorsUpdate=t._RotorsUpdate||h(),n.updaters[t._RotorsUpdate]=n.updaters[t._RotorsUpdate]||[],n.updaters[t._RotorsUpdate].push(e)}},update:function(t,e){var n,o,i=[],r=t._rotorsEid;if(null!=r&&null!=t._rotors){n=(o=t._rotors.instance).executions[r];var s=t._rotorsLoopIndex;!function t(e,n,r){null!=e&&(e._rotors.update(e,n),e._RotorsUpdate&&o.updaters[e._RotorsUpdate]&&i.push([e,o.updaters[e._RotorsUpdate],n]));for(var s=0;s<r.children.length;s++){var a=o.entries[r.children[s].id],l="each"===o.entries[r.id].type&&null!=r.children[s].el&&null!=r.children[s].el._rotorsLoopIndex?n[r.children[s].el._rotorsLoopIndex]:o.data(n,a.context);t(r.children[s].el,l,r.children[s])}}(t,e,n[t._rotors.uuid+(null!=s?"-"+s:"")]);for(var a=0;a<i.length;a++)for(var l=i[a],u=0;u<l[1].length;u++)try{l[1][u](l[0],l[2])}catch(t){}}},updateExternal:function(t,e){var n,o,r;e=e||{};!function t(s){if(s.nodeType===Node.ELEMENT_NODE){for(var a=0,l=s.attributes.length;a<l;a++)"rotors"===(n=s.attributes[a]).name?(o=n.value,s.innerHTML=i(e,o)):0===n.name.indexOf("rotors-")&&(o=n.value,r=n.name.substring(7),s.setAttribute(r,i(e,o)));for(a=0;a<s.childNodes.length;a++)t(s.childNodes[a])}}(t)},remove:function(t){t._RotorsUpdate&&this.updaters[t._RotorsUpdate]&&delete this.updaters[t._RotorsUpdate],t._rotorsEid&&this.executions[t._rotorsEid]&&delete this.executions[t._rotorsEid]},template:function(t,e,n,o){var i,r=o?null:this.templateCache[t];if(null!=r)return i=r(e),this.isOldIE()?i.childNodes[0]:i;var s=(n=m(this,n||this.templateResolver,o))(t);if(null!=s){var a=this.parse(s,n,null,[t]),l=this.compile(a);return this.templateCache[t]=l,i=l(e),this.isOldIE()?i.childNodes[0]:i}return this.cf()},precompileTemplate:function(t,e){var n=this.parse(t,e||this.templateResolver);return this.compile(n,!0)},precompileTemplates:function(t,e){var n=function(n){return t[n]||(e||this.templateResolver)(n)},o={};for(var i in t)o[i]=this.precompileTemplate(t[i],n);return o},importTemplate:function(t,e){var n=this;e="string"==typeof e?Function("data","_rotors",e):e,this.templateCache[t]=function(t){return e.apply(n,[t,n])}},importTemplates:function(t){for(var e in t)this.importTemplate(e,t[e])},importBindings:function(t){for(var e in this.bindings=this.bindings||{},t){var n=t[e];this.bindings[e]={e:n.e,u:n.u,w:n.w,reapply:Function("$data",n.reapply)}}}});var b=t.Rotors={newInstance:function(t){return new v(t)},precompile:function(e,n){n=n||"rotors";var o=t.Rotors.newInstance(),i={},r=new RegExp("<script type=['\"]"+n+"['\"] id=['\"]([^'\"]+)['\"]>((.*\n)*?)<\/script>","g"),s=[{},null,e.replace(r,function(t,e,n){return i[e]=n,""})];for(var a in i)s[0][a]=String(o.precompileTemplate(i[a],function(t){return i[t]})).replace(/^function\s*\S+\s*\([^)]*\)\s*\{|\}$/g,"");return s[1]=function(t){var e={};for(var n in t.bindings){var o=t.bindings[n];e[n]={e:o.e,u:o.u,w:o.w,reapply:String(o.reapply).replace(/^function\s*\S+\s*\([^)]*\)\s*\{|\}$/g,"")}}return e}(o),s},data:i,version:"0.3.17",peek:function(t){return t.length>0?t[t.length-1]:null}};"undefined"!=typeof exports&&(exports.Rotors=b,exports.RotorsInstance=v)}.call("undefined"!=typeof window?window:this),function(){var t=this;t.jsPlumbToolkitUtil=t.jsPlumbToolkitUtil||{};var e,n,o=t.jsPlumbToolkitUtil;o.requestAnimationFrame=(e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,n){t.setTimeout(e,10)},n=t,function(){return e.apply(n,arguments)});o.ajax=function(t){var e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n=t.type||"GET";if(e){var o="json"===t.dataType?function(t){return JSON.parse(t)}:function(t){return t};e.open(n,t.url,!0);var r=t.headers||{};for(var s in r)e.setRequestHeader(s,r[s]);e.onreadystatechange=function(){4===e.readyState&&("2"===(""+e.status)[0]?t.success(o(e.responseText)):t.error&&t.error(e.responseText,e.status))},e.send(t.data?i()(t.data):null)}else t.error&&t.error("ajax not supported")},o.debounce=function(t,e){e=e||150;var n=null;return function(){window.clearTimeout(n),n=window.setTimeout(t,e)}},o.xml={setNodeText:function(t,e){t.text=e;try{t.textContent=e}catch(t){}},getNodeText:function(t){return null!=t?t.text||t.textContent:""},getChild:function(t,e){for(var n=null,o=0;o<t.childNodes.length;o++)if(1===t.childNodes[o].nodeType&&t.childNodes[o].nodeName===e){n=t.childNodes[o];break}return n},getChildren:function(t,e){for(var n=[],o=0;o<t.childNodes.length;o++)1===t.childNodes[o].nodeType&&t.childNodes[o].nodeName===e&&n.push(t.childNodes[o]);return n},xmlToString:function(t){try{return(new XMLSerializer).serializeToString(t).replace(/\s*xmlns=\"http\:\/\/www.w3.org\/1999\/xhtml\"/g,"")}catch(e){try{return t.xml}catch(t){throw new Error("Cannot serialize XML "+t)}}},createElement:function(t,e,n){var o;try{o=new ActiveXObject("Microsoft.XMLDOM").createNode(1,t,"")}catch(e){o=document.createElement(t)}if(n&&jsPlumbToolkitUtil.xml.setNodeText(o,n),e)for(var i in e)o.setAttribute(i,e[i]);return o}}}.call("undefined"!=typeof window?window:this),function(){this.jsPlumbToolkitUtil=this.jsPlumbToolkitUtil||{};var t=this.jsPlumbToolkitUtil,e=this.jsPlumbUtil;t.fastTrim=function(t){for(var e=t.replace(/^\s\s*/,""),n=/\s/,o=e.length;n.test(e.charAt(--o)););return e.slice(0,o+1)},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},t.each=function(t,e){t=null==t.length||"string"==typeof t?[t]:t;for(var n=0;n<t.length;n++)e(t[n])},t.map=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(e(t[o]));return n},t.populate=function(t,n){return function t(o){if(null!=o){if(e.isString(o))return function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var o=0;o<e.length;o++){var i=n[e[o].substring(2,e[o].length-1)];i&&(t=t.replace(e[o],i))}return t}(o);if(e.isArray(o)){for(var i=[],r=0;r<o.length;r++)i.push(t(o[r]));return i}if(e.isObject(o)){for(var r in i={},o)i[r]=t(o[r]);return i}return o}}(t)},t.mergeWithParents=function(t,n,o){o=o||"parent";var i=function(t){return t?n[t]:null},r=function(t){return t?i(t[o]):null},s=function t(e){if(null==e)return{};if("string"==typeof e)return i(e);if(e.length){for(var n,o=!1,r=0;!o&&r<e.length;)(n=t(e[r]))?o=!0:r++;return n}}(t);return s?function t(n,o){if(null==n)return o;var i=e.merge(n,o);return t(r(n),i)}(r(s),s):{}},"undefined"!=typeof exports&&(exports.jsPlumbToolkitUtil=t)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb,e=this.jsPlumbUtil,n="startNodeTraversal",o="endNodeTraversal",i="startOverlayAnimation",r="endOverlayAnimation",s="jtk-animate-node-traversing",a="jtk-animate-edge-traversing";t.Connection.prototype.animateOverlay=function(l,u){var c=this,d=new e.EventGenerator,h=c.getConnector().getLength();u=u||{};var p,f,g,m=e.uuid(),v=!1!==u.forwards,b=u.rate||30,y=u.dwell||250,x=1/(h/(u.speed||100)*1e3/b)*(v?1:-1),C=!1!==u.isFinal,P=v?0:1,E=P,j=v?c.source:c.target,w=v?c.target:c.source;if("string"==typeof l)g=[l,{location:P,id:m}];else{var S=t.extend({},l[1]);S.location=P,S.id=m,g=[l[0],S]}var k=function(){E+=x,(v?E>=1:E<=0)?(c.removeOverlay(m),window.clearInterval(p),C?(t.addClass(w,s),window.setTimeout(function(){t.removeClass(w,s),c.removeClass(a),d.fire(r,c)},y)):(c.removeClass(a),d.fire(r,c))):(f.loc=E,c.repaint())},T=function(){d.fire(n,{connection:c,element:j}),t.addClass(j,s),c.addClass(a),window.setTimeout(function(){t.removeClass(j,s),d.fire(o,{connection:c,element:j}),d.fire(i,c),f=c.addOverlay(g),p=window.setInterval(k,b)},y)};return u.previous?u.previous.bind(r,T):T(),d}}.call("undefined"==typeof window?this:window),function(){var t=["node","port","edge","group"],e=["Added","Removed","Updated","Moved"],n=["edge"],o=["Source","Target"],i=function(t,e,n,o){for(var i=0;i<t.length;i++)for(var r=0;r<e.length;r++)n.bind(t[i]+e[r],o)};this.jsPlumbToolkitUtil.AutoSaver=function(r,s,a,l,u,c,d){function h(t){return function(){t&&t.apply(t,arguments),d&&d()}}var p=!1,f=function(){if(!p){try{c&&c()}catch(t){}r.save({url:s,success:h(l),error:h(u),headers:a})}};r.bind("dataLoadStart",function(){p=!0}),r.bind("dataLoadEnd",function(){p=!1}),r.bind("graphClearStart",function(){p=!0}),r.bind("graphCleared",function(){p=!1}),i(t,e,r,f),i(n,o,r,f)},this.jsPlumbToolkitUtil.CatchAllEventHandler=function(r){var s=function(){r.fire("dataUpdated")};i(t,e,r,s),i(n,o,r,s)}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkitUtil,e=this.jsPlumbUtil;t.Selection=function(n){e.EventGenerator.apply(this,arguments);var o,i=n.toolkit,r=[],s=[],a=[],l=Math.Infinity,u=Math.Infinity,c=Math.Infinity,d=n.generator,h={},p=this,f=n.onClear||function(){},g=function(t){return"Edge"===t.objectType?a:"Node"===t.objectType?r:s},m=function(t,e){var n=t.objectType.toLowerCase()+e,o={Group:{data:t.data,group:t},Node:{data:t.data,node:t},Port:{data:t.data,node:t.node,port:t},Edge:{data:t.data,edge:t}};p.fire(n,o[t.objectType])};this.getModel=i.getModel,this.setSuspendGraph=i.setSuspendGraph,this.getNodeId=i.getNodeId,this.getGroupId=i.getNodeId,this.getEdgeId=i.getEdgeId,this.getPortId=i.getPortId,this.getNodeType=i.getNodeType,this.getGroupType=i.getNodeType,this.getEdgeType=i.getEdgeType,this.getPortType=i.getPortType,this.getObjectInfo=i.getObjectInfo,this.isDebugEnabled=i.isDebugEnabled;var v=function(e,n){if(!h[e.getFullId()]){var i=function(e){var n=[],i=g(e),r="Edge"===e.objectType?u:"Node"===e.objectType?l:c;if(i.length>=r){if(o===t.Selection.DISCARD_NEW)return!1;n=i.splice(0,1),m(n[0],"Removed"),delete h[n[0].getFullId()]}return i.push(e),m(e,"Added"),n}(e);return!1===i?[[],[]]:(h[e.getFullId()]=e,n&&n(e,!0),[[e],i])}return[[],[]]},b=function(t,n){return e.removeWithFunction(g(t),function(e){return e.id==t.id})&&m(t,"Removed"),delete h[t.getFullId()],n&&n(t,!1),[[],[]]},y=function(t,e){return h[t.getFullId()]?b(t,e):v(t,e)},x=function(t,n,o){var r,s=[],a=[];if(null==t)return s;return function t(l){var u;if(e.isString(l))null!=(u=i.getNode(l)||i.getEdge(l)||i.getGroup(l))&&(r=n(u,o),s.push.apply(s,r[0]),a.push.apply(a,r[1]));else if(l.eachNode&&l.eachEdge)l.eachNode(function(e,n){t(n)}),l.eachEdge(function(e,n){t(n)}),l.eachGroup&&l.eachGroup(function(e,n){t(n)});else if(l.each)l.each(function(e,n){t(n.vertex||n)});else if(null!=l.length)for(var c=0;c<l.length;c++)t(l[c]);else r=n(l,o),s.push.apply(s,r[0]),a.push.apply(a,r[1])}(t),[s,a]}.bind(this);i.bind("nodeRemoved",function(t){b(t.node)}),i.bind("groupRemoved",function(t){b(t.group)}),i.bind("portRemoved",function(t){b(t.port)}),i.bind("edgeRemoved",function(t){b(t.edge)}),i.bind("edgeTarget",function(t){h[t.edge.getFullId()]&&p.fire("edgeTarget",t)}),i.bind("edgeSource",function(t){h[t.edge.getFullId()]&&p.fire("edgeSource",t)}),i.bind("nodeUpdated",function(t){h[t.node.getFullId()]&&p.fire("nodeUpdated",t)}),i.bind("groupUpdated",function(t){h[t.group.getFullId()]&&p.fire("groupUpdated",t)}),i.bind("edgeUpdated",function(t){h[t.edge.getFullId()]&&p.fire("edgeUpdated",t)}),i.bind("portUpdated",function(t){h[t.port.getFullId()]&&p.fire("portUpdated",t)}),this.remove=function(t,e){return x(t,b,e)},this.append=function(t,e){return x(t,v,e)},this.toggle=function(t,e){return x(t,y,e)},this.setMaxNodes=function(t){l=t},this.setMaxEdges=function(t){u=t},this.setCapacityPolicy=function(t){o=t},this.clear=function(t){r.length=0,a.length=0,s.length=0,h={},t||f(this)},this.reload=function(){if(null!=d){var t;for(this.clear(),this.fire("dataLoadStart"),d(this,i),t=0;t<s.length;t++)p.fire("groupAdded",s[t]);for(t=0;t<r.length;t++)p.fire("nodeAdded",r[t]);for(t=0;t<a.length;t++)p.fire("edgeAdded",a[t]);this.fire("dataLoadEnd")}},this.each=function(t,n){for(var o="Edge"===n?a:"Group"===n?s:r,i=0;i<o.length;i++)try{t(i,o[i])}catch(t){e.log("Selection iterator function failed",t)}},this.eachNode=this.each,this.eachGroup=function(t){this.each(t,"Group")},this.eachNodeOrGroup=function(t){this.each(t,"Node"),this.each(t,"Group")},this.eachEdge=function(t){this.each(t,"Edge")},this.getNodeCount=function(){return r.length},this.getNodeAt=function(t){return r[t]},this.getNodes=function(){return r},this.getNode=i.getNode,this.getGroupAt=function(t){return s[t]},this.getGroups=function(){return s},this.getGroup=i.getGroup,this.getGroupCount=function(){return s.length},this.getAll=function(){var t=[];return Array.prototype.push.apply(t,r),Array.prototype.push.apply(t,a),Array.prototype.push.apply(t,s),t},this.getAllEdgesFor=function(t){for(var e=t.getAllEdges(),n=[],o=0;o<e.length;o++)null!=h[e[o].getId()]&&n.push(e[o]);return n},this.getEdgeCount=function(){return a.length},this.get=this.getNodeAt=function(t){return r[t]},this.getEdge=this.getEdgeAt=function(t){return a[t]},this.setCapacityPolicy(t.Selection.DISCARD_EXISTING)},t.Selection.DISCARD_EXISTING="discardExisting",t.Selection.DISCARD_NEW="discardNew"}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbGraph={};t.version="0.1",t.name="jsPlumbGraph";var e=function(t,e){var n={};this.setAttribute=function(t,e){n[t]=e},this.getAttribute=function(t){return n[t]};var o=e.getType(t||{});this.getType=function(){return o},this.setType=function(t){o=t},this.graph=e},n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},o=function(t,e,o){return null==t?n():"string"==typeof t?t:(e||o.getIdFunction())(t)||n()},i=t.Vertex=t.Node=function(n,i,s){e.apply(this,[n,s]),this.objectType="Node",this.id=o(n,i,s),this.data=function(t){return"string"==typeof t?{id:t}:t}(n),this.getFullId=function(){return this.id};var a=[],l=0,u=0,c=[],d=[],h={};this.getEdges=function(t){if(null==t||null==t.filter)return a;for(var e=[],n=0;n<a.length;n++)t.filter(a[n])&&e.push(a[n]);return e},this.getSourceEdges=function(){return this.getEdges({filter:function(t){return t.source==this}.bind(this)})},this.getTargetEdges=function(){return this.getEdges({filter:function(t){return t.target==this}.bind(this)})},this.addEdge=function(t){a.push(t),t.source!==this&&t.isDirected()||u++,t.target!==this&&t.isDirected()||l++},this.deleteEdge=function(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].getId()===t.getId()){e=n;break}return e>-1&&(a.splice(e,1),t.source!==this&&t.isDirected()||u--,t.target!==this&&t.isDirected()||l--,!0)},this.getAllEdges=function(t){for(var e=this.getEdges(t).slice(0),n=0;n<c.length;n++)e.push.apply(e,c[n].getEdges(t));return e},this.addGraph=function(e){return e="string"==typeof e?new t.Graph({id:e}):e,d.push(e),e.id||(e.id=""+d.length),e},this.getGraph=function(t){for(var e=0;e<d.length;e++)if(d[e].id===t)return d[e]},this.getIndegreeCentrality=function(){for(var t=0,e=0;e<c.length;e++)t+=c[e].getIndegreeCentrality();return l+t},this.getOutdegreeCentrality=function(){for(var t=0,e=0;e<c.length;e++)t+=c[e].getOutdegreeCentrality();return u+t},this.getPorts=function(){return c},this.addPort=function(t,e){var n=o(t,e,s),i=this.getPort(n);return null==i&&(i=new r(t,e,this),c.push(i),h[i.id]=i),i},this.setPort=function(t,e){var n=this.getPort(t);return n||(n=this.addPort({id:t})),n.data=e,n.setType(this.graph.getType(e)),n},this.getPort=function(t){return h[t]};var p=function(e){return e.constructor==t.Port?e.id:e};this.removePort=function(t){if(t){for(var e=p(t),n=-1,o=!1,i=0;i<c.length;i++)if(c[i].id===e){n=i;break}if(-1!=n){var r=c[n];s.deleteVertex(r),c.splice(n,1),o=!0}delete h[e]}return o};var f=0,g={};this.setDefaultInternalCost=function(t){f=t},this.getInternalEdge=function(t,e){var n=p(t),o=p(e),i={source:h[n],target:h[o],cost:1/0};if(i.source&&i.target){var r=g[n+"-"+o]||{cost:f,directed:!1};for(var s in r)i[s]=r[s]}return i},this.setInternalEdge=function(t,e,n,o){var i=p(t),r=p(e);return g[i+"-"+r]={cost:n||f,directed:o},this.getInternalEdge(t,e)},this.inspect=function(){for(var t="{ id:"+this.id+", edges:[\n",e=0;e<a.length;e++)t+=a[e].inspect()+"\n";return t+="]}"}},r=t.Port=function(t,e,n){i.apply(this,[t,e,n.graph]),this.objectType="Port",this.getNode=function(){return n},this.getFullId=function(){return n.id+this.graph.getPortSeparator()+this.id},this.isChildOf=function(t){return n==t},this.getPorts=this.addPort=this.deletePort=this.getPort=null},s=t.Edge=function(t){e.call(this,t.data,t.graph),this.source=t.source,this.target=t.target,this.objectType="Edge";var n=t.cost||1,o=!(!1===t.directed),i=t.id;this.data=t.data||{},this.getCost=function(){return n},this.setCost=function(t){n=t},this.getId=this.getFullId=function(){return null===i?this.source.id+"_"+this.target.id:i},this.setId=function(t){i=t},this.isDirected=function(){return o},this.setDirected=function(t){o=t},this.inspect=function(){if(null!=i)return"{ id:"+i+", connectionId:null, cost:"+n+", directed:"+o+", source:"+this.source.id+", target:"+this.target.id+"}"}},a=t.Group=function(t,e,n){i.apply(this,arguments),this.objectType="Group";var o=[],r={};this.addVertex=this.addNode=function(t){return null==r[t.id]&&(o.push(t),r[t.id]=t,t.group=this,!0)},this.getVertexCount=this.getNodeCount=function(){return o.length},this.getVertices=this.getNodes=function(){return o},this.deleteVertex=this.deleteNode=function(t){if(t="string"==typeof t?r[t]:t){var e=o.indexOf(t);-1!=e&&(o.splice(e,1),delete r[t.id]),delete t.group}},this.cleanup=function(t){var e,i=this.getAllDirectEdges(),r=i.length;for(e=0;e<r;e++)n.deleteEdge(i[0]);var s=o.length;for(e=0;e<s;e++)t?n.deleteVertex(o[0]):delete o[0].group;o.length=0},this.getAllDirectEdges=function(t){var e,n=[];n.push.apply(n,this.getEdges(t).slice(0));var o=this.getPorts();for(e=0;e<o.length;e++)n.push.apply(n,o[e].getEdges(t));return n},this.getAllEdges=function(t){for(var e=[],n={},i=0;i<o.length;i++)Array.prototype.push.apply(e,o[i].getAllEdges(t).filter(function(t){var e=t.getId(),o=null==n[e];return n[e]=!0,o}));return e.push.apply(e,this.getAllDirectEdges(t)),e}},l=t.Cluster=function(t){this.vertices=[t],this.addVertex=function(t){this.vertices.push(t)}},u=(t.Graph=function(e){e=e||{},this.vertices=[],this.edges=[],this.groups=[],this.id=e.id;var n={},r=0,u={},c=0,d={},f=0,g=!(!1===e.defaultDirected),m=e.defaultCost||1,v=e.idFunction||function(t){return t.id},b=e.typeFunction||function(t){return t.type||"default"},y=!0===e.enableSubgraphs,x=e.portSeparator||".",C={},P=function(t){delete C[t.id]},E=function(t){C[t.id]=t};this.setIdFunction=function(t){v=t},this.getIdFunction=function(){return v},this.setTypeFunction=function(t){b=t},this.getType=function(t){return b(t)},this.getTopLevelElements=function(){return C},this.setEnableSubgraphs=function(t){y=t},this.setPortSeparator=function(t){x=t},this.getPortSeparator=function(){return x};var j=function(e,o){if(null==e)return null;if("string"!=typeof e){if(e.constructor==t.Port||e.constructor==t.Node||e.constructor==t.Group)return e;var i=e;if("string"!=typeof(e=v(e)))return i}var r=y?e.split("/"):[e],s=function(t){if(n[t])return n[t];if(d[t])return d[t];var e=t.split(x),i=e[0],r=n[i]||d[i];if(2===e.length&&null!=r){var s=r.getPort(e[1]);return null==s&&o&&(s=r.addPort(e[1])),s}return r};if(1==r.length)return s(r[0]);if(r.length>1&&r%2==0)throw"Subgraph path format error.";for(var a=null,l=0;l<r.length-1;l+=2)a=s(r[l]).getGraph(r[l+1]);return a.getVertex(r[r.length-1])};this.clear=function(){this.vertices.length=0,this.groups.length=0,r=0,c=0,n={},u={},d={},C={}},this.getVertices=this.getNodes=function(){return this.vertices},this.getVertexCount=this.getNodeCount=function(){return this.vertices.length},this.getVertexAt=this.getNodeAt=function(t){return this.vertices[t]},this.getEdgeCount=function(){return c},this.addEdge=function(t,e,n){var i=null==t.directed?!0===g:!(!1===t.directed),r=t.cost||m,a=o(t.data,e,this),l=j(t.source,!0),d=j(t.target,!0);if(null==l||null==l.objectType)throw new TypeError("Unknown source node ["+t.source+"]");if(null==d||null==d.objectType)throw new TypeError("Unknown target node ["+t.target+"]");if(n&&!n(l,d))return null;var h=new s({source:l,target:d,cost:r,directed:i,data:t.data||{},id:a,graph:this});return h.source.addEdge(h),h.source!==h.target&&h.target.addEdge(h),u[a]=h,c++,h},this.addVertex=this.addNode=function(t,e){var o=new i(t,e||v,this);return n[o.id]?null:(this.vertices.push(o),n[o.id]=o,o._id=r++,E(o),o)},this.addVertices=this.addNodes=function(t,e){for(var n=0;n<t.length;n++)this.addVertex(t[n],e||v)},this.addGroup=function(t,e){var n=new a(t,e||v,this);return d[n.id]?d[n.id]:(this.groups.push(n),d[n.id]=n,n._id=f++,E(n),n)},this.getGroupCount=function(){return this.groups.length},this.getGroupAt=function(t){return this.groups[t]},this.addVertexToGroup=function(t,e){e="string"==typeof e?d[e]:e,(t=j(t))&&e&&(e.addVertex(t),P(t))},this.addVerticesToGroup=function(t,e){for(var n=0;n<t.length;n++)this.addVertexToGroup(t[n],e)},this.deleteVertexFromGroup=function(t){(t=j(t))&&t.group&&(t.group.deleteVertex(t),E(t))},this.deleteVerticesFromGroup=function(t,e){for(var n=0;n<t.length;n++)this.deleteVertexFromGroup(t[n],e)},this.deleteGroup=function(t,e){if(t="string"==typeof t?d[t]:t){t.cleanup(e),delete d[t.id];for(var n=-1,o=0;o<this.groups.length;o++)if(this.groups[o].id===t.id){n=o;break}return n>-1&&this.groups.splice(n,1),P(t),t}},this.getGroup=function(t){return"string"==typeof t?d[t]:t},this.deleteVertex=this.deleteNode=function(t){var e=j(t);if(e){for(var o=-1,i=0;i<this.vertices.length;i++)if(this.vertices[i].id===e.id){o=i;break}o>-1&&(this.vertices.splice(o,1),null!=e.group&&e.group.deleteVertex(e));for(var s=e.getEdges(),a=0;a<s.length;a++)this.deleteEdge(s[a]);if(c-=s.length,e.getPorts)for(var l=e.getPorts(),u=0;u<l.length;u++)this.deleteVertex(l[u]);delete n[e.id],r--,P(e)}},this.deleteEdge=function(t){if(null!=(t=this.getEdge(t))){var e=j(t.source);e&&e.deleteEdge(t)&&c--;var n=j(t.target);n&&n.deleteEdge(t),delete u[t.getId()]}},this.getEdge=function(e){if(null!=e){if("string"!=typeof e){if(e.constructor==t.Edge)return e;var n=e;if("string"!=typeof(e=v(e)))return n}return u[e]}},this.getEdges=function(t){var e,n=(t=t||{}).source,o=t.target,i=t.filter||function(){return!0},r=[],s=function(t){i(t)&&function(t){return!(null!=n&&t.source==a!==n||null!=o&&t.target==a!==o)}(t)&&r.push(t)};if(t.node){var a=j(t.node),l=a.getAllEdges();for(e=0;e<l.length;e++)s(l[e])}else for(e in u)s(u[e]);return r},this.getAllEdges=function(){var t=[];for(var e in u)t.push(u[e]);return t},this.findPath=function(t,e,n,o,i){return t=j(t),e=j(e),p.compute({graph:this,source:t,target:e,strict:!(!1===n),nodeFilter:o,edgeFilter:i})},this.getDistance=function(t,e,n){return this.findPath(t,e,n).pathDistance},this.getVertex=this.getNode=j,this.setTarget=function(t,e){if(null==(e=j(e)))return{success:!1};var n=t.target;return t.target.deleteEdge(t),t.target=e,e.addEdge(t),{old:n,edge:t,new:e,success:!0}},this.setSource=function(t,e){if(null==(e=j(e)))return{success:!1};var n=t.source;return t.source.deleteEdge(t),t.source=e,e.addEdge(t),{old:n,edge:t,new:e,success:!0}},this.printPath=function(t,e){t=j(t),e=j(e);for(var n=this.findPath(t,e).path,o="["+t.id+" - "+e.id+"] : ",i=0;i<n.length;i++)o=o+"{ vertex:"+n[i].vertex.id+", cost:"+n[i].cost+", edge: "+(n[i].edge&&n[i].edge.getId())+" } ";return o},this.getDiameter=function(t){for(var e=0,n=0;n<this.vertices.length;n++)for(var o=0;o<this.vertices.length;o++)if(o!=n){var i=p.compute({graph:this,source:this.vertices[n],target:this.vertices[o]});if(null==i.path||0==i.path.length){if(!t)return 1/0}else e=Math.max(e,i.pathDistance)}return e},this.diameter=this.getDiameter,this.getCentrality=function(t){return((t=j(t)).getIndegreeCentrality()+t.getOutdegreeCentrality())/(this.getVertexCount()-1)},this.getDegreeCentrality=this.getCentrality,this.getIndegreeCentrality=function(t){return(t=j(t)).getIndegreeCentrality()/(this.getVertexCount()-1)},this.getOutdegreeCentrality=function(t){return(t=j(t)).getOutdegreeCentrality()/(this.getVertexCount()-1)},this.getCloseness=function(t){return 1/this.getFarness(t)},this.getFarness=function(t){t=j(t);var e=p.compute({graph:this,source:t,target:t,processAll:!0}),n=0;for(var o in e.dist)n+=e.dist[o];return n/(this.getVertexCount()-1)},this.getBetweenness=function(t){var e=this.getVertexCount(),n=(e-1)*(e-2)/2,o=0,i=function t(e,n,o,i,r){var s=o.parents[e][n];if(0==s.length)(l=i.slice()).unshift(e),r.push(l);else for(var a=0;a<s.length;a++){var l;if(-1==i.indexOf(s[a][0].id))(l=i.slice()).unshift(s[a][0].id),t(e,s[a][0].id,o,l,r)}};t=j(t);var r=h.compute({graph:this,focus:t});for(var s in r.paths)for(var a in r.paths[s])if(s!=a){var l=[],u=0;i(s,a,r,[a],l);for(var c=0;c<l.length;c++){var d=l[c].indexOf(t.id);d>0&&d<l[c].length-1&&u++}o+=u/l.length,u}return o/n},this.inspect=function(){for(var t="",e=0;e<this.vertices.length;e++)t+=this.vertices[e].inspect()+"\n";return t},this.serialize=function(){for(var t,e,n,o,i={nodes:[],edges:[],ports:[],groups:[]},r=0;r<this.vertices.length;r++){t=this.vertices[r],i.nodes.push(t.data),e=t.getAllEdges(),n=t.getPorts();for(var s=0;s<e.length;s++)if(e[s].source==t||"Port"===e[s].source.objectType&&e[s].source.getNode()==t){var a={source:e[s].source.getFullId(),target:e[s].target.getFullId()};e[s].data&&(a.data=e[s].data),i.edges.push(a)}for(var l=0;l<n.length;l++){var u={};for(var c in n[l].data)u[c]=n[l].data[c];u.id=n[l].getFullId(),i.ports.push(u)}}for(r=0;r<this.groups.length;r++){o=this.groups[r],i.groups.push(o.data),e=o.getEdges();for(s=0;s<e.length;s++)if(e[s].source===o){a={source:o.getFullId(),target:e[s].target.getFullId()};e[s].data&&(a.data=e[s].data),i.edges.push(a)}}return i},this.getClusters=function(){var t,e=[],n={},o=function t(o,i){if(null!=o&&!n[o.id]){null==i?(i=new l(o),e.push(i)):i.addVertex(o),n[o.id]=!0;for(var r=o.getAllEdges(),s=0;s<r.length;s++){t(r[s].source===o?r[s].target:r[s].source,i)}}};for(t=0;t<this.vertices.length;t++)o(this.vertices[t]);for(t=0;t<this.groups.length;t++)o(this.groups[t]);return e}},function(t,e,n,o,i){for(var r=-1,s=null,a=1/0,l=0;l<t.length;l++)if(!e[l]){var u=i(t[l]);u<a&&(a=u,r=l,s=t[l])}return{node:s,index:r}}),c=function(t,e){var n=e.getFullId(),o=t[n];return null==o&&(o=t[n=e.getNode?e.getNode().id:e.id]),null==o?null:{p:o,id:n}},d=function(t,e,n,o,i,r){for(var s=[],a=o,l=c(e,a);null!=l;)s.splice(0,0,{vertex:a,cost:t[l.id],edge:n[l.id]}),a=l.p,l=c(e,a);return s.splice(0,0,{vertex:a,cost:0,edge:null}),s},h={getPath:function(t,e,n,o){if(t[n.id][o.id]==1/0)return null;var i=e[n.id][o.id];return null==i?" ":h.getPath(t,e,n,i)+" "+i.id+" "+h.getPath(t,e,i,o)},getPaths:function(t,e,n,o,i){if(t[n.id][o.id]==1/0)return null;var r=e[n.id][o.id];return 0==r.length?" ":h.getPaths(t,e,n,r[0])+" "+r[0].id+" "+h.getPaths(t,e,r[0],o)},compute:function(t){var e,n,o,i=t.graph,r=i.getVertexCount(),s={},a={};for(e=0;e<r;e++){var l=i.getVertexAt(e);for(s[l.id]||(s[l.id]={}),a[l.id]||(a[l.id]={}),s[l.id][l.id]=0,n=0;n<r;n++)if(e!=n){var u=i.getVertexAt(n);s[l.id][u.id]||(s[l.id][u.id]=1/0),a[l.id][u.id]||(a[l.id][u.id]=[])}var c=l.getEdges();for(o=0;o<c.length;o++)c[o].source==l?s[l.id][c[o].target.id]=c[o].getCost():(s[c[o].source.id]||(s[c[o].source.id]={},a[c[o].source.id]={}),s[l.id][c[o].source.id]=c[o].getCost())}for(o=0;o<r;o++)for(e=0;e<r;e++)for(n=0;n<r;n++)if(e!=n&&n!=o&&e!=o){var d=i.getVertexAt(e).id,h=i.getVertexAt(n).id,p=i.getVertexAt(o).id;s[d][p]+s[p][h]<=s[d][h]&&s[d][p]+s[p][h]!=1/0&&(s[d][h]=s[d][p]+s[p][h],a[d][h]||(a[d][h]=[]),a[d][h].unshift([i.getVertexAt(o),s[d][h]]))}return{paths:s,parents:a}}},p={compute:function(t){for(var e=t.graph,n=t.source,o=t.target,i=t.nodeFilter,r=t.edgeFilter,s={},a={},l={},c={dist:s,previous:a,edges:l,path:[]},h=t.processAll,p={},f={},g=!(!1===t.strict),m=function(t){return t.getFullId?t.getFullId():t.id},v=[],b=function(t){var e=f[t.getFullId()];return p[e.v.id]},y=function(t,e){var n,o;if("Port"===t.objectType){for(s[t.getFullId()]=e,n=b(t),o=0;o<n.length;o++)n[o].p!=t&&(s[n[o].p.getFullId()]=e+t.getNode().getInternalEdge(t,n[o].p).cost);g||(s[t.getNode().id]=e)}else for(s[t.id]=e,n=p[t.id],o=0;o<n.length;o++)s[n[o].p.getFullId()]=e},x=function(t){return i&&!i(t)?1/0:s[m(t)]},C=function(t,e,n){if("Port"===t.objectType){for(var o=b(t),i=0;i<o.length;i++)a[o[i].p.getFullId()]=n.node;g||(a[t.getNode().id]=n.node)}a[e]=n.node},P=function(t,e,n){if("Port"===t.objectType){for(var o=b(t),i=0;i<o.length;i++)l[o[i].p.getFullId()]=n;g||(l[t.getNode().id]=n)}l[e]=n},E=0;E<e.vertices.length;E++){var j=e.vertices[E],w=j.getPorts();v.push(j);var S={v:j,i:v.length-1};p[j.id]=[],y(j,1/0);for(var k=0;k<w.length;k++)v.push(w[k]),f[w[k].getFullId()]=S,p[j.id].push({p:w[k],i:v.length-1}),y(w[k],1/0)}if(null==n&&(n=e.getVertex(t.sourceId)),null==o&&(o=e.getVertex(t.targetId)),null==n||null==o)return c;n.getNode&&n.getNode(),o.getNode&&o.getNode(),y(n,0);for(var T=new Array(e.vertices.length),A=0,_=function(t,e,n,o){for(var i=0;i<e.length;i++){var r=e[i];if(n(r)){var s=o(r),a=s.tp||s.tn,l=m(a),u=x(t.node)+r.getCost();u<x(a)&&(y(a,u),C(a,l,t),P(a,l,r))}}};A<v.length;){var I=u(v,T,0,0,x),D=I.node?m(I.node):null;if(!I.node||x(I.node)==1/0)break;if(o&&(D==m(o)||!g&&I.node.isChildOf&&I.node.isChildOf(o))&&(c.path=d(s,a,l,o),c.pathDistance=c.path[c.path.length-1].cost,!h))break;T[I.index]=!0,A+=1,_(I,I.node.getAllEdges(),function(t){return!(r&&!r(t))&&(!t.isDirected()||I.node==t.source||!g&&t.source.isChildOf&&t.source.isChildOf(I.node))},function(t){var e=t.source.getNode?t.source.getNode():t.source,n=t.source.getNode?t.source:null,o=t.target.getNode?t.target.getNode():t.target,i=t.target.getNode?t.target:null;return t.source==I.node||!g&&t.source.isChildOf&&t.source.isChildOf(I.node)?{tn:o,tp:i}:{tn:e,tp:n}})}return c}}}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumbUtil,n=t.jsPlumb,o=t.jsPlumbToolkitUtil,i=t.jsPlumbGraph,r=function(t){return t.id};t.jsPlumbToolkitInstance=function(a){var l=(a=a||{}).idFunction||r,u=a.typeProperty||"type",c=a.edgeTypeProperty||"type",d=a.portTypeProperty||"type",h=a.typeFunction||function(t){return t[u]||"default"},p=a.edgeIdFunction||l,f=a.edgeTypeFunction||function(t){return t[c]||"default"},g=a.portIdFunction||l,m=a.portTypeFunction||function(t){return t[d]||"default"},v=a.portExtractor,b=a.portUpdater,y=this,x=!1,C=!1,P=a.model||{},E=function(t,n,i){n=null!=n&&e.isObject(n)?n:{},(n=e.clone(n)).id=n.id||o.uuid(),n.type=n.type||(null==t?null:t.type||t),i(n)},j=a.nodeFactory||E,w=a.edgeFactory||E,S=a.portFactory||E,k=a.groupFactory||E,T=a.autoSave&&a.saveUrl,A=a.saveUrl,_=a.saveHeaders,I=a.onAutoSaveSuccess||function(){},D=a.onAutoSaveError||function(){},M=!0===a.doNotUpdateOriginalData,N=a.onBeforeAutoSave||function(){},L=a.onAfterAutoSave||function(){},O={portSeparator:a.portSeparator,defaultCost:a.defaultCost,defaultDirected:a.defaultDirected,enableSubgraphs:a.enableSubgraphs},F=!0===a.createMissingGroups;e.EventGenerator.apply(this,arguments);var R=new i.Graph(O);T&&new o.AutoSaver(this,A,_,I,D,N,L),new o.CatchAllEventHandler(this),this.getNodeFactory=function(){return j},this.getGroupFactory=function(){return k},this.getEdgeFactory=function(){return w},this.getPortFactory=function(){return S},this.setNodeFactory=function(t){j=t},this.setGroupFactory=function(t){k=t},this.setEdgeFactory=function(t){w=t},this.setPortFactory=function(t){S=t},this.setDebugEnabled=function(t){C=t},this.isDebugEnabled=function(){return C},this.getModel=function(){return P||{}};var z,G=function(e,n){if(null==P)return!0;var o=this.getType(e),i=this.getType(n),r=(null==z&&(z=new t.jsPlumbToolkit.Model(P||{})),z),s=e.getNode?e.getNode():e,a=n.getNode?n.getNode():n,l="Node"==e.objectType?r.getNodeDefinition(o):r.getPortDefinition(o),u="Node"==n.objectType?r.getNodeDefinition(i):r.getPortDefinition(i),c=this.getNodeType(s),d=this.getNodeType(a),h=r.getNodeDefinition(c),p=r.getNodeDefinition(d);return!(null!=l.maxConnections&&e.getEdges().length>=l.maxConnections)&&(!(null!=u.maxConnections&&n.getEdges().length>=u.maxConnections)&&(e==n?!(!1===h.allowLoopback||!1===l.allowLoopback||!1===u.allowLoopback||!1===p.allowLoopback):s!=a||!(!1===h.allowNodeLoopback||!1===l.allowNodeLoopback||!1===u.allowNodeLoopback||!1===p.allowNodeLoopback)))}.bind(this);this.beforeConnect=a.beforeConnect||G,this.beforeMoveConnection=a.beforeMoveConnection||G,this.beforeStartConnect=a.beforeStartConnect||function(t,e){return{}},this.beforeDetach=a.beforeDetach||function(t,e,n){return!0},this.beforeStartDetach=a.beforeStartDetach||function(t,e){return!0},this.setSuspendGraph=function(t){x=t},this.setDoNotUpdateOriginalData=function(t){M=t},this.getTypeFunction=function(){return h},this.connect=function(t){var e;if(t=t||{},!x){var o=R.getVertex(t.source),i=R.getVertex(t.target),r=t.cost,a=t.directed;if(!o){if(t.doNotCreateMissingNodes)return;o=R.addVertex(t.source),y.fire("nodeAdded",{data:{},node:o})}if(!i){if(t.doNotCreateMissingNodes)return;i=R.addVertex(t.target),y.fire("nodeAdded",{data:{},node:i})}var l=this.beforeStartConnect(o,f(t.data||{}));if(l){var u=t.data||{};"object"===(void 0===l?"undefined":s()(l))&&n.extend(u,l),!1!==this.beforeConnect(o,i,u)&&(e=R.addEdge({source:o,target:i,cost:r,directed:a,data:u}),y.fire("edgeAdded",{edge:e}))}}return e},this.clear=function(){return this.fire("graphClearStart"),R.clear(),this.fire("graphCleared"),this},this.getGraph=function(){return R},this.getNodeCount=function(){return R.getVertexCount()},this.getNodeAt=function(t){return R.getVertexAt(t)},this.getNodes=function(){return R.getVertices()},this.eachNode=function(t){for(var e=0,n=R.getVertexCount();e<n;e++)t(e,R.getVertexAt(e))},this.eachGroup=function(t){for(var e=0,n=R.getGroupCount();e<n;e++)t(e,R.getGroupAt(e))},this.eachEdge=function(t){for(var e=R.getEdges(),n=0,o=e.length;n<o;n++)t(n,e[n])},this.getEdgeCount=function(){return R.getEdgeCount()},this.getGroupCount=function(){return R.getGroupCount()},this.getGroupAt=function(t){return R.getGroupAt(t)},this.getClusters=function(){return R.getClusters()},this.getNodeId=function(t){return e.isObject(t)?l(t):t},this.getNodeType=function(t){return h(t)||"default"},this.getEdgeId=function(t){return e.isObject(t)?p(t):t},this.getEdgeType=function(t){return f(t)||"default"},this.getPortId=function(t){return e.isObject(t)?g(t):t},this.getPortType=function(t){return m(t)||"default"},this.getType=function(t){return("Node"===t.objectType?h:"Port"===t.objectType?m:f)(t.data)||"default"},this.setType=function(t,e){var n=this.getType(t);if(n!==e){var o="Node"===t.objectType?u:"Port"===t.objectType?d:c,i=t.objectType.charAt(0).toLowerCase()+t.objectType.substring(1)+"TypeChanged";t.data[o]=e,this.fire(i,{obj:t,previousType:n,newType:e})}},this.addNode=function(e,n,i){var r=l(e);null==r&&"string"!=typeof e&&(e.id=o.uuid());var s=R.addNode(e,l);if(null!=s){if(null!=v){var a=v(s.data,s);if(null!=a)for(var u=0;u<a.length;u++)s.addPort(a[u])}if("string"!=typeof e&&null!=e.group){var c=this.getGroup(e.group);null==c&&F&&(c=R.addGroup(e.group)),null!=c&&c.addVertex(s)}return Z||M||t.jsPlumbToolkitIO.manage("addNode",B,W,s,l||R.getIdFunction(),y),i||y.fire("nodeAdded",{data:e,node:s,eventInfo:n}),s}return R.getNode(r)},this.addFactoryNode=function(t,e,n){e=2!==arguments.length||null!=arguments[1]&&"object"!==s()(arguments[1])?{}:arguments[1],n=3===arguments.length?arguments[2]:"function"==typeof arguments[1]?arguments[1]:null,e.type=e.type||t,j(t,e,function(t){var e=this.addNode(t);n&&n(e)}.bind(this))},this.addNodes=function(t){for(var e=0;e<t.length;e++)y.addNode.apply(y,[t[e]]);return y},this.addGroup=function(e,n,i){null==l(e)&&"string"!=typeof e&&(e.id=o.uuid());var r=R.addGroup(e,l);return Z||M||t.jsPlumbToolkitIO.manage("addGroup",B,W,r,l||R.getIdFunction(),y),i||y.fire("groupAdded",{data:e,group:r,eventInfo:n}),r},this.addToGroup=function(t,e){var n=!1;return t=y.getNode(t),e=y.getGroup(e),t&&e&&(n=e.addVertex(t))&&(t.data.group=e.id,y.fire("group:addMember",{node:t,group:this.getGroup(e)}),y.fire("dataUpdated")),n},this.removeFromGroup=function(t,e){var n;return(t=y.getNode(t))&&t.group&&((n=t.group).deleteVertex(t),delete t.data.group,e||y.fire("group:removeMember",{node:t,group:n}),y.fire("dataUpdated")),n},this.removeGroup=function(e,n,o){var i=R.deleteGroup(e,n);return i&&(Z||M||t.jsPlumbToolkitIO.manage("removeGroup",B,W,i,l||R.getIdFunction(),y),o||y.fire("groupRemoved",{group:i,removeChildNodes:n})),y},this.getNode=function(t){return R.getVertex(t)},this.getEdge=function(t){return R.getEdge(t)},this.getGroup=function(t){return R.getGroup(t)},this.exists=function(t){for(var e=0;e<arguments.length;e++)if(null==R.getVertex(arguments[e]))return!1;return!0},this.removeNode=function(e,n){for(var o=(e=e.constructor===i.Vertex||e.constructor===i.Port?e:R.getVertex(e)).getAllEdges()||[],r=0;r<o.length;r++)y.removeEdge(o[r]);return R.deleteVertex(e.id),Z||M||t.jsPlumbToolkitIO.manage("removeNode",B,W,e,l||R.getIdFunction(),y),n||y.fire("nodeRemoved",{node:e,nodeId:e.id,edges:o}),y},this.addEdge=function(e,n,o){var i=R.addEdge(e,p,this.beforeConnect);return Z||M||t.jsPlumbToolkitIO.manage("addEdge",B,W,i,p||R.getIdFunction(),y),o||y.fire("edgeAdded",{edge:i,source:n,geometry:e.geometry,addedByMouse:e.addedByMouse},null),i},this.removeEdge=function(e,n){return null!=(e=R.getEdge(e))&&(R.deleteEdge(e),Z||M||t.jsPlumbToolkitIO.manage("removeEdge",B,W,e,p||R.getIdFunction(),y),y.fire("edgeRemoved",{edge:e,source:n},null)),y},this.edgeMoved=function(t,e,n){t[0===n?"source":"target"];return this[0===n?"setSource":"setTarget"](t,e)},this.setTarget=function(t,e,n){var o=R.setTarget.apply(R,arguments);return!1===o.success||n||y.fire("edgeTarget",o),o},this.setSource=function(t,e,n){var o=R.setSource.apply(R,arguments);return!1===o.success||n||y.fire("edgeSource",o),o},this.addNewPort=function(e,n,o,i){e=R.getVertex(e),S({node:e,type:n},o,function(n){var o=g(n),r=e.addPort(o);r.data=n,V(e),Z||M||t.jsPlumbToolkitIO.manage("addPort",B,W,{node:e,port:r},g||R.getIdFunction(),y),i||y.fire("portAdded",{node:e,data:n,port:r},null)})},this.addPort=function(e,n,o){var i=e.addPort(n,g);return V(e),Z||M||t.jsPlumbToolkitIO.manage("addPort",B,W,{node:e,port:i},g||R.getIdFunction(),y),o||y.fire("portAdded",{node:e,data:n,port:i},null),i},this.removePort=function(t,e,n){var o=!1,r=(t=t.constructor===i.Vertex||t.constructor===i.Port?t:R.getVertex(t)).getPort(e);if(r){var s=r.getAllEdges();if((o=t.removePort(r))&&!n){V(t),y.fire("portRemoved",{node:t,port:r,edges:s},null);for(var a=0;a<s.length;a++)y.removeEdge(s[a])}}return o},this.remove=function(t){if(null!=t){var e=y.getObjectInfo(t);y.setSuspendRendering(!0);try{if(!e.obj||"Node"!==e.type&&"Edge"!==e.type&&"Group"!==e.type){for(;t.getNodeCount()>0;)y.removeNode(t.getNodeAt(0));for(;t.getEdgeCount()>0;)y.removeEdge(t.getEdgeAt(0));for(;t.getGroupCount()>0;)y.removeGroup(t.getGroupAt(0))}else y["remove"+e.type](e.obj)}finally{y.setSuspendRendering(!1,!0)}}},this.setSuspendRendering=function(t,e){for(var n in $)$[n].setSuspendRendering(t,e)},this.batch=function(t){y.setSuspendRendering(!0);try{t()}catch(t){jsPlumbUtil.log("Error in transaction "+t)}finally{y.setSuspendRendering(!1,!0)}};var U=function(t,o,i,r,s){var a=R.getNode(t);if(a&&a.objectType){var l=n.extend({},a.data);if(o){for(var u in o)e.replace(a.data,u,o[u]);"Port"===a.objectType&&V(a.getNode())}y.fire(i,r(a,l),null)}}.bind(this),V=function(t){if(null!=b){var e=b(t.data,t,t.getPorts());null!=e&&(t.data=e)}};this.updateNode=function(t,e){U(t,e,"nodeUpdated",function(t,n){return{node:t,updates:e||{},originalData:n}})},this.updatePort=function(t,e){U(t,e,"portUpdated",function(t,n){return{port:t,node:t.getNode(),updates:e||{},originalData:n}})},this.updateEdge=function(t,o){var i=R.getEdge(t);if(i){var r=n.extend({},i.data);if(o)for(var s in o)null==i.data[s]?i.data[s]=o[s]:e.replace(i.data,s,o[s]);y.fire("edgeUpdated",{edge:i,updates:o||{},originalData:r},null)}},this.update=function(t,n){return e.isString(t)&&(t=this.getNode(t)),t&&t.objectType&&this["update"+t.objectType](t,n),t},this.getPath=function(e){return new t.jsPlumbToolkit.Path(this,e)};var B,W,Z,H=this.findGraphObject=function(t){return null==t?null:"*"===t?R:t.constructor===i.Vertex||t.constructor===i.Port?t:e.isString(t)||e.isObject(t)?R.getVertex(t):null};this.getEdges=function(t){return function(t,e,n){var o=[],r={},s=function(s,a,l,u){if(null!=s)for(var c=s[e]({filter:t.filter}),d=0;d<c.length;d++){var h=a&&s===R||c[d].source===s||n&&c[d].source.constructor===i.Port&&c[d].source.getNode()===s,p=l&&s===R||c[d].target===s||n&&c[d].target.constructor===i.Port&&c[d].target.getNode()===s;(a&&h||l&&p||u&&(h||p))&&(f=c[d],r[f.getId()]||(o.push(f),r[f.getId()]=!0))}var f};return s(H((t=t||{}).source),!0,!1,!1),s(H(t.target),!1,!0,!1),s(H(t.element),!1,!1,!0),o}(t,"getEdges",!1)},this.getAllEdges=function(){return R.getAllEdges()},this.getAllEdgesFor=function(t,e){return t.getAllEdges({filter:e})},this.selectAllEdges=function(){return this.filter(function(t){return"Edge"===t.objectType})},this.addAllEdgesToSelection=function(){this.addToSelection(this.getAllEdges())};var Y=function(e,n,i){var r=(e=e||{}).type||"json",s=e.data,a=e.url,l=e.jsonp,u=e.onload,c=e.parameters||{},d=e.error||function(){};if(null==s&&null==a)throw new TypeError("You must supply either data or url to load.");var h=function(e){B=e,W=r,Z=!0,y.fire(n),t.jsPlumbToolkitIO.parse(r,e,y,c),Q(i),u&&u(y,e),y.fire("graphChanged")};if(s)h(s);else if(a){if(l)a=a+(-1===a.indexOf("?")?"?":"&")+"callback=?";var p="json"===r?r:e.dataType,f=e.headers||{Accept:"application/json"};o.ajax({url:a,success:h,dataType:p,error:d,headers:f})}return y};this.load=function(t){return Y(t,"dataLoadStart","dataLoadEnd")},this.append=function(t){return Y(t,"dataAppendStart","dataAppendEnd")},this.save=function(t){t=t||{};var e=this.exportData(t),i={"Content-Type":"application/json"};return n.extend(i,t.headers||{}),o.ajax({url:t.url,type:"POST",data:e,success:t.success||function(){},error:t.error||function(){},headers:i}),y},this.exportData=function(e){return e=e||{},t.jsPlumbToolkitIO.exportData(e.type||"json",y,e.parameters)};var X=function(t){return new o.Selection({toolkit:y,onClear:t||function(){}})},q=X(function(t){y.fire("selectionCleared",{selection:t})});a.maxSelectedNodes&&q.setMaxNodes(a.maxSelectedNodes),a.maxSelectedEdges&&q.setMaxEdges(a.maxSelectedEdges),a.selectionCapacityPolicy&&q.setCapacityPolicy(a.selectionCapacityPolicy);var J=function(t,e,n,o){return e||n.clear(!0),n.append(t,function(t){o&&y.fire("select",{append:e,obj:t,selection:n})})};this.setSelection=function(t){J(t,!1,q,!0)},this.select=function(t,e){var n=X(),o=J(t,!0,n);if(e)for(var i=0;i<o[0].length;i++){var r=o[0][i];if("Node"===r.objectType||"Port"===r.objectType)for(var s=r.getAllEdges(),a=0;a<s.length;a++)n.append(s[a])}return n};this.selectDescendants=function(t,e,n){var o=y.getObjectInfo(t),i=X();if(o.obj&&"Node"===o.obj.objectType){e&&J(o.obj,!0,i);var r={};r[o.obj.getFullId()]=!0,function t(e,n,o,i){for(var r=e.getAllEdges(),s=0,a=r.length;s<a;s++)if(r[s].source===e||r[s].getNode&&r[s].getNode()===e){var l=r[s].target,u=l.getFullId();i[u]||(n.append(l),o&&n.append(r[s]),i[u]=!0,t(l,n,o,i))}}(o.obj,i,n,r)}return i},this.filter=function(t,e){var n="function"==typeof t?t:function(n){var o=n.data,i=!1;for(var r in t){var s=t[r]===o[r];if(!s&&!e)return!1;i=i||s}return i},o=X();return this.eachNode(function(t,e){n(e)&&o.append(e);for(var i=e.getPorts(),r=0;r<i.length;r++)n(i[r])&&o.append(i[r])}),this.eachEdge(function(t,e){n(e)&&o.append(e)}),this.eachGroup(function(t,e){n(e)&&o.append(e)}),o},this.addToSelection=function(t){var e=this.getObjectInfo(t);if(e){var n=J(e.obj,!0,q,!0);K("deselect",n[1]),K("select",n[0])}};var K=function(t,e){for(var n=0;n<e.length;n++)y.fire(t,{obj:e[n],selection:q})};this.toggleSelection=function(t){var e=this.getObjectInfo(t);if(e){var n=[],o=q.toggle(e.obj,function(t,e){e||n.push(t)});K("deselect",o[1]),K("deselect",n),K("select",o[0])}},this.removeFromSelection=function(t){var e=this.getObjectInfo(t);e&&q.remove(e.obj,function(t){y.fire("deselect",{obj:t,selection:q})})},this.addPathToSelection=function(t){this.addToSelection(this.getPath(t))},this.selectAll=function(){throw new TypeError("not implemented")},this.clearSelection=q.clear,this.getSelection=function(){return q},this.setMaxSelectedNodes=function(t){q.setMaxNodes(t)},this.setMaxSelectedEdges=function(t){q.setMaxEdges(t)},this.setSelectionCapacityPolicy=function(t){q.setCapacityPolicy(t)};var Q=function(t){y.setSuspendGraph(!0),y.fire(t),y.setSuspendGraph(!1),Z=!1},$={};if(this.render=function(i,r){var s=n.extend({},r||{});n.extend(s,i),s.toolkit=y,null!=i.selection&&(i.selection.constructor===o.Selection?s.toolkit=i.selection:s.toolkit=new o.Selection({generator:i.selection,toolkit:y}));var a=s.type||t.jsPlumbToolkit.DefaultRendererType,l=new t.jsPlumbToolkit.Renderers[a](s),u=s.id||e.uuid();return $[u]=l,l.id=u,l},this.getRenderer=function(t){return $[t]},this.getRenderers=function(){return $},this.getObjectInfo=function(t,o){var i={els:{},obj:null,type:null,id:null,el:null};if(null!=t){if(t.eachNode&&t.eachEdge)return{obj:t};if(e.isArray(t))return{obj:t};var r=n.getElement(t);if(null!=r&&r.jtk)i.el=r,i.obj=r.jtk.port||r.jtk.node;else if(null!=t.tagName){var a=function t(e){if(null!=e)return e.jtk?e:t(e.parentNode)}(r);null!=a&&(i.el=a,i.obj=a.jtk.port||a.jtk.node||a.jtk.group)}else{if("string"==typeof t?t=this.getNode(t):"object"===(void 0===t?"undefined":s()(t))&&void 0===t.objectType&&(t=this.getNode(l(t))),null==t)return i;i.obj=t,null!=o&&(i.el=o(t))}null==o&&(i.els=function(t){var e={};for(var n in $)e[n]=[$[n],$[n].getRenderedElement(t)];return e}(i.obj)),null!=i.obj&&(i.id=i.obj.id,i.type=i.obj.objectType)}return i},a.data){var tt=a.dataType||"json";y.load({data:a.data,type:tt})}},e.extend(t.jsPlumbToolkitInstance,e.EventGenerator),t.jsPlumbToolkit=new t.jsPlumbToolkitInstance({}),t.jsPlumbToolkit.DefaultRendererType=null,t.jsPlumbToolkit.ready=n.ready,t.jsPlumbToolkit.Renderers={},t.jsPlumbToolkit.Widgets={};var a=function(e){return new t.jsPlumbToolkitInstance(e)};t.jsPlumbToolkit.newInstance=a,"undefined"!=typeof exports&&(exports.jsPlumbToolkit=t.jsPlumbToolkit,exports.newInstance=a)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit,e=this.jsPlumbToolkitUtil,n=this.jsPlumbUtil;t.Model=function(o,i){(o=o||{}).nodes=o.nodes||{},o.edges=o.edges||{},o.ports=o.ports||{},o.groups=o.groups||{};var r,s,a={},l=function(t){var n=e.mergeWithParents([t,"default"],o.edges);return delete n.parent,n},u=function(t,n){var i=n&&n.ports?e.mergeWithParents([t,"default"],n.ports):e.mergeWithParents([t,"default"],o.ports);return delete i.parent,i};if(void 0!==i){for(var c in o.edges){if((r=l(c)).overlays)for(s=0;s<r.overlays.length;s++)if(n.isArray(r.overlays[s])&&r.overlays[s][1].events)for(var d in r.overlays[s][1].events)r.overlays[s][1].events[d]=function(t,e){return function(n,o){t.call(e,{overlay:n,e:o,component:n.component,edge:n.component.edge})}}(r.overlays[s][1].events[d],r.overlays[s]);i.registerConnectionType(c,r)}for(s in o.ports)r=u(s),i.registerEndpointType(s,r);if(o.states)for(var h in o.states)a[h]=new t.UIState(h,o.states[h],i)}return{getNodeDefinition:function(t){var n=e.mergeWithParents([t,"default"],o.nodes);return delete n.parent,n},getEdgeDefinition:l,getPortDefinition:u,getGroupDefinition:function(t){var n=e.mergeWithParents([t,"default"],o.groups);return delete n.parent,n},getState:function(t){return a[t]}}}}.call("undefined"!=typeof window?window:this),function(){var t=jsPlumbToolkit.ready,e=[],n=!1,o=function(){n=!0;for(var o=0;o<e.length;o++)t.call(t,e[o])};jsPlumbToolkit.ready=function(o){n?t.call(t,o):e.push(o)},jsPlumb.ready(function(){var t=document.getElementById("jsPlumbToolkitTemplates");if(t)o();else{(t=document.createElement("div")).style.display="none",t.id="jsPlumbToolkitTemplates",document.body.appendChild(t);for(var e=new function(t){var e=0,n=function(){--e<=0&&o()};this.add=function(o){e++,jsPlumbToolkitUtil.ajax({url:o,success:function(e){var o=t.innerHTML;o+=e,t.innerHTML=o,n()},error:function(t){n()}})},this.ensureNotEmpty=function(){e<=0&&o()}}(t),n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var r=n[i].getAttribute("type"),s=n[i].getAttribute("src");"text/x-jtk-templates"==r&&e.add(s)}e.ensureNotEmpty()}})}.call("undefined"!=typeof window?window:this),function(){this.jsPlumbToolkit.Classes={LASSO:"jtk-lasso",LASSO_SELECT_DEFEAT:"jtk-lasso-select-defeat",MINIVIEW:"jtk-miniview",MINIVIEW_CANVAS:"jtk-miniview-canvas",MINIVIEW_PANNER:"jtk-miniview-panner",MINIVIEW_ELEMENT:"jtk-miniview-element",MINIVIEW_GROUP_ELEMENT:"jtk-miniview-group-element",MINIVIEW_PANNING:"jtk-miniview-panning",MINIVIEW_COLLAPSE:"jtk-miniview-collapse",MINIVIEW_COLLAPSED:"jtk-miniview-collapsed",NODE:"jtk-node",PORT:"jtk-port",GROUP:"jtk-group",SELECT_DEFEAT:"jtk-drag-select-defeat",SURFACE:"jtk-surface",SURFACE_NO_PAN:"jtk-surface-nopan",SURFACE_CANVAS:"jtk-surface-canvas",SURFACE_PAN:"jtk-surface-pan",SURFACE_PAN_LEFT:"jtk-surface-pan-left",SURFACE_PAN_TOP:"jtk-surface-pan-top",SURFACE_PAN_RIGHT:"jtk-surface-pan-right",SURFACE_PAN_BOTTOM:"jtk-surface-pan-bottom",SURFACE_PAN_ACTIVE:"jtk-surface-pan-active",SURFACE_SELECTED_ELEMENT:"jtk-surface-selected-element",SURFACE_SELECTED_CONNECTION:"jtk-surface-selected-connection",SURFACE_PANNING:"jtk-surface-panning",SURFACE_ELEMENT_DRAGGING:"jtk-surface-element-dragging",SURFACE_DROPPABLE_NODE:"jtk-surface-droppable-node",TOOLBAR:"jtk-toolbar",TOOLBAR_TOOL:"jtk-tool",TOOLBAR_TOOL_SELECTED:"jtk-tool-selected",TOOLBAR_TOOL_ICON:"jtk-tool-icon"},this.jsPlumbToolkit.Constants={click:"click",start:"start",stop:"stop",drop:"drop",disabled:"disabled",pan:"pan",select:"select",drag:"drag",left:"left",right:"right",top:"top",bottom:"bottom",width:"width",height:"height",leftmin:"leftmin",leftmax:"leftmax",topmin:"topmin",topmax:"topmax",min:"min",max:"max",nominalSize:"50px",px:"px",onepx:"1px",nopx:"0px",em:"em",absolute:"absolute",relative:"relative",none:"none",block:"block",hidden:"hidden",div:"div",id:"id",plusEquals:"+=",minusEquals:"-=",dot:".",transform:"transform",transformOrigin:"transform-origin",nodeType:"Node",portType:"Port",edgeType:"Edge",groupType:"Group",surfaceNodeDragScope:"surfaceNodeDrag",mistletoeLayoutType:"Mistletoe",surfaceType:"Surface",jtkStatePrefix:"jtk-state-",msgCannotSaveState:"Cannot save state",msgCannotRestoreState:"Cannot restore state"},this.jsPlumbToolkit.Attributes={jtkNodeId:"jtk-node-id",relatedNodeId:"related-node-id"},this.jsPlumbToolkit.Methods={addClass:"addClass",removeClass:"removeClass"},this.jsPlumbToolkit.Events={beforeDrop:"beforeDrop",beforeDetach:"beforeDetach",click:"click",canvasClick:"canvasClick",canvasDblClick:"canvasDblClick",connection:"connection",connectionAborted:"connectionAborted",connectionDetached:"connectionDetached",connectionMoved:"connectionMoved",connectionDragStop:"connectionDragStop",contentDimensions:"contentDimensions",contextmenu:"contextmenu",dataLoadStart:"dataLoadStart",dataAppendStart:"dataAppendStart",dataLoadEnd:"dataLoadEnd",dataAppendEnd:"dataAppendEnd",dblclick:"dblclick",drag:"drag",drop:"drop",dragover:"dragover",dragend:"dragend",edgeAdded:"edgeAdded",edgeRemoved:"edgeRemoved",edgeTypeChanged:"edgeTypeChanged",elementDragged:"elementDragged",elementAdded:"elementAdded",elementRemoved:"elementRemoved",endOverlayAnimation:"endOverlayAnimation",graphClearStart:"graphClearStart",graphCleared:"graphCleared",groupAdded:"groupAdded",groupDragStop:"groupDragStop",groupExpand:"group:expand",groupCollapse:"group:collapse",groupRemoved:"groupRemoved",groupMemberAdded:"group:addMember",groupMemberRemoved:"group:removeMember",groupMoveEnd:"groupMoveEnd",groupUpdated:"groupUpdated",lassoEnd:"lasso:end",modeChanged:"modeChanged",mousedown:"mousedown",mousemove:"mousemove",mouseout:"mouseout",mouseup:"mouseup",mouseenter:"mouseenter",mouseleave:"mouseleave",mouseover:"mouseover",nodeAdded:"nodeAdded",nodeDropped:"nodeDropped",nodeMoveStart:"nodeMoveStart",nodeMoveEnd:"nodeMoveEnd",nodeRemoved:"nodeRemoved",nodeVisibility:"nodeVisibility",edgeTarget:"edgeTarget",nodeTypeChanged:"nodeTypeChanged",edgeSource:"edgeSource",objectRepainted:"objectRepainted",pan:"pan",portAdded:"portAdded",portRemoved:"portRemoved",portTypeChanged:"portTypeChanged",redraw:"redraw",start:"start",startOverlayAnimation:"startOverlayAnimation",stateRestored:"stateRestored",stop:"stop",tap:"tap",touchend:"touchend",touchmove:"touchmove",touchstart:"touchstart",unload:"unload",nodeRendered:"nodeRendered",nodeUpdated:"nodeUpdated",portUpdated:"portUpdated",edgeUpdated:"edgeUpdated",zoom:"zoom",relayout:"relayout",deselect:"deselect",selectionCleared:"selectionCleared",resize:"resize",anchorChanged:"anchorChanged"}}.call("undefined"!=typeof window?window:this),function(){var t=this;t.jsPlumbToolkit.util={Cookies:{get:function(t){document.cookie.match(new RegExp(t+"=[a-zA-Z0-9.()=|%/_]+($|;)","g"));return val&&0!=val.length&&unescape(val[0].substring(t.length+1,val[0].length).replace(";",""))||null},set:function(t,e,n,o){var i=[t+"="+escape(e),"/",window.location.host];return o&&i.push(function(){if("NaN"==parseInt(o))return"";var t=new Date;return t.setTime(t.getTime()+60*parseInt(o)*60*1e3),t.toGMTString()}()),document.cookie=i.join("; ")},unset:function(e,n,o){n=n&&"string"==typeof n?n:"",o=o&&"string"==typeof o?o:"",t.jsPlumbToolkit.util.Cookies.get(e)&&t.jsPlumbToolkit.util.Cookies.set(e,"","Thu, 01-Jan-70 00:00:01 GMT",n,o)}},Storage:{set:function(e,n){"undefined"==typeof localStorage?t.jsPlumbToolkit.util.Cookies.set(e,n):localStorage.setItem(e,n)},get:function(e){return"undefined"==typeof localStorage?t.jsPlumbToolkit.util.Cookies.read(e):localStorage.getItem(e)},clear:function(e){"undefined"==typeof localStorage?t.jsPlumbToolkit.util.Cookies.unset(e):localStorage.removeItem(e)},clearAll:function(){if("undefined"==typeof localStorage);else for(;localStorage.length>0;){var t=localStorage.key(0);localStorage.removeItem(t)}},setJSON:function(e,n){if("undefined"==typeof JSON)throw new TypeError("JSON undefined. Cannot store value.");t.jsPlumbToolkit.util.Storage.set(e,i()(n))},getJSON:function(e){if("undefined"==typeof JSON)throw new TypeError("JSON undefined. Cannot retrieve value.");return JSON.parse(t.jsPlumbToolkit.util.Storage.get(e))}}}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit,e=this.jsPlumbUtil;t.Path=function(t,n){this.bind=t.bind,this.getModel=t.getModel,this.setSuspendGraph=t.setSuspendGraph,this.getNodeId=t.getNodeId,this.getEdgeId=t.getEdgeId,this.getPortId=t.getPortId,this.getNodeType=t.getNodeType,this.getEdgeType=t.getEdgeType,this.getPortType=t.getPortType;for(var o=t.getGraph().findPath(n.source,n.target,n.strict,n.nodeFilter,n.edgeFilter),i=function(){for(var e=0;e<o.path.length;e++)o.path[e].edge&&t.removeEdge(o.path[e].edge);return this}.bind(this),r=function(){for(var e=0;e<o.path.length;e++)t.removeNode(o.path[e].vertex);return this}.bind(this),s=[],a={},l=0;l<o.path.length;l++)s.push(o.path[l].vertex),a[t.getNodeId(o.path[l].vertex)]=[o.path[l].vertex,l];this.getNodes=function(){return s},this.getNode=function(t){return a["string"==typeof t?t:t.id][0]},this.getAllEdgesFor=function(t){var e=a[t.id][1];return e<o.path.length-1?[o.path[e+1].edge]:[]};var u=function(t,n){for(var i=n||0;i<o.path.length;i++)try{t(i,o.path[i])}catch(t){e.log("Path iterator function failed",t)}};this.each=function(t){u(function(e,n){t(e,n)})},this.eachNode=function(t){u(function(e,n){t(e,n.vertex)})},this.eachEdge=function(t){u(function(e,n){t(e,n.edge)},1)},this.getNodeCount=function(){return o.path.length},this.getNodeAt=function(t){return o.path[t].vertex},this.getEdgeCount=function(){return 0==o.path.length?0:o.path.length-1},this.getEdgeAt=function(t){return t<0&&(t=o.path.length-1+t),o.path.length>t+1?o.path[t+1].edge:null},this.path=o,this.deleteEdges=i,this.deleteNodes=r,this.deleteAll=r,this.isEmpty=function(){return 0==o.path.length},this.getCost=function(){return o.pathDistance},this.contains=function(e,n){var i=t.findGraphObject(e),r=!1;if(i)for(var s=0;s<o.path.length;s++)if(o.path[s].vertex==i||o.path[s].edge==i||!n&&"Port"==o.path[s].vertex.objectType&&o.path[s].vertex.isChildOf(i)){r=!0;break}return r},this.exists=function(){return null!=o.pathDistance},this.selectEdges=function(t){return _selectEdges(t,"getEdges",!1)},this.selectAllEdges=function(t){return _selectEdges(t,"getAllEdges",!0)}}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkitIO={},e=this.jsPlumbUtil,n=this.jsPlumb;t.exporters={json:function(t,e){return t.getGraph().serialize()}},t.parsers={json:function(t,e,n){for(var o=t.nodes||[],i=t.edges||[],r=t.ports||[],s=t.groups||[],a=0;a<s.length;a++)e.addGroup(s[a]);for(var l=0;l<o.length;l++)e.addNode(o[l]);for(var u=0;u<r.length;u++)if(r[u].nodeId){var c=e.getNode(r[u].nodeId);if(null==c)throw new TypeError("Unknown node ["+r[u].nodeId+"]");c.addPort(r[u])}for(var d=0;d<i.length;d++){var h={source:i[d].source,target:i[d].target,cost:i[d].cost||1,directed:i[d].directed,data:i[d].data};i[d].geometry&&(h.geometry=i[d].geometry),e.addEdge(h)}},"hierarchical-json":function(t,e,n){!function t(n){var o=e.addNode(n);if(n.children)for(var i=0;i<n.children.length;i++){var r=e.addNode(n.children[i]);e.addEdge({source:o,target:r}),t(n.children[i])}}(t)}},t.managers={json:{removeNode:function(t,n,o){var i=o(n.data);e.removeWithFunction(t.nodes,function(t){return t.id===i})},removeEdge:function(t,n,o){var i=o(n.data);e.removeWithFunction(t.edges,function(t){return t.data&&t.data.id===i})},addNode:function(t,e,n){t.nodes=t.nodes||[],t.nodes.push(e.data)},addEdge:function(t,e,n){var o={source:e.source.getFullId(),target:e.target.getFullId(),data:e.data||{}};t.edges=t.edges||[],t.edges.push(o)},addPort:function(t,e,o){t.ports=t.ports||[];var i=n.extend({},e.port.data||{});i.id=e.port.getFullId(),t.ports.push(i)},removePort:function(t,n,o){var i=n.port.getFullId();e.removeWithFunction(t.ports,function(t){return t.id===i})}}},t.parse=function(e,n,o,i){var r=t.parsers[e];if(null==r)throw new Error("jsPlumb Toolkit - parse - ["+e+"] is an unsupported type");return r(n,o,i)},t.exportData=function(e,n,o){var i=t.exporters[e];if(null===i)throw new Error("jsPlumb Toolkit - exportData - ["+e+"]  is an unsupported type");return i(n,o)},t.manage=function(e,n,o,i,r,s){t.managers[o]&&t.managers[o][e]&&t.managers[o][e](n,i,r)},"undefined"!=typeof exports&&(exports.jsPlumbToolkitIO=t)}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumbToolkit;e.Support={ingest:function(n){var o=n.jsPlumb||t.jsPlumb;if(!o.getContainer())throw new TypeError("No Container set on jsPlumb instance. Cannot continue.");var i=e.newInstance(),r=o.select(),s={},a=function(){return"default"},l=n.idFunction||function(t){return o.getId(t)},u=n.typeFunction||a,c=n.idFunction||function(t){return t.id},d=n.edgeTypeFunction||a,h=!1!==n.render,p=function(t){var e=l(t),n=u(t),r=o.getId(t);null==s[r]&&(s[r]=i.addNode({id:e,type:n},null,!0),t.jtk={node:s[r]})};if(n.nodeSelector)for(var f=o.getContainer().querySelectorAll(n.nodeSelector),g=0;g<f.length;g++){var m=o.getId(f[g]);p(f[g]),o.manage(m,f[g])}var v=o.getManagedElements();for(var m in v)p(v[m].el);if(r.each(function(t){!function(t){var e=s[t.sourceId],n=s[t.targetId],o=c(t),r=d(t);t.edge=i.addEdge({source:e,target:n,data:{id:o,type:r}},null,!0)}(t)}),h){var b=t.jsPlumb.extend({},n.renderParams||{});b.jsPlumbInstance=o,b.container=o.getContainer();var y=i.render(b);return y.ingest=function(t){p(t),y.importNode(t,l(t))},y}return i}}}.call("undefined"!=typeof window?window:this),function(){var t=this,e=t.jsPlumbToolkit.Layouts={Decorators:{}},n=t.jsPlumbUtil;e.AbstractLayout=function(o){var i=this,r=(o=o||{}).adapter,s=o.parameters||{},a=o.getElementForNode,l=t.Farahey.getInstance({getPosition:function(t){var e=h[t.id];return{left:e[0],top:e[1]}},getSize:function(t){return x[t.id]},getId:function(t){return t.id},setPosition:function(t,e){I(t.id,e.left,e.top)},padding:s.padding,filter:function(t){return(!b[t]||!b[t].group)&&(!i.canMagnetize||i.canMagnetize(t))}}),u=!1!==o.magnetized&&(i.defaultMagnetized||!0===o.magnetize);this.decorators=function(t,o,i){if(null==t)return[];for(var r=[],s=function(t){var r="string"==typeof t?t:t[0],s=e.Decorators[r],a="string"==typeof t?{}:t[1];return s?new s(a,o,i):(n.log("Decorator ["+r+"] nor registered on jsPlumbToolkit.Layouts.Decorators. Not fatal."),null)},a=0;a<t.length;a++){var l=s(t[a]);l&&r.push(l)}return r}(o.decorators,o.adapter,o.container),this.adapter=o.adapter;var c=o.jsPlumb||t.jsPlumb,d=o.jsPlumbToolkit,h={},p=[],f=1/0,g=1/0,m=-1/0,v=-1/0,b={},y={},x={},C=o.container,P=c.getSize(C),E=o.width||P[0],j=o.height||P[1],w=!1,S=function(){w=!1,f=1/0,m=-1/0,g=1/0,v=-1/0;for(var t=0;t<i.decorators.length;t++)i.decorators[t].reset({remove:c.remove});h={},p.splice(0),x={},l.reset(),i.reset&&i.reset()};this.getMagnetizedElements=function(){return l.getElements()},this.magnetize=function(t){var e=(t=t||{}).event?"executeAtEvent":t.origin?"execute":"executeAtCenter",n=t.event?[t.event,t.options]:t.origin?[t.origin,t.options]:[t.options];t.force&&this.forceMagnetize&&this.forceMagnetize(),l[e].apply(l,n),M(c.repaintEverything)},this.nodeAdded=function(t,e){var n=e&&e.position?e.position:t.node.data&&t.node.data.left&&t.node.data.top?t.node.data:i.adapter.getOffset(t.el);if(this._nodeAdded){var o=this._nodeAdded(t,e);o&&(n.left=o[0],n.top=o[1])}b[t.node.id]=t.node,I(t.node.id,n.left,n.top),k(t.node.id,t.el),l.addElement(t.node)},this.nodeRemoved=function(t){delete h[t],delete x[t],delete b[t],this._nodeRemoved&&this._nodeRemoved(t),l.removeElement(o.node)},this.groupAdded=function(t,e){var n=e&&e.position?e.position:t.group.data&&t.group.data.left&&t.group.data.top?t.group.data:i.adapter.getOffset(t.el);if(this._groupAdded){var o=this._groupAdded(t,e);o&&(n.left=o[0],n.top=o[1])}y[t.group.id]=t.group,I(t.group.id,n.left,n.top),k(t.group.id,t.el),l.addElement(t.group)},this.groupRemoved=function(t){delete h[t],delete x[t],delete y[t],this._groupRemoved&&this._groupRemoved(t),l.removeElement(o.group)};var k=function(t,e){var n=x[t];return n||(null!=(e=e||a(t))?(n=c.getSize(e),x[t]=n):n=[0,0]),n},T=function(t){f=Math.min(f,t[0]),g=Math.min(g,t[1]),m=Math.max(m,t[0]),v=Math.max(v,t[1])},A=function(t,e,n){var o=h[t];o?(o[0]=parseFloat(e),o[1]=parseFloat(n)):(o=h[t]=[parseFloat(e),parseFloat(n)],p.push([o,t])),T(o)},_=function(t,e,n){b[t]&&i._nodeMoved?i._nodeMoved(t,e,n):y[t]&&i._groupMoved&&i._groupMoved(t,e,n)},I=(this.setMagnetizedPosition=function(t,e,n,o){A(t,e,n),this.magnetize({options:{filter:function(e){return e===t},padding:[5,5],exclude:function(t,e){return null!=e.group},excludeFocus:!0}});var i=this.getPosition(t);return o&&_(t,i[0],i[1]),i},this.setPosition=function(t,e,n,o){A(t,e,n),o&&_(t,e,n)}),D=function(t,e){var n=a(t);if(null!=n){var o=h[t];return i.adapter.setPosition(n,o[0],o[1],e),L[t]=[o[0],o[1]],o.concat(k(t))}return null}.bind(this),M=this.draw=function(t){for(var e in h){var n=D(e);null!=n&&(f=Math.min(n[0],f),g=Math.min(n[1],g),m=Math.max(n[0]+n[2],m),v=Math.max(n[1]+n[3],v))}for(var o=0;o<i.decorators.length;o++)i.decorators[o].decorate({adapter:i.adapter,layout:i,append:function(t,e,n){i.adapter.append(t,e,n,!0)},setAbsolutePosition:i.adapter.setAbsolutePosition,toolkit:d,jsPlumb:c,bounds:[f,g,m,v],floatElement:i.adapter.floatElement,fixElement:i.adapter.fixElement});t&&t()};this.bb=function(t){console.log(t);var e=function(t){var e=1/0,n=1/0,o=-1/0,i=-1/0;for(var r in t)e=Math.min(e,t[r][0]),o=Math.max(o,t[r][0]),n=Math.min(n,t[r][1]),i=Math.max(i,t[r][1]);return[[e,n],[o,i],Math.abs(e-o),Math.abs(n-i)]}(h);!function(){for(var t in h)console.log(t,h[t][0],h[t][1])}(),console.log(e[0],e[1],e[2],e[3])};var N=this.getPositions=function(){return h},L=(this.getPosition=function(t){return h[t]},{}),O=(this.getSize=function(t){return x[t]},this.setSize=function(t,e){x[t]=e});this.begin=function(t,e){},this.end=function(t,e){};var F=function(e){if(null!=d){var n;n=t.jsPlumb.extend({padding:[0,0]},i.defaultParameters||{}),t.jsPlumb.extend(n,s||{}),s=n,l.setElements(r.getNodes()).addElements(r.getGroups(),!0),this.begin&&this.begin(d,s);for(;!w;)this.step(d,s);M(function(){u&&i.magnetize(),i.end&&i.end(d,s),e&&e()})}}.bind(this);return this.relayout=function(t,e){S(),null!=t&&(s=t),F(e)},this.layout=function(t){w=!1,F(t)},this.clear=function(){S()},{adapter:o.adapter,jsPlumb:c,toolkit:d,getPosition:function(t,e,n,o){var i=h[t];if(!i){if(null!=e&&null!=n)i=[e,n];else{if(o)return null;i=[Math.floor(Math.random()*(E+1)),Math.floor(Math.random()*(j+1))]}I(t,i[0],i[1])}return i},setPosition:I,getRandomPosition:function(t,e,n){e=e||10,n=n||10;var o=h[t];return o||(o=h[t]=[]),o[0]=Math.floor(Math.random()*e),o[1]=Math.floor(Math.random()*n),T(o),o},getSize:k,setSize:O,getPositions:N,setPositions:function(t){h=t},width:E,height:j,reset:S,draw:M,setDone:function(t){w=t,function(){var t,e,n,i,r=d.getGroupCount();for(e=0;e<r;e++)for(t=d.getGroupAt(e).getVertices(),n=0;n<t.length;n++){var s=(i=t[n],(o.locationFunction||function(t){return[t.data.left,t.data.top]})(i));I(t[n].id,s[0],s[1])}}()}}},e.EmptyLayout=function(t){var e={},n={};this.refresh=this.relayout=this.layout=function(){this.clear();for(var n=t.getNodeCount(),o=0;o<n;o++){var i=t.getNodeAt(o);e[i.getFullId()]=[0,0]}for(n=t.getGroupCount(),o=0;o<n;o++)i=t.getGroupAt(o),e[i.id]=[0,0]},this.nodeRemoved=this.groupRemoved=function(t){delete e[t.id]},this.nodeAdded=this.groupAdded=function(t){e[t.id]=!1},this.getPositions=function(){return e},this.getPosition=function(t){return e[t]},this.setPosition=function(t,n,o){e[t]=[n,o]},this.clear=function(){},this.getMagnetizedElements=function(){return[]},this.setSize=function(t,e){n[t]=e},this.getSize=function(t){return n[t]}},e.Mistletoe=function(o){if(!o.parameters.layout)throw"No layout specified for MistletoeLayout";var i={},r=t.jsPlumb.extend({},o);r.getElementForNode=function(t){return i[t]};var s,a,l,u=e.AbstractLayout.apply(this,[r]),c=o.parameters.layout,d=function(){u.setPositions(c.getPositions()),u.draw(),this.fire("redraw")}.bind(this);n.EventGenerator.apply(this,arguments),this.map=function(t,e){i[t]=e};var h=function(){i={},s=c.layout,a=c.relayout,l=c.clear,c.layout=function(){s.apply(c,arguments),d()},c.relayout=function(){u.reset(),a.apply(c,arguments),d()},c.clear=function(){l.apply(c,arguments),u.reset()}};h(),this.setHostLayout=function(t){c=t,h()}};var o=e.AbsoluteBackedLayout=function(t){t=t||{};var n=e.AbstractLayout.apply(this,arguments),o=function(e,n){return(t.locationFunction||function(t){return[t.data.left,t.data.top]})(e)},i=function(t,e,i,r){for(var s=n.adapter[t](),a=0;a<s;a++){var l=n.adapter[e](a),u=l.getFullId(),c=n.getPosition(u,null,null,!0);null==c&&(c=o(l)),this.setPosition(u,c[0],c[1],!0)}}.bind(this);return this.begin=function(t,e){i("getNodeCount","getNodeAt",t,e),i("getGroupCount","getGroupAt",t,e)},this._nodeAdded=function(e,n){return o(e.node,t.parameters)},this._groupAdded=function(e,n){return o(e.group,t.parameters)},this.getAbsolutePosition=function(t,e){return o(t)},this.step=function(){n.setDone(!0)},n};n.extend(o,e.AbstractLayout),e.Absolute=function(t){e.AbsoluteBackedLayout.apply(this,arguments)},n.extend(e.Absolute,e.AbsoluteBackedLayout);var i=e.AbstractHierarchicalLayout=function(t){var n=e.AbstractLayout.apply(this,arguments);return this.begin=function(e,o){o.ignoreLoops=!(!1===t.ignoreLoops),o.getRootNode=o.getRootNode||function(e){return!1!==t.multipleRoots?e.filter(function(t){return"Node"===t.objectType&&0==t.getTargetEdges().length&&null==t.group||"Group"===t.objectType&&0==t.getTargetEdges().length}).getAll():n.adapter.getNodeCount()>0?n.adapter.getNodeAt(0):null},o.getChildEdges=o.getChildEdges||function(e,o){return n.toolkit.getAllEdgesFor(e,function(n){return n.source===e||!0!==t.ignorePorts&&n.source.getNode&&n.source.getNode()===e})},o.rootNode=o.getRootNode(e),o.rootNode||n.setDone(!0)},n};n.extend(i,e.AbstractLayout)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Layouts,e=this.Farahey;t.Circular=function(n){n=n||{};var o=t.AbstractLayout.apply(this,arguments),i=!!n.parameters&&!0===n.parameters.centerRootNode;this.defaultParameters={padding:30,locationFunction:n.locationFunction},this.step=function(t,n){var r=[],s=o.adapter.getNodes();if(0!==s.length){Array.prototype.push.apply(r,function(t){for(var e=[],n=i?1:0;n<t.length;n++)t[n].group||e.push(t[n]);return e}(s)),Array.prototype.push.apply(r,o.adapter.getGroups());var a,l,u=10,c=2*Math.PI/r.length,d=-Math.PI/2;if(i){var h=o.getSize(s[0].id);u=Math.max(h[0],h[1])+80}for(a=0;a<r.length;a++)if(l=r[a],o.setPosition(l.id,0+Math.sin(d)*u,0+Math.cos(d)*u,!0),d+=c,a>0){var p=r[a-1],f=o.getSize(p.id),g=o.getPosition(p.id),m={x:g[0]-n.padding,y:g[1]-n.padding,w:f[0]+2*n.padding,h:f[1]+2*n.padding},v=r[a],b=o.getSize(v.id),y=o.getPosition(v.id),x={x:y[0]-n.padding,y:y[1]-n.padding,w:b[0]+2*n.padding,h:b[1]+2*n.padding},C=e.calculateSpacingAdjustment(m,x),P=[g[0]+f[0]/2,g[1]+f[1]/2],E=[y[0]+C.left+b[0]/2,y[1]+C.top+ +b[1]/2],j=Math.sqrt(Math.pow(P[0]-E[0],2)+Math.pow(P[1]-E[1],2));u=Math.max(u,j/2/Math.sin(c/2))}for(a=0;a<r.length;a++)l=r[a],o.setPosition(l.id,0+Math.sin(d)*u,0+Math.cos(d)*u,!0),d+=c;o.setDone(!0)}else o.setDone(!0)}}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Layouts,e=this.jsPlumbUtil;t.Hierarchical=function(n){var o,i,r,s,a,l,u=t.AbstractHierarchicalLayout.apply(this,arguments),c=[],d=null!=n.parameters&&n.parameters.compress,h=[],p=[],f=u.toolkit.getNodeId,g=function(t,e,n,o,i){var a=function(t){var e=h[t];return e||(e={nodes:[],pointer:0},h[t]=e),e}(n),l={node:t,parent:o,childGroup:i,loc:a.pointer,index:a.nodes.length,dimensions:e,size:e[r]},u=e[0==r?1:0];return null==c[n]?c[n]=u:c[n]=Math.max(c[n],u),a.pointer+=e[r]+s[r],a.nodes.push(l),l},m=function(t){if(t.size>0){var e=t.parent.loc+t.parent.size/2-(t.size-s[r])/2,n=p[t.depth],o=-1/0,i=0;if(null!=n&&n.length>0){var a=n[n.length-1],l=a.nodes[a.nodes.length-1];o=l.loc+l.size+s[r]}e>=o?t.loc=e:(i=o-e,t.loc=o);for(var u=t.loc,c=0;c<t.nodes.length;c++)t.nodes[c].loc=u,u+=t.nodes[c].size,u+=s[r];i>0&&b(t),function(t,e){var n=p[e];n||(n=[],p[e]=n),t.index=n.length,n.push(t)}(t,t.depth)}},v=function(t){var e=(t.nodes[0].loc+(t.nodes[t.nodes.length-1].loc+t.nodes[t.nodes.length-1].size))/2-t.parent.size/2,n=e-t.parent.loc;if(t.parent.loc=e,!t.parent.root)for(var o=t.parent.childGroup,i=t.parent.childGroupIndex+1;i<o.nodes.length;i++)o.nodes[i].loc+=n},b=function(t){for(var e=t;null!=e;)v(e),e=e.parent.childGroup},y=function t(e,n){if(!a[e.node.id]){a[e.node.id]=!0;var o,i,c,d=l(e.node,u.toolkit),h={nodes:[],loc:0,size:0,parent:e,depth:n+1},p=[],v={};for(o=0;o<d.length;o++){var b=(i=e.node,(c=d[o]).source===i||c.source.getNode&&c.source.getNode()===i?d[o].target:d[o].source);if(b.getNode&&(b=b.getNode()),null!=(b=u.toolkit.getNode(b))&&b!==e.node&&!v[b.id]){var y=u.getSize(f(b)),x=g(b,y,n+1,e,h);x.childGroupIndex=h.nodes.length,h.nodes.push(x),h.size+=y[r]+s[r],p.push(x),v[b.id]=!0}}for(m(h),o=0;o<p.length;o++)t(p[o],n+1)}};this.defaultParameters={padding:[60,60],orientation:"horizontal",border:0,locationFunction:n.locationFunction};var x=this.begin;this.begin=function(t,e){x.apply(this,arguments),o=e.orientation,r=(i="horizontal"===o)?0:1,i?"width":"height",s=e.padding,h.length=0,p.length=0,a={},l=e.getChildEdges},this.step=function(t,n){for(var o,i,a,l=e.isArray(n.rootNode)?n.rootNode:[n.rootNode],p=0;p<l.length;p++){o=l[p];var m=u.getSize(o.id),v=g(o,m,0,null,null);v.root=!0,y(v,0);var b,x,C=0,P=function(t,e){var n=0==r?1:0;return d&&t.parent?u.getPosition(f(t.parent.node))[n]+t.parent.dimensions[n]+s[n]:e};for(i=0;i<h.length;i++){for(h[i].otherAxis=C,a=0;a<h[i].nodes.length;a++)b=0==r?h[i].nodes[a].loc:P(h[i].nodes[a],C),h[i].nodes[a].parent&&u.getPosition(f(h[i].nodes[a].parent.node)),x=1==r?h[i].nodes[a].loc:P(h[i].nodes[a],C),u.setPosition(f(h[i].nodes[a].node),b,x,!0);h[i].otherAxisSize=c[i]+s[0==r?1:0],C+=h[i].otherAxisSize}}u.setDone(!0)},this.getHierarchy=function(){return h},this.getOrientation=function(){return o};var C=this.nodeRemoved;this.nodeRemoved=function(){h=[],C.apply(this,arguments)},this.getPadding=function(){return s}},e.extend(t.Hierarchical,t.AbstractHierarchicalLayout)}.call("undefined"!=typeof window?window:this),function(){this.jsPlumbToolkit.Layouts.Decorators.Hierarchy=function(t){var e,n=[];this.reset=function(t){for(var e=0;e<n.length;e++)t.remove(n[e]);n.length=0},this.decorate=function(t){if(t.bounds[0]!=1/0){var n=t.layout.getHierarchy();e=(t.layout.getPadding()||[60,60])["horizontal"===o?0:1];for(var o=t.layout.getOrientation(),i="horizontal"===o?["width","height",t.bounds[2]-t.bounds[0]]:["height","width",t.bounds[3]-t.bounds[1]],r=0;r<n.length;r++){var s=document.createElement("div");t.append(s),s.className="level "+(r%2?"odd":"even"),s.style[i[0]]=i[2]+2*e+"px",s.style[i[1]]=n[r].otherAxisSize+"px";var a="horizontal"===o?[t.bounds[0]-e,n[r].otherAxis-e/2]:[n[r].otherAxis-e/2,t.bounds[1]-e];t.setAbsolutePosition(s,a)}}}}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Layouts,e=this.jsPlumbUtil;t.Spring=function(e){this.defaultMagnetized=!0;var n=t.AbsoluteBackedLayout.apply(this,arguments);this.defaultParameters={padding:[50,50],iterations:500,maxRepulsiveForceDistance:6,k:2,c:.01,maxVertexMovement:.5,locationFunction:e.locationFunction};var o,i=this.defaultParameters,r={},s=!1!==e.absoluteBacked,a=0,l=1/0,u=-1/0,c=1/0,d=-1/0,h=1,p=1,f=0,g=function(t){t.getNode&&(t=t.getNode());var e=r[t.id];if(!e){var o=n.getRandomPosition(t.id,.5,.5);e=r[t.id]={id:t.id,n:t,sp:o,p:[o[0],o[1]],f:[0,0]}}return e},m=function(t,e,n){l=Math.min(l,e),c=Math.min(c,n),u=Math.max(u,e),d=Math.max(d,n),t.p[0]=e,t.p[1]=n},v=function(t,e){if(!t.locked||!e.locked){var n=e.p[0]-t.p[0],o=e.p[1]-t.p[1],r=n*n+o*o;r<.01&&(r=(n=.1*Math.random()+.1)*n+(o=.1*Math.random()+.1)*o);var s=Math.sqrt(r);if(s<i.maxRepulsiveForceDistance){f++;var a=i.k*i.k/s,l=a*n/s,u=a*o/s;e.f[0]+=e.locked?0:(t.locked?2:1)*l,e.f[1]+=e.locked?0:(t.locked?2:1)*u,t.f[0]-=t.locked?0:(e.locked?2:1)*l,t.f[1]-=t.locked?0:(e.locked?2:1)*u}}},b=function(t,e){var n=g(e.target);if(!t.locked||!n.locked){f++;var o=n.p[0]-t.p[0],r=n.p[1]-t.p[1],s=o*o+r*r;s<.01&&(s=(o=.1*Math.random()+.1)*o+(r=.1*Math.random()+.1)*r);var a=Math.sqrt(s);a>i.maxRepulsiveForceDistance&&(s=(a=i.maxRepulsiveForceDistance)*a);var l=(s-i.k*i.k)/i.k;(void 0==e.weight||e.weight<1)&&(e.weight=1);var u=(l*=.5*Math.log(e.weight)+1)*o/a,c=l*r/a;n.f[0]-=n.locked?0:(t.locked?2:1)*u,n.f[1]-=n.locked?0:(t.locked?2:1)*c,t.f[0]+=t.locked?0:(n.locked?2:1)*u,t.f[1]+=t.locked?0:(n.locked?2:1)*c}},y=function(t){return[.19*n.width+(t[0]-l)*h,.19*n.height+(t[1]-c)*p]};this._nodeMoved=this._groupMoved=function(t,e,o){var i,s=r[t];s&&(s.sp=[e,o],s.p=(i=s.sp,[l+(i[0]-.19*n.width)/h,c+(i[1]-.19*n.height)/p]))},this.forceMagnetize=function(){for(var t in r)r[t].locked=!1},this.canMagnetize=function(t){return r[t]&&!0!==r[t].locked},this.reset=function(){r={},a=0,l=c=1/0,u=d=-1/0},this._nodeRemoved=this._groupRemoved=function(t){delete r[t]},this._nodeAdded=this._groupAdded=function(t,e){if(e&&e.position){var o=g(t.node||t.group);o&&(o.locked=!0,n.setPosition(o.id,e.position.left,e.position.top,!0))}},this.begin=function(t,e){a=0,o=[],Array.prototype.push.apply(o,n.adapter.getNodes()),Array.prototype.push.apply(o,n.adapter.getGroups())},this.step=function(t,e){var x,C=[],P=function(t){return C[t]?C[t]:(C[t]=g(o[t]),C[t])};for(f=0,x=0;x<o.length;x++){var E=P(x);if(!E.group){if(s&&!E.locked){var j=this.getAbsolutePosition(E.n,e);if(null!=j&&2===j.length&&null!=j[0]&&null!=j[1]&&!isNaN(j[0])&&!isNaN(j[1])){m(E,j[0],j[1]),E.sp=E.p,n.setPosition(E.id,j[0],j[1],!0),E.locked=!0;continue}}for(var w=x+1;w<o.length;w++){var S=P(w);v(E,S)}for(var k=n.toolkit.getAllEdgesFor(E.n),T=0;T<k.length;T++)b(E,k[T])}}if(0!==f)for(x=0;x<o.length;x++){var A=P(x);if(!A.group){var _=i.c*A.f[0],I=i.c*A.f[1],D=i.maxVertexMovement;_>D&&(_=D),_<-D&&(_=-D),I>D&&(I=D),I<-D&&(I=-D),m(A,A.p[0]+_,A.p[1]+I),A.f[0]=0,A.f[1]=0}}a++,(0==f||a>=i.iterations)&&(!function(){for(var t in h=n.width/(u-l)*.62,p=n.height/(d-c)*.62,r){var e=r[t];e.locked||(e.sp=y(e.p),n.setPosition(e.id,e.sp[0],e.sp[1],!0))}}(),n.setDone(!0))},this.end=function(){for(var t in r)r[t].locked=!0}},e.extend(t.Spring,t.AbsoluteBackedLayout)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Layouts,e=this.Farahey;t.Balloon=function(n){n=n||{};var o,i=t.AbstractHierarchicalLayout.apply(this,arguments),r=[];this.defaultParameters={padding:50,locationFunction:n.locationFunction,groupPadding:100};var s=e.getInstance({padding:[100,100],getPosition:function(t){return{left:t.extents[0],top:t.extents[2]}},setPosition:function(t,e){for(var n=0;n<t.group.length;n++){var o=t.offsets[t.group[n].id];t.setPosition(t.group[n].id,e.left+o.left,e.top+o.top)}},getSize:function(t){return[t.extents[1]-t.extents[0],t.extents[3]-t.extents[2]]},getId:function(t){return t.focus.id},filter:function(t){return r[0].focus.id!==t}}),a=this.begin;this.begin=function(t,e){a.apply(this,arguments),r.length=0,o=e.getChildEdges};this.step=function(t,n){if(function t(n,s,a){var l,u,c,d,h,p,f=function(t,e,n,o){return{x:t-a.padding,y:e-a.padding,w:n+2*a.padding,h:o+2*a.padding}},g={focus:n,childMap:{},children:[],positions:{},incidentAngles:[],setPosition:function(t,e,n){this.positions[t]=[e,n]},getPosition:function(t){return this.positions[t]},setIncidentAngle:function(t,e){this.incidentAngles[t]=e},group:[n]},m=s?s.position:[0,0],v=m[0],b=m[1],y={},x=function(t){return y[t]||(y[t]=i.getSize(t),y[t])};g.setPosition(n.id,m[0],m[1]);var C=o(n);for(l=0;l<C.length;l++)g.childMap[C[l].target.id]||(g.childMap[C[l].target.id]=!0,g.children.push(C[l].target));if(d=x(g.focus.id),c=Math.max(d[0],d[1]),p=f(v-d[0]/2,b-d[1]/2,d[0],d[1]),i.setPosition(g.focus.id,-d[0]/2,-d[1]/2,!0),g.children.length>0){r.push(g);var P=2*Math.PI/(g.children.length+(s?1:0)),E=s?s.incidentAngle+Math.PI+P:Math.PI,j=E;for(l=0;l<g.children.length;l++){h=x((u=g.children[l]).id);var w=f(v+Math.sin(E)*h[0],b+Math.cos(E)*h[1],h[0],h[1]);if(N=e.calculateSpacingAdjustment(p,w),F=Math.sqrt(Math.pow(w.x+N.left-v,2)+Math.pow(w.y+N.top-b,2)),c=Math.max(c,F),g.setPosition(u.id,w.x+N.left,w.y+N.top),E+=P,l>0){var S=g.children[l-1],k=x(S.id),T=g.getPosition(S.id),A=f(T[0],T[1],k[0],k[1]),_=g.children[l],I=x(_.id),D=g.getPosition(_.id),M=f(D[0],D[1],I[0],I[1]),N=e.calculateSpacingAdjustment(A,M),L=[T[0]+k[0]/2,T[1]+k[1]/2],O=[D[0]+N.left+I[0]/2,D[1]+N.top+ +I[1]/2],F=Math.sqrt(Math.pow(L[0]-O[0],2)+Math.pow(L[1]-O[1],2));c=Math.max(c,F/2/Math.sin(P/2))}}for(E=j,l=0;l<g.children.length;l++)u=g.children[l],g.setIncidentAngle(u.id,E),g.setPosition(u.id,v+Math.sin(E)*c,b+Math.cos(E)*c,!0),E+=P;var R,z=g.positions[n.id][0],G=i.getSize(n.id),U=z+G[0],V=g.positions[n.id][1],B=V+G[1];for(l=0;l<g.children.length;l++)t(u=g.children[l],{parent:n,incidentAngle:g.incidentAngles[u.id],position:g.positions[u.id]},a)||(R=i.getSize(u.id),g.group.push(u),z=Math.min(z,g.positions[u.id][0]),U=Math.max(U,g.positions[u.id][0]+R[0]),V=Math.min(V,g.positions[u.id][1]),B=Math.max(B,g.positions[u.id][1]+R[1]));for(g.extents=[z,U,V,B],g.offsets={},l=0;l<g.group.length;l++){var W=g.group[l];g.offsets[W.id]={left:g.positions[W.id][0]-g.extents[0],top:g.positions[W.id][1]-g.extents[2]}}}return g.children.length}(n.rootNode[0],null,n),r.length>0){var a=(r[0].extents[0]+r[0].extents[1])/2,l=(r[0].extents[2]+r[0].extents[3])/2;s.setElements(r),s.execute([a,l])}for(var u=0;u<r.length;u++){var c=r[u];for(var d in c.positions)i.setPosition(d,c.positions[d][0],c.positions[d][1],!0)}i.setDone(!0)}}}.call("undefined"!=typeof window?window:this),function(){this.jsPlumb;var t=this.jsPlumbToolkit;t.UI=t.UI||{},t.UI.ActiveDragFilter=function(t,e,n){var o={};e.bind("connectionDrag",function(e){var i,r,s,a,l,u=e.source.jtk.port,c=u?u.getNode():e.source.jtk.node,d=n.getNodeCount(),h=n.getGroupCount();function p(e,r){i=n.beforeConnect(e,r),l=r.getFullId(),!1===i&&null==o[l]&&(o[l]=t.setTargetEnabled(r,!1))}if(u)for(p(u,c),r=c.getPorts(),s=0;s<r.length;s++)p(u,r[s]);for(s=0;s<d;s++){var f=n.getNodeAt(s);for(p(u||c,f),r=f.getPorts(),a=0;a<r.length;a++)p(u||c,r[a])}for(s=0;s<h;s++){var g=n.getGroupAt(s);for(p(u||c,g),r=g.getPorts(),a=0;a<r.length;a++)p(u||c,r[a])}}),e.bind("connectionDragStop",function(){function e(e){!0===o[e.getFullId()]&&t.setTargetEnabled(e,!0)}var i,r,s,a=n.getNodeCount();for(i=0;i<a;i++){var l=n.getNodeAt(i);for(e(l),r=l.getPorts(),s=0;s<r.length;s++)e(r[s])}var u=n.getGroupCount();for(i=0;i<u;i++){var c=n.getGroupAt(i);for(e(c),r=c.getPorts(),s=0;s<r.length;s++)e(r[s])}o={}})}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Renderers,e=this.jsPlumbToolkit,n=this.jsPlumbToolkitUtil,o=this.jsPlumbUtil,i=this.jsPlumb,r=this.Rotors;e.UIState=function(t,e,n){for(var o in e)if(e.hasOwnProperty(o)){var i="*"===o?"e-state-"+t:"e-state-"+t+"-"+o,r="*"===o?"c-state-"+t:"c-state-"+t+"-"+o;n.registerEndpointType(i,e[o]),n.registerConnectionType(r,e[o])}this.activate=function(o,i,r){o.eachEdge(function(n,o){var a=i.getRenderedConnection(o.getId()),l=r.getEdgeType(o.data),u=l?"c-state-"+t+"-"+l:null;u&&a.addType(u,o.data),e["*"]&&a.addType("c-state-"+t,o.data),s(o,a,o.source,0,"addType",r),s(o,a,o.target,1,"addType",r)}),o.eachNode(function(t,o){var s=r.getNodeType(o.data),a=s?e[s]:null,l=i.getRenderedNode(o.id);a&&a.cssClass&&n.addClass(l,a.cssClass),e["*"]&&n.addClass(l,e["*"].cssClass)})};var s=function(e,n,o,i,r,s){var a=n.endpoints[i],l=s.getPortType(o.data);a[r]("e-state-"+t+"-"+l),a[r]("e-state-"+t)};this.deactivate=function(o,i,r){o.eachEdge(function(n,o){var a=i.getRenderedConnection(o.getId()),l=r.getEdgeType(o.data),u=l?"c-state-"+t+"-"+l:null;u&&a.removeType(u,o.data),e["*"]&&a.removeType("c-state-"+t),s(o,a,o.source,0,"removeType",r),s(o,a,o.target,1,"removeType",r)}),o.eachNode(function(t,o){var s=r.getNodeType(o.data),a=s?e[s]:null,l=i.getRenderedNode(o.id);a&&a.cssClass&&n.removeClass(l,a.cssClass),e["*"]&&n.removeClass(l,e["*"].cssClass)})}};var s=t.atts={NODE:"data-jtk-node-id",PORT:"data-jtk-port-id",GROUP:"data-jtk-group-id"},a=t.els={SOURCE:"JTK-SOURCE",PORT:"JTK-PORT",TARGET:"JTK-TARGET"},l=e.Classes,u=e.Constants,c=e.Events;t.mouseEvents=["click","dblclick","contextmenu","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover"],t.createElement=function(t,e){var n={width:t.width,height:t.height,position:t.position||u.absolute},o={};t.display&&(n.display=t.display),t.id&&(o.id=t.id),t.top&&(n.top=t.top+"px"),t.left&&(n.left=t.left+"px"),t.right&&(n.right=t.right+"px"),t.bottom&&(n.bottom=t.bottom+"px");var r=i.createElement(t.type||u.div,n,t.clazz,o);return null!=e&&i.appendElement(r,e),r};var d=t.DOMElementAdapter=function(t){var e=this.getJsPlumb(),n=e.getElement(t.container);this.getWidth=function(){return e.getSize(n)[0]},this.getHeight=function(){return e.getSize(n)[1]},this.append=function(t){var o=e.getElement(t);e.appendElement(o,n)},this.remove=function(t){var n=e.getElement(t);e.removeElement(n)},this.setAbsolutePosition=i.setAbsolutePosition,this.getOffset=function(t,n){return e.getOffset(t,n)}},h=t.AbstractRenderer=function(t){t=t||{};var d=function(t,e){var n=i.createElement("div",{border:"1px solid #456",position:"absolute"},l.NODE);return n.innerHTML=t.name||t.id,n},h='<div data-jtk-node-id="${id}" class="'+l.NODE+'"></div>',p={rotors:{render:function(t,e){return g.template(t,e).childNodes[0]}}},f=!0===t.debug,g=r.newInstance({defaultTemplate:h,templateResolver:t.templateResolver,templates:t.templates}),m=this,v=t.toolkit,b=new e.Layouts.EmptyLayout(m),y=i.getElement(t.container),x=!(!1===t.elementsDraggable),C=!0===t.elementsDroppable,P=!1,E=!1!==t.refreshAutomatically,j=t.templateRenderer?o.isString(t.templateRenderer)?p[t.templateRenderer]:{render:t.templateRenderer}:p.rotors,w=!1!==t.enhancedView,S=t.assignPosse||function(){return null},k=t.modelLeftAttribute||"left",T=t.modelTopAttribute||"top",A=!1!==t.storePositionsInModel,_=o.merge(t.jsPlumb||{}),I=t.jsPlumbInstance||i.getInstance(_,t.overrideFns),D=I.getId(y);I.bind("beforeDrop",function(t){var e=t.connection,n=e.endpoints[0].graph||e.source.jtk,o=e.endpoints[1].graph||e.target.jtk,i=n.port||n.node||n.group,r=o.port||o.node||o.group,s=t.connection.edge;return null==s?v.beforeConnect(i,r,t.connection.getData()):v.beforeMoveConnection(i,r,s)}),I.bind("beforeDrag",function(t){var e=t.endpoint.graph||t.source.jtk,n=e.port||e.node,o=t.endpoint.connectionType,i=v.beforeStartConnect(n,o);if(f){var r=K.getEdgeDefinition(o)||{};console.log("\n------------------------\nDrag started with edge type `"+o+"`, having definition :"),console.log(r),console.log("Edge source is a "+n.objectType+", having type ["+n.getType()+"], with definition :");var s=K["get"+n.objectType+"Definition"](n.getType())||{};console.log(s),console.log("Toolkit response to drag start :"),console.log(i),console.log("---------------------------\n")}return!1===i&&t.endpoint.isTemporarySource&&t.endpoint._deleteOnDetach&&I.deleteEndpoint(t.endpoint),i}),I.bind("beforeDetach",function(t,e){var n=t.endpoints[0].graph||t.source.jtk,o=t.endpoints[1].graph||t.target.jtk,i=n.port||n.node,r=o.port||o.node,s=t.edge;return v.beforeDetach(i,r,s,e)}),I.bind("beforeStartDetach",function(t){var e=t.endpoint.graph||t.source.jtk,n=e.port||e.node,o=t.connection.edge;return v.beforeStartDetach(n,o)}),I.bind("connectionEdit",function(t){t.edge&&(t.edge.geometry=t.getConnector().getGeometry())}),o.EventGenerator.apply(this,arguments),t.activeFiltering&&new e.UI.ActiveDragFilter(m,I,v),this.setDebug=function(t){f=t,console.log("-----------------------\nSurface debug switched "+(t?"on":"off")+" \n-------------------------\n")},this.getJsPlumb=function(){return I},this.getToolkit=function(){return v};var M=[c.canvasClick,c.canvasDblClick,c.nodeAdded,c.nodeDropped,c.nodeRemoved,c.nodeRendered,c.groupAdded,c.groupRemoved,c.groupMoveEnd,c.groupMemberAdded,c.groupMemberRemoved,c.groupCollapse,c.groupExpand,c.nodeMoveStart,c.nodeMoveEnd,c.portAdded,c.portRemoved,c.edgeAdded,c.edgeRemoved,c.edgeTypeChanged,c.nodeTypeChanged,c.portTypeChanged,c.dataLoadEnd,c.anchorChanged,c.objectRepainted,c.modeChanged,c.lassoEnd,c.pan,c.zoom,c.relayout,c.click,c.tap,c.stateRestored,c.startOverlayAnimation,c.endOverlayAnimation,c.nodeVisibility],N=m.bind,L=I.bind;if(this.setHoverSuspended=I.setHoverSuspended,this.isHoverSuspended=I.isHoverSuspended,this.setJsPlumbDefaults=function(t){delete t.Container,I.restoreDefaults(),I.importDefaults(t)},this.bind=function(t,e){-1==M.indexOf(t)?L(t,e):N(t,e)},t.events)for(var O in t.events)this.bind(O,t.events[O]);if(t.interceptors)for(var F in t.interceptors)this.bind(F,t.interceptors[F]);var R=!1;function z(t){R=!0;try{t()}catch(t){jsPlumbUtil.log("An error occurred while ignoring Toolkit events",t)}finally{R=!1}}L(c.connection,function(t){if(null==t.connection.edge){t.sourceEndpoint.getParameter("nodeId")||t.sourceEndpoint.setParameter("nodeId",U[t.sourceEndpoint.elementId].id),t.targetEndpoint.getParameter("nodeId")||t.targetEndpoint.setParameter("nodeId",U[t.targetEndpoint.elementId].id);var e=t.sourceEndpoint.getParameter("portType"),n=K.getPortDefinition(e),o=null!=n&&n.edgeType?n.edgeType:t.sourceEndpoint.getParameter("edgeType")||"default",i=t.sourceEndpoint.getParameter("nodeId"),r=t.sourceEndpoint.getParameter("portId"),s=t.targetEndpoint.getParameter("nodeId"),a=t.targetEndpoint.getParameter("portId"),l=i+(r?"."+r:""),u=s+(a?"."+a:""),d={sourceNodeId:i,sourcePortId:r,targetNodeId:s,targetPortId:a,type:o,source:v.getNode(l),target:v.getNode(u),sourceId:l,targetId:u};!1===v.getEdgeFactory()(o,t.connection.getData()||{},function(e){d.edge=v.addEdge({source:l,target:u,cost:t.connection.getCost(),directed:t.connection.isDirected(),data:e,addedByMouse:!0},m),Y[d.edge.getId()]=t.connection,t.connection.edge=d.edge,J(o,d.edge,t.connection),d.addedByMouse=!0,d.connection=t.connection,m.fire(c.edgeAdded,d)})&&I.deleteConnection(t.connection)}}),L(c.connectionMoved,function(t){var e=0===t.index?t.newSourceEndpoint:t.newTargetEndpoint,n=e.graph||e.element.jtk;z(function(){v.edgeMoved(t.connection.edge,n.port||n.node||n.group,t.index)})}),L(c.connectionDetached,function(t){z(function(){v.removeEdge(t.connection.edge)});var e=t.sourceEndpoint.getParameters(),n=t.targetEndpoint.getParameters(),o=e.nodeId+(e.portId?"."+e.portId:""),i=n.nodeId+(n.portId?"."+n.portId:"");m.fire(c.edgeRemoved,{sourceNodeId:e.nodeId,targetNodeId:n.nodeId,sourcePortId:e.portId,targetPortId:n.portId,sourceId:o,targetId:i,source:v.getNode(o),target:v.getNode(i),edge:t.connection.edge})}),L(c.groupDragStop,function(t){m.getLayout().setPosition(t.group.id,t.pos[0],t.pos[1],!0),t.uigroup=t.group,m.fire(c.groupMoveEnd,i.extend(t,{group:v.getGroup(t.uigroup.id)}))}),L(c.groupMemberAdded,function(t){if(!P&&t.el.jtk.node){var e=v.addToGroup(t.el.jtk.node,t.group.id);e&&m.fire(c.groupMemberAdded,{node:t.el.jtk.node,group:e,uigroup:t.group}),ot()}}),L(c.groupMemberRemoved,function(t){if(!P&&t.el.jtk.node){var e=v.removeFromGroup(t.el.jtk.node);e&&(m.nodeRemovedFromGroup(t.el),m.fire(c.groupMemberRemoved,{node:t.el.jtk.node,ugroup:e,igroup:t.group})),ot()}}),L(c.groupCollapse,function(t){var e=v.getGroup(t.group.id);e&&m.fire(c.groupCollapse,{group:e,uigroup:t.group})}),L(c.groupExpand,function(t){var e=v.getGroup(t.group.id);e&&m.fire(c.groupExpand,{group:e,uigroup:t.group})});var G={},U={},V={},B={},W=[],Z={},H=[];this.getNodeCount=function(){return H.length},this.getNodeAt=function(t){return H[t]},this.getNodes=function(){return H},this.getNode=function(t){return G[t]},this.getGroupCount=function(){return W.length},this.getGroupAt=function(t){return W[t]},this.getGroups=function(){return W};var Y={},X=function(t){return Y[t.getId()]},q=function(t,e,n,o){o.bind(t,function(t,i){e.apply(e,[{edge:n,e:i,connection:o,toolkit:v,renderer:m}])})},J=function(t,e,n){if(!n.getParameter("edge")){var o=K.getEdgeDefinition(t);if(o&&o.events)for(var i in o.events)q(i,o.events[i],e,n)}};this.setSuspendRendering=function(t,e){P=t,I.setSuspendDrawing(t),e&&this.refresh()},this.batch=function(t){this.setSuspendEvents(!0),v.batch(t),this.setSuspendEvents(!1)};var K,Q=function(t,e){if(P)tt.push([t,e]);else{var n=S(e);if(null!=n){var i=o.isArray(n)?n:[n];i.unshift(t),I.addToPosse.apply(I,i)}}},$=function(){for(var t=0;t<tt.length;t++)Q.apply(this,tt[t])},tt=[];if(!1!==this.bindToolkitEvents){var et=function(){tt.length=0,I.setSuspendDrawing(!0),this.setSuspendRendering(!0)}.bind(this);v.bind(c.dataLoadStart,et),v.bind(c.dataAppendStart,et),v.bind(c.dataLoadEnd,function(){this.setSuspendRendering(!1),$(),I.getGroupManager().refreshAllGroups(),st(),m.relayout(),I.setSuspendDrawing(!1,!0),b&&m.fire(c.dataLoadEnd)}.bind(this)),v.bind(c.dataAppendEnd,function(){this.setSuspendRendering(!1),$(),m.refresh(),I.setSuspendDrawing(!1,!0),b&&m.fire(c.dataAppendEnd)}.bind(this));var nt=function(t,e){var n=G[t.id];if(null==n){if(!0===K.getNodeDefinition(v.getNodeType(t.data)).ignore)return!1;if(!(n=dt(t,t.data,t)))throw new Error("Cannot render node");var o=I.getId(n);G[t.id]=n,U[o]=t,H.push(t),n.jtk={node:t},null==t.group?m.append(n,o,e?e.position:null):function(t,e,n){var o=B[n.id];o&&((o.querySelector("[jtk-group-content]")||o).appendChild(t),I.addToGroup(n.id,t,!0),m.nodeAppendedToGroup(t,o,n))}(n,0,t.group),Q(n,t),jt(n,t);var i={node:t,el:n,id:t.id};m.getLayout().nodeAdded(i,e),m.fire(c.nodeAdded,i)}return n};v.bind(c.nodeAdded,function(t){var e,n=t.node,o=nt(n,t.eventInfo);if(null!=o){var i=I.getSelector(o,"[data-port-id]");for(e=0;e<i.length;e++){var r=i[e].getAttribute("data-port-id");V[n.id+"."+r]=i[e],i[e].jtk=i[e].jtk||{node:n,port:n.getPort(r)}}m.refresh(!0)}}),v.bind(c.nodeRemoved,function(t){m.getLayout().nodeRemoved(t.nodeId);var e=G[t.nodeId];m.fire(c.nodeRemoved,{node:t.nodeId,el:e});var n,o,i=I.getId(e);g.remove(e),I.remove(e),delete G[t.nodeId],delete gt[t.nodeId],delete mt[t.nodeId],delete U[i],n=t.node,-1!==(o=H.indexOf(n))&&H.splice(o,1),delete e.jtk,m.refresh(!0)});var ot=function(){t.relayoutOnGroupUpdate&&m.relayout()};v.bind("group:addMember",ot),v.bind("group:removeMember",ot);var it=function(e,n){var r=B[e.id];if(null==r){var s=K.getGroupDefinition(v.getNodeType(e.data));if(!0===s.ignore)return!1;if(!(r=pt(e,e.data,e)))throw new Error("Cannot render Group");var a=I.getId(r);B[e.id]=r,W.push(e),Z[a]=e,r.jtk={group:e},m.append(r,a,n?n.position:null),Q(r,e),jt(r,e);var l={node:e,el:r},d={el:r,id:e.id};i.extend(d,{dragOptions:t.dragOptions||{}}),d.dragOptions[i.dragEvents[u.stop]]=o.wrap(d.dragOptions[i.dragEvents[u.stop]],function(t){t.el.jtk&&t.el.jtk.group&&(d.dragOptions.magnetize?t.pos=m.getLayout().setMagnetizedPosition(t.el.jtk.group.id,t.pos[0],t.pos[1],!0):m.getLayout().setPosition(t.el.jtk.group.id,t.pos[0],t.pos[1],!0),!1!==A&&(m.storePositionInModel({id:t.el.jtk.group.id,group:!0,leftAttribute:k,topAttribute:T}),v.fire(c.groupUpdated,{group:t.el.jtk.group},null)),m.fire(c.groupMoveEnd,{el:t.el,group:t.el.jtk.group,pos:t.pos,e:t.e,eventPosition:t.pos}))}),I.addGroup(i.extend(d,s)),m.getLayout().groupAdded({group:e,el:r,id:e.id},n),m.fire(c.groupAdded,l)}return r};v.bind(c.groupAdded,function(t){var e=t.group;null!=it(e,t.eventInfo)&&m.refresh(!0)}),v.bind(c.groupRemoved,function(t){var e=t.group;m.getLayout().groupRemoved(e.id);var n=B[e.id],o=I.getId(n);I.removeGroup(e.id,t.removeChildNodes,!0,!1),delete B[e.id],delete Z[o],delete n.jtk,m.refresh(!0)}),this.expandGroup=function(t){I.expandGroup("string"==typeof t?t:t.id)},this.collapseGroup=function(t){I.collapseGroup("string"==typeof t?t:t.id)},this.toggleGroup=function(t){I.toggleGroup("string"==typeof t?t:t.id)};var rt=function(t,e){for(var n,o,i=t.getNodes(),r=0,s=0,a=m.getLayout(),l=I.getGroup(t.id).getDragArea(),u=e.autoSizePadding||[10,10],c=0;c<i.length;c++)n=a.getPosition(i[c].id),isNaN(n[0])||isNaN(n[1])||(o=a.getSize(i[c].id),r=Math.max(r,n[0]+o[0]+u[0]),s=Math.max(s,n[1]+o[1]+u[1]));r=e.maxSize?Math.min(e.maxSize[0],r):r,s=e.maxSize?Math.min(e.maxSize[1],s):s,l.style.width=r+"px",l.style.height=s+"px",a.setSize(t.id,[r,s])},st=function(){for(var t in B){var e=v.getGroup(t);if(e){var n=K.getGroupDefinition(v.getNodeType(e.data));n.autoSize&&rt(e,n)}}};m.autoSizeGroups=st,m.sizeGroupToFit=function(t){if(t){var e=K.getGroupDefinition(v.getNodeType(t.data));e.autoSize&&rt(t,e)}};v.bind(c.edgeAdded,function(e){if(!R&&e.source!==m){var n=e.edge,o=K.getEdgeDefinition(v.getEdgeType(n.data||{}));if(o&&!0===o.ignore)return;var i=function(e,n){return function(){var o=ut(e);o.doNotFireConnectionEvent=!0,n&&(o.geometry=n),v.isDebugEnabled()&&console.log("Renderer","adding edge with params",o);var i=I.connect(o);i.edge=e,Y[e.getId()]=i,J(o.type,e,i),m.fire(c.edgeAdded,{source:e.source,target:e.target,connection:i,edge:e,geometry:n}),t.refreshLayoutOnEdgeConnect&&m.refresh(!0);var r=e.source.getNode?e.source.getNode():e.source,s=G[r.id]||B[r.id],a=e.target.getNode?e.target.getNode():e.target;!1!==(G[a.id]||B[a.id])._jtkVisible&&!1!==s._jtkVisible||kt(e,!1)}}(n,e.geometry);t.connectionHandler?t.connectionHandler(n,i):i()}}),v.bind(c.edgeRemoved,function(t){if(!R&&t.source!==m){var e=t.edge,n=Y[e.getId()];n&&(v.isDebugEnabled()&&console.log("Renderer","removing edge",e),function(t){m.fire(c.edgeRemoved,{sourceNodeId:t.source.getNode?t.source.getNode().getId:t.source.getFullId(),targetNodeId:t.target.getNode?t.target.getNode().getId:t.target.getFullId(),sourcePortId:"Port"===t.source.objectType?t.source.id:null,targetPortId:"Port"===t.target.objectType?t.target.id:null,sourceId:t.source.getFullId(),targetId:t.target.getFullId(),source:t.source,target:t.target,edge:t})}(e),delete Y[e.getId()],null!=n._jsPlumb&&I.deleteConnection(n,{fireEvent:!1}))}}),v.bind(c.edgeTypeChanged,function(t){if(!R&&t.source!==m){var e=t.obj,n=Y[e.getId()];if(n){var o=K.getEdgeDefinition(t.newType);if(o&&!0===o.ignore)return;o.connector&&n.setConnector(o.connector),n.setType(t.newType,e.data)}}}),v.bind(c.edgeTarget,function(t){if(!R){var e=t.edge,n=Y[e.getId()],i=G[e.target.getFullId()]||B[e.target.getFullId()];n?I.silently(function(){null!=i?(v.isDebugEnabled()&&console.log("target change",n),I.setTarget(n,i)):(delete Y[e.getId()],I.detach({connection:n,forceDetach:!0,fireEvent:!1}))}):null!=i&&v.isDebugEnabled()&&o.log("Target for Edge "+e.getId()+" changed to Node "+i.id+"; we have no valid connection.")}}),v.bind(c.edgeSource,function(t){if(!R){var e=t.edge,n=Y[e.getId()],i=G[e.source.getFullId()]||B[e.source.getFullId()];n?I.silently(function(){null!=i?I.setSource(n,i):(delete Y[e.getId()],I.detach({connection:n,forceDetach:!0,fireEvent:!1}))}):null!=i&&v.isDebugEnabled()&&o.log("Source for Edge "+e.getId()+" changed to Node "+i.id+"; we have no valid connection.")}}),v.bind("graphClearStart",function(){for(var t in I.reset(!0),B)void 0!==B[t]._rotors&&g.remove(B[t]),B[t].parentNode&&B[t].parentNode.removeChild(B[t]);for(var e in G)void 0!==G[e]._rotors&&g.remove(G[e]),G[e].parentNode&&G[e].parentNode.removeChild(G[e]);b&&b.clear(),H.length=0,W.length=0,Y={},G={},B={},U={},Z={},V={},ft={},m.getZoom&&I.setZoom(m.getZoom())}),v.bind(c.portAdded,function(t){var e=G[t.node.id]||B[t.node.id];if(K.getPortDefinition(v.getPortType(t.data)).isEndpoint)xt(new yt(t.data,e,t.port),t.node);else{var n=ht(t.port,t.data,t.node);V[t.node.id+v.getGraph().getPortSeparator()+t.port.id]=n,jt(I.getElement(n),t.node),m.fire(c.portAdded,{node:t.node,nodeEl:e,port:t.port,portEl:n})}I.recalculateOffsets(e),m.refresh(!0)}),v.bind(c.portRemoved,function(t){var e=G[t.node.id]||B[t.node.id],n=t.node.id+"."+t.port.id,o=V[n];I.setSuspendEvents(!0),I.remove(o),I.setSuspendEvents(!1),delete V[n],m.fire(c.portRemoved,{node:t.node,port:t.port,portEl:o,nodeEl:e}),I.recalculateOffsets(e),m.refresh(!0)}),v.bind(c.edgeUpdated,function(t){var e=Y[t.edge.getId()];if(e){var n=ut(t.edge);e.setType(n.type,n.data)}}),v.bind(c.portUpdated,function(t){var e=V[t.port.getFullId()];e&&(g.update(e,t.port.data),m.repaint(G[t.node.id]))}),v.bind(c.nodeUpdated,function(t){var e=G[t.node.getFullId()];if(e){g.update(e,t.node.data),jt(e,t.node);var n=S(t.node);if(null!=n){var i=o.isArray(n)?n:[n];i.unshift(e),I.setPosse.apply(I,i)}else I.removeFromAllPosses(e);m.repaint(e)}})}this.setView=function(t){var n=o.merge(v.getModel(),t||{});K=new e.Model(n,I)},this.setView(t.view),this.getView=function(){return K};var at=[],lt=function(t){return null==t?v:"string"==typeof t?v.select(t,!0):t.jtk?v.select(t.jtk.port||t.jtk.node,!0):t};this.activateState=function(t,e){var n=K.getState(t);n&&(e=lt(e),n.activate(e,m,v),at.push(n))},this.deactivateState=function(t,e){var n=K.getState(t);n&&(e=lt(e),n.deactivate(e,m,v),o.removeWithFunction(at,function(t){return t==n}))},this.resetState=function(){for(var t=0;t<at.length;t++)at[t].deactivate(v,m,v);at.length=0};var ut=function(t){var e=v.getEdgeType(t.data),n={type:e,connectionType:e,data:t.data,cost:t.getCost(),directed:t.isDirected()},o=K.getEdgeDefinition(e);!function(t){if(o)for(var e=0;e<t.length;e++)o[t[e]]&&(n[t[e]]=o[t[e]])}(["connector","endpoints","endpoint","endpointStyles","endpointStyle"]),n.anchor&&!n.anchors&&(n.anchors=[n.anchor,n.anchor],delete n.anchor),n.endpoint&&!n.endpoints&&(n.endpoints=[n.endpoint,n.endpoint],delete n.endpoint);var i=function(t,e,n,o,i){if(o&&o[n]){var r=t[e]||[o[n],o[n]];r[i]=o[n],t[e]=r}},r=function(e,o){if(t[e].getNode){var r=t[e].getNode(),s=t[e].getFullId(),a=ft[s]||V[s];n[e]=null!=a?a:V[s],null==n[e]&&(n[e]=G[v.getNodeId(r.data)]);var l=K.getPortDefinition(t[e].getType());i(n,"anchors","anchor",l,o),i(n,"endpoints","endpoint",l,o)}else{var u=v.getNodeId(t[e].data);a=0===o?gt[u]:mt[u];n[e]=null==a?G[u]||B[u]:a}};return r("source",0),r("target",1),n},ct=function(t,e,n,o,r,s,a,l){return function(u,c,d){var h,p=e(c),f=null,g=n(c),b=K[o](g),y=c;if(w){y=i.extend({},b&&b.parameters||{}),i.extend(y,c);var P={};for(h in y)y.hasOwnProperty(h)&&null!=y[h]&&(y[h].constructor==Function?P[h]=y[h](c):P[h]=y[h]);y=P}if(b){var E=b.template||"jtk-template-"+g;f=b.templateRenderer?b.templateRenderer(E,y,v,t):j.render(E,y,v,t)}else f=r(y,p);(f=I.getElement(f)).setAttribute(l,p),i.addClass(f,a),f.jtk=f.jtk||{},f.jtk[t]=u,f.jtk.node=d,s&&x&&_t.makeDraggable&&_t.makeDraggable(f,b.dragOptions),C&&_t.makeDroppable&&_t.makeDroppable(f,b.dropOptions);var S=function(t){I.on(f,t,function(e){b.events[t]({node:d,el:f,e:e,toolkit:v,renderer:m})})};if(b&&b.events)for(h in b.events)S(h);return f}},dt=ct("node",v.getNodeId,v.getNodeType,"getNodeDefinition",d,!0,l.NODE,s.NODE),ht=ct("port",v.getPortId,v.getPortType,"getPortDefinition",d,!1,l.PORT,s.PORT),pt=ct("group",v.getNodeId,v.getNodeType,"getGroupDefinition",d,!1,l.GROUP,s.GROUP);this.initialize=function(){var e,n,o,i,r;if(v.setSuspendGraph(!0),I.setSuspendDrawing(!0),t.jsPlumbInstance){var s=t.jsPlumbInstance.select();for(var a in s.each(function(t){Y[t.edge.getId()]=t}),n=t.jsPlumbInstance.getManagedElements()){var l=n[a].el;G[l.jtk.node.id]=l,U[t.jsPlumbInstance.getId(l)]=l.jtk.node}_t.doImport&&_t.doImport(G,Y)}else{for(e=0,o=v.getGroupCount();e<o;e++)i=v.getGroupAt(e),it(i);for(e=0,o=v.getNodeCount();e<o;e++)n=v.getNodeAt(e),nt(n);for(e=0,o=v.getNodeCount();e<o;e++)if(n=v.getNodeAt(e),G[n.id]){var u=v.getAllEdgesFor(n);for(r=0;r<u.length;r++)if(u[r].source==n||u[r].source.getNode&&u[r].source.getNode()==n){var c=K.getEdgeDefinition(v.getNodeType(u[r].data));if(c&&!0===c.ignore)continue;var d=ut(u[r]);d.doNotFireConnectionEvent=!0;var h=I.connect(d);null!=h&&(h.edge=u[r],Y[u[r].getId()]=h,J(d.type,u[r],h))}}}st(),this.relayout(),I.setSuspendDrawing(!1,!0),v.setSuspendGraph(!1)},this.getContainer=function(){return y},this.getContainerId=function(){return D},this.getRenderedElement=function(t){if(null==t)return null;var e=t.getFullId();return"Port"===t.objectType?V[e]:"Group"===t.objectType?B[e]:G[e]},this.getRenderedNode=function(t){return G[t]},this.getRenderedGroup=function(t){return B[t]},this.getRenderedPort=function(t){return V[t]},this.getRenderedConnection=function(t){return Y[t]},this.getRenderedEndpoint=function(t){var e=At(t),n=null;return e&&e.obj&&"Port"===e.obj.objectType&&I.selectEndpoints({element:e.el}).each(function(t){t.graph&&t.graph.port&&t.graph.port===e.obj&&(n=t)}),n};this.adHocLayout=function(t){if(t){var e=b;this.setLayout(t),b=e}},this.setLayout=function(t,n){if(t){var o=i.extend({jsPlumb:this.getJsPlumb()},t);b=function(t){var n=I.extend({container:y,getElementForNode:function(t){return G[t]||B[t]}},t);if(n.jsPlumbToolkit=v,n.adapter=m,!e.Layouts[n.type])throw"no such layout ["+n.type+"]";return n.locationFunction||(n.locationFunction=function(t){return[r.data(t.data,k),r.data(t.data,T)]}),new e.Layouts[n.type](n)}(o),n||m.refresh()}},this.getLayout=function(){return b},this.getMagnetizedElements=function(){return null!=b?b.getMagnetizedElements():[]},this.magnetize=function(t){null!=b&&b.magnetize(t)},this.refresh=function(t){P||t&&!E||(b?b.layout(function(){"undefined"!=typeof window?window.setTimeout(I.repaintEverything,0):I.repaintEverything()}):I.repaintEverything())},this.setRefreshAutomatically=function(t){E=t},this.relayout=function(t){P||(b?b.relayout(t,function(){I.repaintEverything(),this.fire("relayout",this.getBoundsInfo())}.bind(this)):I.repaintEverything())},this.getPath=function(t){var e=v.getPath(t);return e&&(e.setVisible=function(t){m.setVisible(e,t)},e.addNodeClass=function(t){e.eachNode(function(e,n){I.addClass(G[n.id],t)})},e.removeNodeClass=function(t){e.eachNode(function(e,n){I.removeClass(G[n.id],t)})},e.addEdgeClass=function(t){e.eachEdge(function(e,n){Y[n.getId()].addClass(t)})},e.removeEdgeClass=function(t){e.eachEdge(function(e,n){Y[n.getId()].removeClass(t)})},e.addClass=function(t){this.addNodeClass(t),this.addEdgeClass(t)},e.removeClass=function(t){this.removeNodeClass(t),this.removeEdgeClass(t)}),e},this.getPosition=function(t){var e=this.getLayout();if(e){var n=At(t).id;return e.getPosition(n)}},this.getSize=function(t){return I.getSize(At(t).el)},this.getCoordinates=function(t){var e=this.getLayout();if(e){var n=At(t),o=e.getPosition(n.id),i=I.getSize(n.el);return{x:o[0],y:o[1],w:i[0],h:i[1]}}};var ft={},gt={},mt={},vt=function(t,e,r){var s=t.value("port-id"),a=t.value("port-type")||"default",l=t.value("scope")||I.getDefaultScope(),u=v.getNodeType(e),c=K.getNodeDefinition(u),d=K.getPortDefinition(s,c),h=K.getPortDefinition(a,c),p=o.merge(h,d),f=null==p?{}:n.populate(p,e.data),g=function(t){return function(n){var o=e.getPort(s),i=[{portId:s,nodeId:e.id,port:o,node:e,portType:a,endpoint:n.endpoint,anchor:n.anchor}];t.apply(t,i)}},b=function(t){return function(e){var n=[{connection:e.connection||e,source:At(e.source),target:At(e.target),scope:e.scope}];return t.apply(t,n)}},y=f.edgeType||t.value("edge-type")||"default",x={paintStyle:"connectorStyle",hoverPaintStyle:"connectorHoverStyle",overlays:"connectorOverlays",endpointStyle:"paintStyle"},C=K.getEdgeDefinition(y);if(C)for(var P in C){var E=x[P]||P;null==f[E]&&(f[E]=C[P])}if(f.connectionType=y,f.portId=s,f.portType=a,f.scope=l,f.parameters=f.parameters||{},f.parameters.portId=s,f.parameters.portType=a,f.parameters.edgeType=y,f.parameters.scope=l,f.parameters.nodeId=e.id,f.events={},p.events)for(P in p.events)f.events[P]=g(p.events[P]);if(p.interceptors)for(P in p.interceptors)f[P]=b(p.interceptors[P]);var j=t.value("anchor-x"),w=t.value("anchor-y"),S=t.value("orientation-x"),k=t.value("orientation-y"),T=t.value("offset-x"),A=t.value("offset-y");return null!=j&&null!=w&&(f.anchor=[parseFloat(j),parseFloat(w),parseInt(S||"0",10),parseInt(k||"0",10),parseFloat(T||"0"),parseFloat(A||"0")]),i.extend(f,r||{}),f.events.anchorChanged=function(t){m.fire("anchorChanged",{portId:s,nodeId:e.id,portType:a,node:e,port:e.getPort(s),endpoint:t.endpoint,anchor:t.anchor})},f},bt=function(t){this.element=t.parentNode,this.value=function(e,n){var o=t.getAttribute(e);return null==o?n:o},this.setValue=function(e,n){t.setAttribute(e,n)},this.findDataValues=function(e){for(var n=0;n<t.attributes.length;n++){var o=t.attributes[n];0===o.name.indexOf("data-")&&(e[o.value]=o.name.split("-")[1])}}},yt=function(t,e,n){this.element=e,this.port=n,this.value=function(e,n){var o=t[e.replace(/(\-\w)/g,function(t){return t[1].toUpperCase()})];return null==o?n:o},this.findDataValues=function(e){for(var n in t)0===n.indexOf("data-")&&(e[t[n]]=n.split("-")[1])},this.setValue=function(t,n){e.setAttribute(t,n)}};function xt(t,e,n){if(null==t.value("jtk-processed")){t.setValue("jtk-processed",!0);var o=vt(t,e,n),i=I.addEndpoint(t.element,o);ft[e.id+"."+o.portId]=i;var r=t.port||e.addPort({id:o.portId});i.graph={node:e,port:r},g.onUpdate(t.element,function(){})}}function Ct(t,e){if(e.events)for(var n in e.events)I.on(t,n,e.events[n])}function Pt(t,e,n){if(null==t.value("jtk-processed")){t.setValue("jtk-processed",!0);var o=vt(t,e,n);null!=o.portId&&(V[e.id+"."+o.portId]=t.element,t.element.jtk=t.element.jtk||{},t.element.jtk.port=v.addPort(e,{id:o.portId,type:o.portType||"default"},!0),Ct(t.element,o));var r=t.value("filter");if(r){var s="true"===t.value("filter-exclude");o.filter=r,o.filterExclude=s}if("true"===t.value("is-source")&&(o.isSource=!0),delete o.uniqueEndpoint,delete o.createEndpoint,o.extract={},t.findDataValues(o.extract),"true"===t.value("endpoint")){o.maxConnections=-1,o.isSource=!0;var a=I.addEndpoint(t.element,o);a.graph={node:e},gt[e.id]=a,g.onUpdate(t.element,function(){})}else{var l,u=t.element._katavorioDrop?t.element._katavorioDrop.length:0;I.makeSource(t.element,o),(t.element._katavorioDrop?t.element._katavorioDrop.length:0)>u&&(l=t.element._katavorioDrop[t.element._katavorioDrop.length-1]),g.onUpdate(t.element,function(t,n){var o=i.getSelector(t,"jtk-source");if(1===o.length){var r=vt(o[0],e);r.scope&&(I.setSourceScope(t,r.scope,r.edgeType),l&&l.k.setDropScope(l,r.scope))}})}}}function Et(t,e,n){if(null==t.value("jtk-processed")){t.setValue("jtk-processed",!0);var o=vt(t,e,n);if(null!=o.portId&&(V[e.id+"."+o.portId]=t.element,t.element.jtk=t.element.jtk||{},t.element.jtk.port=v.addPort(e,{id:o.portId,type:o.portType||"default"},!0),Ct(t.element,o)),"true"===t.value("is-target")&&(o.isTarget=!0),delete o.uniqueEndpoint,delete o.createEndpoint,"true"===t.value("endpoint")){o.maxConnections=-1,o.isTarget=!0;var r=I.addEndpoint(t.element,o);r.graph={node:e},mt[e.id]=r,g.onUpdate(t.element,function(){})}else{I.makeTarget(t.element,o);var s=t.element._katavorioDrop[t.element._katavorioDrop.length-1];g.onUpdate(t.element,function(t,n){var o=i.getSelector(t,"jtk-target");if(1===o.length){var r=vt(o[0],e);r.scope&&(s.targetDef.def.scope=r.scope,s.k.setDropScope(s,r.scope))}})}}}var jt=function(t,e){var n,o=i.getSelector(t,a.PORT),r=i.getSelector(t,a.SOURCE),s=i.getSelector(t,a.TARGET);for(n=0;n<r.length;n++)Pt(new bt(r[n]),e);for(n=0;n<s.length;n++)Et(new bt(s[n]),e);for(n=0;n<o.length;n++)xt(new bt(o[n]),e)};this.setLayout(t.layout,!0),this.storePositionsInModel=function(t){var e=(t=t||{}).leftAttribute||"left",n=t.topAttribute||"top",o=b.getPositions();for(var i in o){var s=v.getNode(i)||v.getGroup(i);s&&(r.data(s.data,e,o[i][0]),r.data(s.data,n,o[i][1]))}},this.storePositionInModel=function(t){var e="string"==typeof t?t:t.id,n="string"==typeof t?"left":t.leftAttribute||"left",o="string"==typeof t?"top":t.topAttribute||"top",i=b.getPosition(e),s=v[t.group?"getGroup":"getNode"](e);return s&&(r.data(s.data,n,i[0]),r.data(s.data,o,i[1])),i};var wt=function(t,e,n,o,i,r,s){return(t=t||At(e))&&(b.setPosition(t.id,n,o),i||(I.setAbsolutePosition(t.el,[n,o],r,s),I.revalidate(t.el))),t};function St(t,e,n){if(1===e.connections.length)e.setVisible(n,!0);else if(n)e.setVisible(!0,!0);else{for(var o=0;o<e.connections.length;o++)if(e.connections[o]!==t&&e.connections[o].isVisible())return;e.setVisible(!1,!0)}}function kt(t,e,n){var o,i=X(t);i&&((!e||!1!==(o=i).endpoints[0].element._jtkVisible&&!1!==o.endpoints[1].element._jtkVisible)&&(i.setVisible(e),n||(St(i,i.endpoints[0],e),St(i,i.endpoints[1],e))))}function Tt(t,e){var n;if(t.eachNode&&t.eachEdge)n={nodes:[],edges:[]},t.eachNode(function(t,o){n.nodes.push(e(At(o)))}),t.eachEdge(function(t,o){n.edges.push(e(At(o)))});else if(t.length&&"string"!=typeof t){n=[];for(var o=0;o<t.length;o++)n.push(e(At(t[o])))}else n=e(At(t));return n}function At(t){return t instanceof I.getDefaultConnectionType()&&(t=t.edge),v.getObjectInfo(t,function(t){return t.getNode?V[t.getFullId()]||G[t.getNode().id]:G[t.id]||B[t.id]})}this.setPosition=function(t,e,n,o){return wt(null,t,e,n,o)},this.animateToPosition=function(t,e,n,o){var i=At(t);if(i){var r=b.getPosition(i.id);wt(i,t,e,n,!1,[r[0],r[1]],o)}},this.isVisible=function(t){return Tt(t,function(t){switch(t.type){case"Edge":var e=X(t.obj);return!!e&&e.isVisible();case"Node":return!1!==t.el._jtkVisible}})},this.setVisible=function(t,e,n){if(null!=t){Tt(t,function(t){switch(t.type){case"Edge":kt(t.obj,e,n);break;case"Node":!function(t,o){if(o&&(o.style.display=e?"block":"none",o._jtkVisible=e,m.fire(c.nodeVisibility,{node:t,el:o,state:e}),!n))for(var i=v.getAllEdgesFor(t),r=0;r<i.length;r++)if(e){var s=i[r].source.getNode?i[r].source.getNode():i[r].source,a=i[r].target.getNode?i[r].target.getNode():i[r].target,l=s===t?a:s;m.isVisible(l)&&kt(i[r],e,n)}else kt(i[r],e,n)}(t.obj,t.el);break;case"Port":o=t.obj,i=o.getFullId(),ft[i].setVisible(e)}var o,i})}},this.addToPosse=function(t,e,o){n.each(t,function(t){var n=At(t);n.el&&I.addToPosse(n.el,{id:e,active:!1!==o})})},this.setPosse=function(t,e){n.each(t,function(t){var n=At(t);n.el&&I.setPosse(n.el,e)})},this.removeFromPosse=function(t,e){n.each(t,function(t){var n=At(t);n.el&&I.removeFromPosse(n.el,e)})},this.removeFromAllPosses=function(t){n.each(t,function(t){var e=At(t);e.el&&I.removeFromAllPosses(e.el)})},this.setPosseState=function(t,e,o){n.each(t,function(t){var n=At(t);n.el&&I.setPosseState(n.el,e,o)})};var _t={jsPlumb:I,toolkit:v,container:y,containerId:D,getConnectionsForEdges:function(t){for(var e=[],n=0;n<t.length;n++)e.push(Y[t[n].getId()]);return e},getConnectionForEdge:X,getElement:function(t){return G[t]||B[t]},getNodeForElementId:function(t){return U[t]},getGroupForElementId:function(t){return Z[t]},getObjectInfo:At,nodeMap:function(){return G},portMap:function(){return V},groupMap:function(){return B},reverseGroupMap:function(){return Z},reverseNodeMap:function(){return U}};return _t};t.DOM=function(t){h.apply(this,arguments),d.apply(this,arguments)}}.call("undefined"!=typeof window?window:this),function(){function t(t,e,n){return function(o){return o[t]/e*(n?-1:1)}}var e={webkit:{mac:t("deltaY",120),win:t("deltaY",100)},safari:function(e){return t("wheelDeltaY",120,!0)},firefox:{mac:function(t){return t.deltaY*(1===t.deltaMode?25:1)*-1/120},win:function(t){return-1*t.deltaY/3}},ie:function(t){return t.wheelDelta/120},default:function(t){return t.deltaY||t.wheelDelta}},n={webkit:{mac:t("deltaX",120),win:t("deltaX",100)},safari:function(e){return t("wheelDeltaX",120,!0)},firefox:{mac:function(t){return t.deltaX*(1===t.deltaMode?25:1)*-1/120},win:function(t){return-1*t.deltaX/3}},ie:function(t){return t.wheelDelta/120},default:function(t){return t.deltaX||t.wheelDelta}},o=/Mac/.test(navigator.userAgent)?"mac":"win",i=-1!==navigator.userAgent.indexOf("Firefox")?"firefox":/Chrome/.test(navigator.userAgent)?"webkit":/Safari/.test(navigator.userAgent)?"safari":/WebKit/.test(navigator.userAgent)?"webkit":/Trident/.test(navigator.userAgent)?"ie":"default",r="function"==typeof e[i]?e[i]:e[i][o],s="function"==typeof n[i]?n[i]:n[i][o],a=function(t,e,n){return function(o){if(!e||null==o.mozInputSource||1===o.mozInputSource){var i=r(o||event),a=function(t){return s(t||event)}(o);o.normalizedWheelDelta=i,(!n||o.metaKey||o.ctrlKey)&&t(o,a,i,o.metaKey||o.ctrlKey)}}},l="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";this.addWheelListener=function(t,e,n,o){var i=a(e,n,o);t.addEventListener?t.addEventListener(l,i,!1):t.attachEvent&&t.attachEvent("onmousewheel",i)}}.call("undefined"!=typeof window?window:this),function(){this.PinchListener=function(t){var e="onpointerdown"in document.documentElement,n="ontouchstart"in document.documentElement,o=[0,0],i=0,r=0,s=function(e){t[e](o,r,i,i/r)},a=function(){t.onPinchEnd()},l=function(t,e,n,o){return Math.sqrt(Math.pow(n-t,2)+Math.pow(o-e,2))},u=function(t){var e=function(t){return t.touches||[]},n=function(t,e){return t.item?t.item(e):t[e]},u=function(t){var e=n(t,0),o=n(t,1);return l(e.pageX,e.pageY,o.pageX,o.pageY)},c=function(t){var e=n(t,0),o=n(t,1);return[(e.pageX+o.pageX)/2,(e.pageY+o.pageY)/2]},d=!1,h=function e(n){d=!1,t.unbind(document,"touchmove",p),t.unbind(document,"touchend",e),a()},p=function(t){if(d){var n=e(t);2===n.length&&(i=u(n),o=c(n),s("onPinch"))}};t.bind(t.el,"touchstart",function(n){var a=e(n);2===a.length&&!1!==t.enableWheelZoom&&(o=c(a),i=r=u(a),d=!0,t.bind(document,"touchmove",p),t.bind(document,"touchend",h),s("onPinchStart"))})};e?function(){var e={},n=[],u=0,c=!1,d=function(){2===u&&(o=[(n[1].p[0]+n[0].p[0])/2,(n[1].p[1]+n[0].p[1])/2],i=l(n[1].p[0],n[1].p[1],n[0].p[0],n[0].p[1]))};t.bind(t.el,"pointerdown",function(t){u>=2||c||(n[u]={e:t,p:[t.pageX,t.pageY]},e[""+t.pointerId]=u,u++,d(),2===u&&(r=i,s("onPinchStart")))}),t.bind(document,"pointerup",function(t){null!=e[""+t.pointerId]&&(delete e[""+t.pointerId],c=0!=--u,a())}),t.bind(document,"pointermove",function(t){if(!c&&2===u){var o=e[t.pointerId];null!=o&&(n[o].p=[t.pageX,t.pageY],d(),s("onPinch"))}})}(t):n&&u(t)}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumb;this.ZoomWidget=function(n){n.events=n.events||{};var r,s,a,l,u=this,c=function(){},d=n.canvas,h=n.domElement||function(t){return t},p=h(d),f=n.viewport,g=h(f),m=n.events.zoom||c,v=(n.events.maybeZoom,n.events.pan||c),b=n.events.mousedown||c,y=n.events.mouseup||c,x=n.events.mousemove||c,C=n.events.transformOrigin||c,P=!(!1===n.clamp),E=!1!==n.clampZoom,j=n.panDistance||50,w=!1!==n.enablePan,S=!1!==n.enableWheelZoom,k=!1!==n.enableAnimation,T=n.wheelFilter||function(){return!0},A=!0===n.wheelZoomMetaKey,_=(!0===n.wheelReverse?-1:1)*(n.wheelSensitivity||10),I=!0===n.wheelPan,D=!1!==n.enablePanButtons,M=n.padding||[0,0],N=!1!==n.consumeRightClick,L=n.smartMinimumZoom,O=!1,F=["webkit","Moz","ms"],R=n.bind,z=n.unbind,G=!(!1===n.enabled),U=n.clampToBackground,V=n.clampToBackgroundExtents,B=n.filter||function(t){return!1},W=n.width,Z=n.height,H=n.zoom||1,Y=[0,0],X=!1,q=!1,J=!1,K=!1,Q=n.zoomRange||[.05,3],$={minx:[],maxx:[],miny:[],maxy:[]},tt={},et={},nt={},ot=!1,it=function(){$.minx.sort(function(t,e){return t[0][0]<e[0][0]?-1:1}),$.miny.sort(function(t,e){return t[0][1]<e[0][1]?-1:1}),$.maxx.sort(function(t,e){return t[0][0]+t[1]>e[0][0]+e[1]?-1:1}),$.maxy.sort(function(t,e){return t[0][1]+t[2]>e[0][1]+e[2]?-1:1})},rt=function(t,e,n,o){null==tt[t]&&(tt[t]=[],$.minx.push(tt[t]),$.miny.push(tt[t]),$.maxx.push(tt[t]),$.maxy.push(tt[t])),tt[t][0]=e,tt[t][1]=n,tt[t][2]=o,tt[t][3]=t,O?ot=!0:it()};this.setBoundsFor=rt,this.setSuspendRendering=function(t){O=t,!t&&ot&&it(),ot=!1};var st=null,at=null,lt=null,ut=function(){window.clearTimeout(st),lt&&n.removeClass(lt,"jtk-surface-pan-active"),lt=null},ct=function(t,e){return function(n){var o=kt(p,10*t,10*e,null);v(o[0],o[1],H,H,n),r&&r.pan(),Vt.pan()}},dt=function(){window.clearTimeout(at)},ht=function(t,e,o,i,s){var a=document.createElement("div");for(var l in a.innerHTML=s||"",a.style.position="absolute",e)a.style[l]=e[l];return a.className="jtk-surface-pan jtk-surface-pan-"+t,g.appendChild(a),n.bind(a,"click",function(t,e){return function(n){kt(p,t*j,e*j,null,!0,function(t){v(t[0],t[1],H,H,n),r&&r.pan(),Vt.pan()})}}(o,i)),n.bind(a,"mousedown",function(t,e,o){return function(){lt=o,n.addClass(lt,"jtk-surface-pan-active"),n.bind(document,"mouseup",ut),st=window.setTimeout(function(){n.bind(document,"mouseup",dt),at=window.setInterval(ct(t,e),60)},150)}}(o,i,a)),a};D&&(ht("top",{left:"0px",top:"0px"},0,-1,"&#8593;"),ht("bottom",{left:"0px",bottom:"0px"},0,1,"&#8595;"),ht("left",{left:"0px",top:"0px"},-1,0,"&#8592;"),ht("right",{right:"0px",top:"0px"},1,0,"&#8594;"));var pt=function(t,e,n){n=n||p;for(var o=0;o<F.length;o++){var i=t.replace(/([a-z]){1}/,function(t){return F[o]+t.toUpperCase()});n.style[i]=e}n.style[t]=e},ft=function(t){pt("transformOrigin",Y[0]+"% "+Y[1]+"%",t)},gt=function(t,e,n,o){var i,r,s=Y[0]/100*e,a=Y[1]/100*n;i=-s*(1-H),r=-a*(1-H),Y=t,ft(),s=Y[0]/100*e,a=Y[1]/100*n;var l=kt(p,-s*(1-H)-i,-a*(1-H)-r,o);C&&C(Y,l)},mt=function(t,e,o){var i=function(t,e){var o=u.mapLocation(t,e),i=[o.left,o.top],r=n.width(d),s=n.height(d);return{w:r,h:s,xy:i,xScale:i[0]/r,yScale:i[1]/s,o:[i[0]/r*100,i[1]/s*100]}}(t,e);gt(i.o,i.w,i.h,o)},vt=function(t){var e=yt(t);mt(e[0],e[1],t)},bt=function(t,e){var o=n.width(d),i=n.height(d);gt([t/o*100,e/i*100],o,i)},yt=this.pageLocation=function(t){if(null!=t.pageX)return[t.pageX,t.pageY];var e=xt(Ct(t),0);return e?[e.pageX,e.pageY]:[0,0]},xt=function(t,e){return t.item?t.item(e):t[e]},Ct=function(t){return t.touches||[]},Pt=function t(e,n,o,i,s){if(!(null==e||isNaN(e)||e<0)){var a=Q[0];if(L){a=.5;var l=Lt().z;e/l<a&&(e=l*a)}else e<a&&(e=a);if(e>Q[1]&&(e=Q[1]),i){var u=e>H?.05:-.05,c=H,d=e<H,h=window.setInterval(function(){c=t(c+u),d&&c<=e&&window.clearInterval(h),!d&&c>=e&&window.clearInterval(h)});return H}pt("transform","scale("+e+")");var f=H;if(H=e,s||m(0,0,H,f,n,o),null!=r&&r.setZoom(e),Vt&&Vt.pan(),E){var g=St(p),v=wt(g[0],g[1]);v[0]==g[0]&&v[1]==g[1]||St(p,v[0],v[1],null,!i)}return H}},Et=function(t,e,n,o){e<-150&&(e=-150),e>150&&(e=150),jt(a,e,-150,150,n,o)},jt=function(t,e,n,o,i,r){var s=t+e/(e>=0?o:n)*(Q[e>=0?1:0]-t);Pt(s,i,r)},wt=function(t,e,o){if(P||U||V){var i=Tt(),s=t,a=e,l=P?Lt():{x:0,y:0,w:0,h:0,vw:n.width(g),vh:n.height(g),padding:o,z:1};if(o=(o||20)*H,(U||V)&&null!=r){var u=r.getWidth(),c=r.getHeight(),d=Math.max(l.x+l.w,u),h=Math.max(l.y+l.h,c);l.w=d-l.w,l.h=h-l.h;var p=l.vw/l.w,f=l.vh/l.h;l.z=Math.min(p,f),V&&(o=Math.max(l.vw,l.vh))}var m=[l.x+l.w,l.y+l.h];r&&(m[0]=Math.max(m[0],r.getWidth()),m[1]=Math.max(m[1],r.getHeight()));var v=t+i[0]+m[0]*H-o,b=e+i[1]+m[1]*H-o,y=t+i[0]+l.x*H+o,x=e+i[1]+l.y*H+o;return v<0&&(s-=v),y>l.vw&&(s-=y-l.vw),b<0&&(a-=b),x>l.vh&&(a-=x-l.vh),[s,a]}return[t,e]},St=function(t,e,o,i,r,s,a){if(1==arguments.length)return[parseInt(t.style.left,10)||0,parseInt(t.style.top,10)||0];var l=wt(e,o);return k&&!r&&n.animate?n.animate(t,{left:l[0],top:l[1]},{step:a,complete:function(){s&&s(l)}}):(t.style.left=l[0]+"px",t.style.top=l[1]+"px",s&&s(l)),l};p.style.left="0px",p.style.top="0px";var kt=function(t,e,n,o,i,r){var s=St(t);return St(t,s[0]+e,s[1]+n,o,!i,r)},Tt=function(){var t=n.width(d),e=n.height(d),o=Y[0]/100*t,i=Y[1]/100*e;return[o*(1-H),i*(1-H)]},At={start:function(t,e){if(!q){var o=t.srcElement||t.target;G&&(o===p||o===g||o._jtkDecoration||r&&r.owns(o)||!0===B(o,t))&&(K=!1,-1,-1,3!==t.which||!1===n.enableWheelZoom||null!=t.mozInputSource&&1!==t.mozInputSource?e.length<=1&&(X=!0,s=yt(t),l=St(p)):(J=!0,s=yt(t),vt(t),l=St(p),a=H)),b(t,u)}},move:function(t,e){var n,o,i;if(K=!1,!q){if(J)n=(i=yt(t))[0]-s[0],o=i[1]-s[1],Et(0,o,t);else if(X&&w&&null!=s){n=(i=yt(t))[0]-s[0],o=i[1]-s[1];var a=St(p,l[0]+n,l[1]+o,t,!0);v(a[0],a[1],H,H,t),r&&r.pan(),Vt&&Vt.pan()}x(t,u)}},end:function(t,e){q||(J=!1,s=null,X=!1,K=!1,z(document,"mousemove",It),z(document,"mouseup",Dt),R(document,"mousemove",Mt),y(t,u))},contextmenu:function(t){}},_t=function(t,e){"contextmenu"===t&&N&&e.preventDefault&&e.preventDefault();var n=Ct(e);At[t](e,n)},It=function(t){_t("move",t)},Dt=function(t){_t("end",t)},Mt=function(t){K=!1};R(document,"mousemove",Mt);var Nt=this.start=function(t){G&&null!=t&&(z(document,"mousemove",Mt),R(document,"mousemove",It),R(document,"mouseup",Dt),At.start(t,Ct(t)))};if(R(f,"mousedown",Nt),R(f,"contextmenu",function(t){_t("contextmenu",t)}),S){addWheelListener(g,function(t,e,n,o){T(t)&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!I||o?function(t,e,n){a=H,K||(vt(t),K=!0),Et(0,t.normalizedWheelDelta*_,t,!0)}(t):function(t,e,n,o){o||Ft(100*-e,100*-n)}(0,e,n,o))},!0,A)}function Lt(t,e){if(function(){for(var t in tt)return!1;return!0}())return{w:0,h:0,x:0,y:0,vw:n.width(g),vh:n.height(g),padding:t,z:1,zoom:1};t=t||0,e=e||.9;var o=Math.abs($.maxx[0][0][0]+$.maxx[0][1]-$.minx[0][0][0]),i=Math.abs($.maxy[0][0][1]+$.maxy[0][2]-$.miny[0][0][1]),r=n.width(g),s=n.height(g),a=r/((o+2*t)/e),l=s/((i+2*t)/e),u=Math.min(a,l);return{w:o,h:i,x:$.minx[0][0][0],y:$.miny[0][0][1],vw:r,vh:s,padding:t,z:u,zoom:H}}function Ot(t){for(var e in $)if($.hasOwnProperty(e)){for(var n=-1,o=0;o<$[e].length;o++)if($[e][o][3]===t){n=o;break}-1!==n&&$[e].splice(n,1)}}new PinchListener({el:f,bind:R,unbind:z,enableWheelZoom:n.enableWheelZoom,onPinch:function(t,e,n,o){Pt(o*a);var i=t[0]-s[0],r=t[1]-s[1];St(p,l[0]+i,l[1]+r,null,!0)},onPinchStart:function(t,e){q=!0,e,a=H,mt((s=t)[0],s[1]),l=St(p)},onPinchEnd:function(){q=!1,s=null}}),Pt(H,null,!1,!1,!0),ft(),this.isPinchZooming=function(){return q},this.positionChanged=function(t,e,o){o=o||n.id(t);var i=e||St(t),r=n.width(t),s=n.height(t);et[o]=t,rt(o,i,r,s)},this.add=function(t,e,n,o){this.positionChanged(t,n,e),o&&(R(t,"mousedown",Nt),t._jtkDecoration=!0)},this.suspend=function(t){var e="string"==typeof t?t:n.id(t);nt[e]=!0,Ot(e)},this.isSuspended=function(t){var e="string"==typeof t?t:n.id(t);return!0===nt[e]},this.restore=function(t){var e="string"==typeof t?t:n.id(t);delete nt[e],this.positionChanged(t,null,e)},this.remove=function(t){t=h(t);var e=n.id(t);delete tt[e],delete et[e],delete nt[e],Ot(e)},this.reset=function(){$.minx.length=0,$.miny.length=0,$.maxx.length=0,$.maxy.length=0,tt={},et={},nt={},St(p,0,0,null,!0)},this.getBoundsInfo=Lt,this.zoomToFit=function(t){var e=Lt((t=t||{}).padding,t.fill);t.doNotZoomIfVisible&&e.z>H||Pt(e.z),u.centerContent({bounds:e,doNotAnimate:!1!==t.doNotAnimate,onComplete:t.onComplete,onStep:t.onStep,doNotFirePanEvent:t.doNotFirePanEvent})},this.zoomToFitIfNecessary=function(e){var n=t.extend(e||{});n.doNotZoomIfVisible=!0,this.zoomToFit(n)},this.zoomToElements=function(t){for(var e={x:1/0,y:1/0,xMax:-1/0,yMax:-1/0,z:1,vw:n.width(g),vh:n.height(g)},o=0;o<t.elements.length;o++){var i=t.elements[o],r=tt[n.id(i)];r&&(e.x=Math.min(e.x,r[0][0]),e.y=Math.min(e.y,r[0][1]),e.xMax=Math.max(e.xMax,r[0][0]+r[1]),e.yMax=Math.max(e.yMax,r[0][1]+r[2]))}var s=t.fill||.9;e.w=e.xMax-e.x,e.h=e.yMax-e.y,e.z=s*Math.min(e.vw/e.w,e.vh/e.h),t.doNotZoomIfVisible&&e.z>H||Pt(e.z),u.centerContent({bounds:e,doNotAnimate:!1!==t.doNotAnimate,onComplete:t.onComplete,onStep:t.onStep,doNotFirePanEvent:t.doNotFirePanEvent})},this.zoomToBackground=function(t){if(t=t||{},null!=r){var e=r.getWidth(),n=r.getHeight(),o=W(g),i=Z(g),s=o/e,a=i/n,l={w:e,h:n,x:0,y:0,vw:o,vh:i,padding:0,z:Math.min(s,a)};Pt(l.z),u.centerContent({bounds:l,doNotAnimate:t.doNotAnimate,onComplete:t.onComplete,onStep:t.onStep})}},this.setFilter=function(t){B=t||function(t){return!1}},this.centerBackground=function(){if(null!=r){var e=t.extend({},Lt());e.x=r.getWidth()/2,e.y=r.getHeight()/2,e.w=1,e.h=1,u.centerContent({bounds:e,doNotAnimate:n.doNotAnimate,onComplete:n.onComplete,onStep:n.onStep,vertical:!0,horizontal:!0})}},this.alignBackground=function(t){if(null!=r){var e=t.split(" "),n=e[0]||"left",o=e[1]||"top",i=Lt(),s="left"===n?0:i.vw-r.getWidth()*H,a="top"===o?0:i.vh-r.getHeight()*H,l=Tt();St(p,s-l[0],a-l[1]),r.pan(),Vt&&Vt.pan()}},this.positionElementAt=function(t,e,o,i,r,s){i=i||0,r=r||0;var a=Tt(),l=St(p),u=h(t),c=u.parentNode,d=n.offset(c),g=n.offset(f),m=g.left-d.left+(l[0]+a[0])+e*H+i,v=g.top-d.top+(l[1]+a[1])+o*H+r;s&&m<0&&(m=0),s&&v<0&&(v=0),u.style.left=m+"px",u.style.top=v+"px"},this.positionElementAtPageLocation=function(t,e,n,o,i){var r=this.mapLocation(e,n);this.positionElementAt(t,r.left,r.top,o,i)},this.positionElementAtEventLocation=function(t,e,n,o){var i=this.mapEventLocation(e);this.positionElementAt(t,i.left,i.top,n,o)},this.zoomToEvent=function(t,e){vt(t),Pt(H+e,t)},this.relayout=function(t,e){if(!1===n.enablePan){St(p,-t.x+M[0],-t.y+M[1],null,e);var o=t.w+(t.x<0?t.x:0)+M[0],i=t.h+(t.y<0?t.y:0)+M[1];p.style.width=o+"px",p.style.height=i+"px";var r=0===o?0:(t.x-M[0])/o*100,s=0===i?0:(t.y-M[1])/i*100;this.setTransformOrigin(r,s)}},this.nudgeZoom=function(t,e){var o=n.offset(g,!0),i=o.left+n.width(g)/2,r=o.top+n.height(g)/2;return mt(i,r),Pt(H+t,e)},this.nudgeWheelZoom=function(t,e){a=H,Et(0,t,e,!0)},this.centerContent=function(t){var e=(t=t||{}).bounds||Lt(),n=Tt(),o=e.x*H+e.w*H/2,i=e.y*H+e.h*H/2,s=e.vw/2-o,a=e.vh/2-i,l=St(p);St(p,!1!==t.horizontal?s-n[0]:l[0],!1!==t.vertical?a-n[1]:l[1],null,t.doNotAnimate,function(){t.doNotFirePanEvent||v(!1!==t.horizontal?s-l[0]:0,!1!==t.vertical?a-l[1]:0,H,H),r&&r.pan(),Vt&&Vt.pan(),t.onComplete&&t.onComplete()},t.onStep)},this.centerContentHorizontally=function(e){this.centerContent(t.extend({horizontal:!0,vertical:!1},e))},this.centerContentVertically=function(e){this.centerContent(t.extend({vertical:!0,horizontal:!1},e))},this.centerOn=function(e,n){n=n||{};var o=t.extend({},Lt()),i=St(e),r=W(e),s=Z(e);o.x=i[0],o.y=i[1],o.w=r,o.h=s;this.centerContent({bounds:o,doNotAnimate:n.doNotAnimate,onComplete:function(){bt(i[0]+r/2,i[1]+s/2),n.onComplete&&n.onComplete()},onStep:n.onStep,vertical:!1!==n.vertical,horizontal:!1!==n.horizontal})},this.centerOnHorizontally=function(t){this.centerOn(t,{vertical:!1})},this.centerOnVertically=function(t){this.centerOn(t,{horizontal:!1})},this.centerOnAndZoom=function(t,e){e=e||.6;var n={w:W(t),h:Z(t)},o=St(t),i=Lt(),r=i.vw<i.vh?[i.vw,"w"]:[i.vh,"h"],s=e*r[0]/n[r[1]];s<Q[0]&&(s=Q[0]),s>Q[1]&&(s=Q[1]);var a=H,l=s-H;bt(o[0]+n.w/2,o[1]+n.h/2),this.centerOn(t,{onStep:function(t,e){Pt(a+t/e*l)},onComplete:function(){Pt(s)}})},this.getViewportCenter=function(){var e=t.extend({},Lt()),n=Tt(),o=St(p),i=[e.vw/2,e.vh/2];return[(i[0]-(o[0]+n[0]))/H,(i[1]-(o[1]+n[1]))/H]},this.setViewportCenter=function(e){var n=t.extend({},Lt()),o=Tt(),i=[n.vw/2,n.vh/2],r=[-(e[0]*H-i[0]+o[0]),-(e[1]*H-i[1]+o[1])];St(p,r[0],r[1])},this.setClamping=function(t){P=t},this.setZoom=function(t,e,n){return Pt(t,null,null,e,n)},this.setZoomRange=function(t,e){return null!=t&&2===t.length&&t[0]<t[1]&&null!=t[0]&&null!=t[1]&&t[0]>0&&t[1]>0&&(Q=t,e||(H<Q[0]||H>Q[1])&&Pt(H)),Q},this.getZoomRange=function(){return Q},this.getZoom=function(){return H},this.getPan=function(){return St(p)};var Ft=this.pan=function(t,e,n){kt(p,t,e,null,n,function(t){v(t[0],t[1],H,H),r&&r.pan(),Vt&&Vt.pan()})};this.setPan=function(t,e,n,o,i){return St(p,t,e,null,!n,o,i)},this.setTransformOrigin=function(t,e){Y=[t,e],ft()};var Rt=this.calculateCumulativeScroll=function(t){for(var e=t,n=0,o=0;null!=e&&e!==document.body;)isNaN(e.scrollLeft)||(n+=e.scrollLeft),isNaN(e.scrollTop)||(o+=e.scrollTop),e=e.parentNode;return{left:n,top:o}},zt=this.calculateOffset=function(t){for(var e=t,n=0,o=0;null!=e&&e!==document.body;)n+=e.offsetLeft,o+=e.offsetTop,e=e.offsetParent;return{left:n,top:o}};this.mapLocation=function(t,e,n){var o=Tt(),i=St(p),r=Rt(g),s=n?{left:0,top:0}:zt(g);return{left:(t-(i[0]+o[0])-s.left+r.left)/H,top:(e-(i[1]+o[1])-s.top+r.top)/H}},this.mapEventLocation=function(t,e){var n=yt(t);return this.mapLocation(n[0],n[1],e)},this.setEnabled=function(t){G=t},this.showElementAt=function(t,e,o){var i=h(t).parentNode,r=n.offset(i),s=n.offset(f),a=Tt(),l=r.left-s.left+a[0]+e,u=r.top-s.top+a[1]+o;n.offset(t,{left:l,top:u})},this.getApparentCanvasLocation=function(){var t=Tt(),e=St(p);return[e[0]+t[0],e[1]+t[1]]},this.setApparentCanvasLocation=function(t,e){var n=Tt(),o=St(p,t-n[0],e-n[1],null,!0);return r&&r.pan(),Vt&&Vt.pan(),o},this.applyZoomToElement=function(t,e){pt("transform","scale("+(e=e||H)+")",t)},this.setTransformOriginForElement=function(t,e){pt("transformOrigin",e[0]+" "+e[1],t)},this.getTransformOrigin=function(){return Y},this.floatElement=function(t,e){null!=t&&(t.style.position="absolute",t.style.left=e[0]+"px",t.style.top=e[1]+"px",g.appendChild(t))};var Gt={},Ut=function(t){var e=u.getApparentCanvasLocation();for(var n in Gt)if(Gt.hasOwnProperty(n)){if(null!=t&&t!==n)continue;var o=Gt[n],i=function(t,n){o[t]&&(e[n]/H+o.pos[n]<0?o.el.style[t]=-e[n]/H+"px":o.el.style[t]=o.pos[n]+"px")};i("left",0),i("top",1)}},Vt={pan:Ut};this.fixElement=function(t,e,o){if(null!=t){e=e||{};var i=n.id(t);Gt[i]={el:t,left:e.left,top:e.top,pos:o},t.style.position="absolute",t.style.left=o[0]+"px",t.style.top=o[1]+"px",p.appendChild(t),Ut(i)}},this.findIntersectingNodes=function(t,e,o,i,r){var s,a=this.getApparentCanvasLocation(),l=n.offset(g),u=g.scrollLeft,c=g.scrollTop,d=[],h={x:t[0],y:t[1],w:e[0],h:e[1]},p=o?Biltong.encloses:Biltong.intersects,f=[l.left+a[0]-u,l.top+a[1]-c];if(r=r||tt,Array.isArray(r)){var m={};for(s=0;s<r.length;s++)m[jsPlumbUtil.isString(r[s])?r[s]:jsPlumb.getId(r[s])]=r[s];r=m}for(s in r)if(!nt[s]){var v=tt[s];if(v){var b={x:f[0]+v[0][0]*H,y:f[1]+v[0][1]*H,w:v[1]*H,h:v[2]*H};p(h,b)&&(null==i||i(s,et[s],b))&&d.push({id:s,el:et[s],r:b})}}return d},this.findNearbyNodes=function(t,e,n,o){var i=[];if(!n||this.isInViewport(t[0],t[1])){i=this.findIntersectingNodes([t[0]-e,t[1]-e],[2*e,2*e],!1,o);var r=this.mapLocation(t[0],t[1]);i.sort(function(t,e){var n=[t.x+t.w/2,t.y+t.h/2],o=[e.x+e.w/2,e.y+e.h/2],i=Biltong.lineLength(r,n),s=Biltong.lineLength(r,o);return i<s?-1:i>s?1:0})}return i},this.isInViewport=function(t,e){var o=n.offset(g),i=n.width(g),r=n.height(g);return o.left<=t&&t<=o.left+i&&o.top<=e&&e<=o.top+r},this.getElementPositions=function(){return tt},this.setFilter=function(t){B=t||function(t){return!1}},this.setWheelFilter=function(t){T=t||function(t){return!0}},this.setBackground=function(t){var n=t.type||"simple",s={simple:e,tiled:"absolute"===t.tiling?i:o};r=new s[n]({canvas:p,viewport:g,getWidth:W,getHeight:Z,url:t.url,zoomWidget:u,onBackgroundReady:t.onBackgroundReady,options:t,img:t.img,resolver:t.resolver})},n.background&&this.setBackground(n.background),this.getBackground=function(){return r}};var e=function(t){var e=t.canvas,n=t.onBackgroundReady||function(){},o=new Image;o.onload=function(){e.style.backgroundImage="url('"+o.src+"')",e.style.backgroundRepeat="no-repeat",e.style.width=o.width+"px",e.style.height=o.height+"px",n(this)},o.src=t.img?t.img.src:t.url,this.owns=function(t){return t===e},this.getWidth=function(){return o.width||0},this.getHeight=function(){return o.height||0},this.setZoom=this.pan=function(t){}},n=function(t){var e=this,n=t.canvas,o=t.viewport;if(null==t.options.maxZoom)throw new TypeError("Parameter `maxZoom` not set; cannot initialize TiledBackground");if(!t.options.tileSize)throw new TypeError("Parameter `tileSize not set; cannot initialize TiledBackground. It should be an array of [x,y] values.");if(!t.options.width||!t.options.height)throw new TypeError("Parameters `width` and `height` must be set");for(var i,r=function(n){var o=document.createElement("div");o.style.position="relative",o.style.height="100%",o.style.width="100%",o.style.display="none",t.canvas.appendChild(o),this.zoom=n;var i=e.getTileSpecs(n),r=[],s=function(e,n,o){return null==t.resolver?function(e,n,o){return t.url.replace("{z}",e).replace("{x}",n).replace("{y}",o)}(e,n,o):t.resolver(e,n,o)};this.apparentZoom=Math.min(i[2],i[3]),this.setActive=function(t){o.style.display=t?"block":"none"},this.xTiles=i[0],this.yTiles=i[1];for(var a=0;a<this.xTiles;a++){r[a]=r[a]||[];for(var l=0;l<this.yTiles;l++){var u=document.createElement("img");u._tiledBg=!0,u.className="jtk-surface-tile",u.ondragstart=function(){return!1},o.appendChild(u),u.style.position="absolute",u.style.opacity=0,r[a][l]=[u,new Image,!1]}}var c=Math.pow(2,t.options.maxZoom-n)*t.options.tileSize[0],d=Math.pow(2,t.options.maxZoom-n)*t.options.tileSize[1];this.scaledImageSize=c,this.scaledImageSizeH=d;var h=function(t,e,o,i){t.style.left=o*c+"px",t.style.top=i*d+"px",t.style.width=c+"px",t.style.height=d+"px",e.onload=function(){t.setAttribute("src",e.src),t.style.opacity=1},e.src=s(n,o,i)};this.ensureLoaded=function(t,e,n,o){for(var i=t;i<=n;i++)for(var s=e;s<=o;s++)null!=r[i]&&null!=r[i][s]&&(r[i][s][2]||(h(r[i][s][0],r[i][s][1],i,s),r[i][s][2]=!0))}}.bind(this),s=[],a=null,l=0;l<=t.options.maxZoom;l++)s.push(new r(l));n.style.width=t.options.width+"px",n.style.height=t.options.height+"px";var u=function(){var e=t.zoomWidget.getApparentCanvasLocation(),n=t.getWidth(o),r=t.getHeight(o),s=a.scaledImageSize*i,l=a.scaledImageSizeH*i,u=e[0]<0?Math.floor(-e[0]/s):e[0]<n?0:null,c=e[1]<0?Math.floor(-e[1]/l):e[1]<r?0:null,d=Math.min(a.xTiles,Math.floor((n-e[0])/s)),h=Math.min(a.yTiles,Math.floor((r-e[1])/l));null!=u&&null!=c&&a.ensureLoaded(u,c,d,h)};this.getCurrentLayer=function(){return a},this.getWidth=function(){return t.options.width},this.getHeight=function(){return t.options.height};var c=t.options.panDebounceTimeout||50,d=t.options.zoomDebounceTimeout||120,h=function(t,e){e=e||150;var n=null;return function(){window.clearTimeout(n),n=window.setTimeout(t,e)}},p=function(){var t,e;t=function(){if(i<=s[0].apparentZoom)return 0;if(i>=s[s.length-1].apparentZoom)return s.length-1;for(var t=s.length-1;t>0;t--)if(s[t].apparentZoom>=i&&i>=s[t-1].apparentZoom)return t}(),e=s[t],null!=a&&a!==e&&a.setActive(!1),e.setActive(!0),a=e,u()},f=h(p,d),g=h(u,c);this.setZoom=function(t,e){i=t,e?p():f()},this.pan=g,this.owns=function(t){return t===n||!0===t._tiledBg},this.setZoom(t.zoomWidget.getZoom(),!0),null!=t.onBackgroundReady&&setTimeout(t.onBackgroundReady,0)},o=function(t){var e=t.options.width,o=t.options.height,i=t.options.tileSize;this.getTileSpecs=function(t){var n=e>o?1:e/o,r=o>e?1:o/e,s=Math.pow(2,t+1)*i[0]*n,a=Math.pow(2,t+1)*i[1]*r;return[Math.ceil(s/i[0]),Math.ceil(a/i[1]),s/e,a/o]},n.apply(this,arguments)},i=function(t){var e=t.options.maxZoom,o=t.options.width,i=t.options.height,r=t.options.tileSize;this.getTileSpecs=function(t){var n=Math.pow(2,e-t),s=Math.ceil(o/n/r[0]),a=Math.ceil(i/n/r[1]);return[s,a,s*r[0]/o,a*r[1]/i]},n.apply(this,arguments)}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit,e=t.Renderers,n=this.jsPlumb,o=this.jsPlumbUtil,i=n.getSelector,r=t.Classes,s=t.Constants,a=t.Events;e.Surface=function(l){var u=this;e.Surface.SELECT=s.select,e.Surface.PAN=s.pan,e.Surface.DISABLED=s.disabled;var c=e.AbstractRenderer.apply(this,arguments);e.DOMElementAdapter.apply(this,arguments),this.getObjectInfo=c.getObjectInfo,l=l||{};var d,h=n.getElement(l.container),p=e.createElement({position:s.relative,width:s.nominalSize,height:s.nominalSize,left:0,top:0,clazz:r.SURFACE_CANVAS},h),f=!(!1===l.elementsDraggable),g=!0===l.elementsDroppable,m=l.dragOptions||{},v=l.dropOptions||{},b=l.stateHandle,y=!1!==l.storePositionsInModel,x=l.modelLeftAttribute,C=l.modelTopAttribute,P=new ZoomWidget({viewport:h,canvas:p,domElement:c.jsPlumb.getElement,addClass:c.jsPlumb.addClass,removeClass:c.jsPlumb.removeClass,offset:this.getOffset,consumeRightClick:l.consumeRightClick,bind:function(){c.jsPlumb.on.apply(c.jsPlumb,arguments)},unbind:function(){c.jsPlumb.off.apply(c.jsPlumb,arguments)},width:function(t){return c.jsPlumb.getWidth(c.jsPlumb.getElement(t))},height:function(t){return c.jsPlumb.getHeight(c.jsPlumb.getElement(t))},id:c.jsPlumb.getId,animate:function(){c.jsPlumb.animate.apply(c.jsPlumb,arguments)},dragEvents:{stop:n.dragEvents[s.stop],start:n.dragEvents[s.start],drag:n.dragEvents[s.drag]},background:l.background,padding:l.padding,panDistance:l.panDistance,enablePan:l.enablePan,enableWheelZoom:l.enableWheelZoom,wheelSensitivity:l.wheelSensitivity,wheelReverse:l.wheelReverse,wheelZoomMetaKey:l.wheelZoomMetaKey,wheelPan:l.wheelPan,enablePanButtons:l.enablePanButtons,enableAnimation:l.enableAnimation,clamp:l.clamp,clampZoom:l.clampZoom,clampToBackground:l.clampToBackground,clampToBackgroundExtents:l.clampToBackgroundExtents,zoom:l.zoom,zoomRange:l.zoomRange,extend:c.jsPlumb.extend,events:{pan:function(t,e,n,o,i){u.fire(a.pan,{x:t,y:e,zoom:n,oldZoom:o,event:i})},zoom:function(t,e,n,o,i){c.jsPlumb.setZoom(n),u.fire(a.zoom,{x:t,y:e,zoom:n,oldZoom:o,event:i})},mousedown:function(){n.addClass(h,r.SURFACE_PANNING),n.addClass(document.body,r.SELECT_DEFEAT)},mouseup:function(){n.removeClass(h,r.SURFACE_PANNING),n.removeClass(document.body,r.SELECT_DEFEAT)}}}),E=[],j=l.lassoSelectionFilter,w=!1!==l.autoExitSelectMode,S=new t.Widgets.Lasso({on:function(){c.jsPlumb.on.apply(c.jsPlumb,arguments)},off:function(){c.jsPlumb.off.apply(c.jsPlumb,arguments)},invert:l.lassoInvert,pageLocation:P.pageLocation,canvas:h,onStart:function(){u.setHoverSuspended(!0),E.length=0},onSelect:function(t,e,n,o){var i=[],r=P.findIntersectingNodes(t,e,!n[0]);function s(t){return t.el.jtk.node||t.el.jtk.group}c.jsPlumb.clearDragSelection&&c.jsPlumb.clearDragSelection(),c.toolkit.clearSelection(),o&&E.length>0&&c.toolkit.removeFromSelection(E);for(var a=0;a<r.length;a++)null!=j&&!1===j(s(r[a]))||(i.push(s(r[a])),c.jsPlumb.addToDragSelection&&c.jsPlumb.addToDragSelection(r[a].el));E=i,c.toolkit.addToSelection(i,o)},onEnd:function(){u.setHoverSuspended(!1),w&&u.setMode(s.pan),u.fire("lasso:end")},filter:l.lassoFilter}),k={pan:function(){S.setEnabled(!1),P.setEnabled(!0)},select:function(){c.jsPlumb.clearDragSelection&&c.jsPlumb.clearDragSelection(),S.setEnabled(!0),P.setEnabled(!1)},disabled:function(){c.jsPlumb.clearDragSelection&&c.jsPlumb.clearDragSelection(),S.setEnabled(!0),P.setEnabled(!1)}};l.mode||s.pan;u.bind(a.relayout,function(t){P.relayout(t,!0)}),u.bind(a.nodeRemoved,function(t){P.remove(t.el)}),c.toolkit.bind(a.graphClearStart,function(){P.reset()}),c.toolkit.bind(a.dataLoadStart,function(){P.setSuspendRendering(!0)}),c.toolkit.bind(a.dataLoadEnd,function(){P.setSuspendRendering(!1),d&&d.setVisible(!0),l.zoomToFit&&u.zoomToFit()}),c.toolkit.bind(a.groupMemberAdded,function(t){var e=c.nodeMap()[t.node.id];if(e){var n=u.getJsPlumb().getGroup(t.group.id),o=u.getSize(n.getDragArea()),i=u.getSize(e);P.suspend(e),u.fire(a.groupMemberAdded,t),c.jsPlumb.addToGroup(t.group.id,e,!0);var r=null==t.node.data.left?(o[0]-i[0])/2:t.node.data.left,s=null==t.node.data.top?(o[1]-i[1])/2:t.node.data.top;u.setPosition(t.node.id,r,s)}}),c.toolkit.bind(a.groupMemberRemoved,function(t){var e=c.nodeMap()[t.node.id];if(e){P.restore(e),u.fire(a.groupMemberRemoved,t),c.jsPlumb.removeFromGroup(t.group.id,e,!0);var n=c.jsPlumb.getOffset(e);u.getLayout().setPosition(t.node.id,n.left,n.top)}}),c.jsPlumb.setContainer(p),n.addClass(h,r.SURFACE),!1===l.enablePan&&n.addClass(h,r.SURFACE_NO_PAN);var T=function(t,e){var n=function(t){var n=t.srcElement||t.target;n!=h&&n!=p||u.fire(e,t)};c.jsPlumb.on(p,t,n),c.jsPlumb.on(h,t,n)};T(a.tap,a.canvasClick),T(a.dblclick,a.canvasDblClick);c.makeDraggable=function(t,e){if(f){var i=n.getElement(t),l=c.jsPlumb.getId(i),d=c.jsPlumb.extend({},m),p=n.dragEvents[s.stop],g=n.dragEvents[s.start];null!=e&&c.jsPlumb.extend(d,e),d[g]=o.wrap(d[g],function(){if(P.isPinchZooming())return!1;P.getBoundsInfo();var t,e,o=(t=arguments,e=n.getDragObject(t),{node:n.getElement(e).jtk.node,el:e});o.elementId=l,o.pos=n.getAbsolutePosition(i),o.domEl=i,n.addClass(h,r.SURFACE_ELEMENT_DRAGGING),u.fire(a.nodeMoveStart,o)}),d[p]=o.wrap(d[p],function(t){for(var e=function(e){n.removeClass(h,r.SURFACE_ELEMENT_DRAGGING);var o={el:e[0],node:e[0].jtk.node||e[0].jtk.group,pos:[e[1].left,e[1].top],e:t.e,eventPosition:t.pos};d.magnetize&&!o.node.group?o.pos=u.getLayout().setMagnetizedPosition(o.node.id,o.pos[0],o.pos[1],!0):u.getLayout().setPosition(o.node.id,o.pos[0],o.pos[1],!0),P.positionChanged(e[0]),!1!==y&&(u.storePositionInModel({id:o.node.id,leftAttribute:x,topAttribute:C}),c.toolkit.fire(a.nodeUpdated,{node:o.node},null)),u.fire(a.nodeMoveEnd,o)},o=0;o<t.selection.length;o++)e(t.selection[o])}),d.canDrag=function(){return!S.isActive()},d.force=!0,c.jsPlumb.draggable(i,d,!1,c.jsPlumb)}},c.makeDroppable=function(t,e){if(g){var i=n.getElement(t),r=c.jsPlumb.extend({},v);null!=e&&c.jsPlumb.extend(r,e),r[s.drop]=o.wrap(r[s.drop],function(t){var e={source:t.drag.el.jtk.node,sourceElement:t.drag.el,target:t.drop.el.jtk.node,targetElement:t.drop.el,e:t.e};u.fire(a.nodeDropped,e)}),c.jsPlumb.droppable(i,r)}},c.doImport=function(t){l.jsPlumbInstance.setContainer(p);var e=l.jsPlumbInstance.getManagedElements();for(var n in e){var o=e[n].el;A(o,n)}};var A=this.importNode=function(t,e){var o=l.jsPlumbInstance.getOffset(t),i=l.jsPlumbInstance.getId(t);t.style.left=o.left+s.px,t.style.top=o.top+s.px,n.addClass(t,r.NODE),P.add(t,i,[o.left,o.top],!1),this.getLayout().setPosition(e,o.left,o.top),n.isAlreadyDraggable(t)&&c.makeDraggable(t),c.nodeMap()[e]=t,c.reverseNodeMap()[i]=t.jtk.node,null!=d&&d.registerNode({el:t,node:t.jtk.node,pos:n.getAbsolutePosition(t)})}.bind(this);function _(t){return null==t?null:"string"==typeof t?this.getRenderedConnection(t):t.constructor==n.Connection?t:u.getRenderedConnection(t.getId())}function I(){if(!c.jsPlumb.startEditing)throw new TypeError("Connection editors not available.")}this.zoomToSelection=function(t){var e=[];((t=t||{}).selection||(t.filter?c.toolkit.filter(t.filter):c.toolkit.getSelection())).eachNode(function(t,n){e.push(c.getElement(n.id))}),e.length>0&&P.zoomToElements({elements:e,fill:t.fill,doNotZoomIfVisible:t.doNotZoomIfVisible})},this.zoomToBackground=P.zoomToBackground,this.zoomToVisible=function(t){(t=n.extend({},t||{})).selection=c.toolkit.filter(function(t){return"Node"===t.objectType&&this.isVisible(t)}.bind(this)),this.zoomToSelection(t)},this.zoomToVisibleIfNecessary=function(t){var e=n.extend(t||{});e.doNotZoomIfVisible=!0,this.zoomToVisible(e)},this.zoomToFit=P.zoomToFit,this.zoomToFitIfNecessary=P.zoomToFitIfNecessary,this.centerOn=function(t,e){var n=this.getObjectInfo(t);n&&n.el&&P.centerOn(n.el,e)},this.centerOnHorizontally=function(t){this.centerOn(t,{vertical:!1})},this.centerOnVertically=function(t){this.centerOn(t,{horizontal:!1})},this.centerOnAndZoom=function(t,e){var n=this.getObjectInfo(t);n&&n.el&&P.centerOnAndZoom(n.el,e)},this.centerContent=P.centerContent,this.centerContentHorizontally=P.centerContentHorizontally,this.centerContentVertically=P.centerContentVertically,this.getViewportCenter=P.getViewportCenter,this.setViewportCenter=P.setViewportCenter,this.setStateHandle=function(t){b=t},this.getStateHandle=function(){return b},this.setLassoSelectionFilter=function(t){j=t},this.getApparentCanvasLocation=P.getApparentCanvasLocation,this.setApparentCanvasLocation=P.setApparentCanvasLocation,this.getBoundsInfo=P.getBoundsInfo,this.setZoom=P.setZoom,this.setZoomRange=P.setZoomRange,this.getZoomRange=P.getZoomRange,this.getZoom=P.getZoom,this.nudgeZoom=P.nudgeZoom,this.nudgeWheelZoom=P.nudgeWheelZoom,this.pageLocation=P.pageLocation,this.getPan=P.getPan,this.pan=P.pan,this.setPan=P.setPan,this.startEditing=function(t,e){I();var n=_(t);null!=n&&c.jsPlumb.startEditing(n,e)},this.stopEditing=function(t){I();var e=_(t);null!=e&&c.jsPlumb.stopEditing(e)},this.clearEdits=function(t){I();var e=_(t);null!=e&&c.jsPlumb.clearEdits(e)},this.setPanAndZoom=function(t,e,n,o){this.setPan(t,e,!o),this.setZoom(n,!o)},this.setPanFilter=function(t){P.setFilter(t?function(e,n){return"function"==typeof t?t.apply(t,[n]):o.matchesSelector(e,t)}:null)},this.setWheelFilter=function(t){P.setWheelFilter(function(e){if(t){var n=e.srcElement||e.target;return!o.matchesSelector(n,t)}return!0})},this.setWheelFilter(l.wheelFilter),this.setPanFilter(l.panFilter),this.mapLocation=P.mapLocation,this.mapEventLocation=P.mapEventLocation,this.findNearbyNodes=P.findNearbyNodes,this.findIntersectingNodes=P.findIntersectingNodes,this.findIntersectingGroups=function(t,e,n,o){return P.findIntersectingNodes(t,e,n,o,c.reverseGroupMap())},this.isInViewport=P.isInViewport,this.getViewportCenter=P.getViewportCenter,this.positionElementAt=P.positionElementAt,this.positionElementAtEventLocation=P.positionElementAtEventLocation,this.positionElementAtPageLocation=P.positionElementAtPageLocation,this.setFilter=P.setFilter,this.floatElement=P.floatElement,this.fixElement=P.fixElement;var D=this.setPosition,M=this.animateToPosition,N=function(t,e,n){t&&(P.positionChanged(t.el,[e,n]),u.fire(a.nodeMoveEnd,{el:t.el,id:t.id,pos:[e,n],node:t.obj||(t.el.jtk?t.el.jtk.node||t.el.jtk.group:{}),bounds:P.getBoundsInfo()}))};this.setPosition=function(t,e,n,o){var i=D.apply(this,arguments);N(i,e,n)},this.animateToPosition=function(t,e,n,o){var i=M.apply(this,arguments);N(i,e,n)},this.tracePath=function(t){var e,o,i=t.path||(e=c.getObjectInfo(t.source),o=c.getObjectInfo(t.target),c.toolkit.getPath({source:e,target:o}));if(i.exists()){for(var r=function(e,n){this.fire(e,{edge:n.edge,connection:n,options:t.options})}.bind(this),s=[],a=null,l=null,u=i.path.path.length,d=1;d<u;d++){var h=i.path.path[d].vertex.id,p=i.path.previous[h],f=!0,g=i.path.path[d].edge;null!=p&&(f=p===g.source),l=(a=c.getConnectionForEdge(g)).animateOverlay(t.overlay,n.extend(t.options||{},{previous:l,isFinal:d===u-1,forwards:f})),s.push({handler:l,connection:a})}return s.length>0&&(s[0].handler.bind(jsPlumbToolkit.Events.startOverlayAnimation,function(){r(jsPlumbToolkit.Events.startOverlayAnimation,s[0].connection)}),s[s.length-1].handler.bind(jsPlumbToolkit.Events.endOverlayAnimation,function(){r(jsPlumbToolkit.Events.endOverlayAnimation,s[s.length-1].connection)})),!0}return c.toolkit.isDebugEnabled()&&jsPlumbUtil.log("Cannot trace non existent path"),!1},this.getNodePositions=function(){var t={},e=P.getElementPositions();for(var n in e){var o=c.getNodeForElementId(n)||c.getGroupForElementId(n);o&&(t[o.id]=[e[n][0][0],e[n][0][1]])}return t},this.append=function(t,e,n,o){p.appendChild(t),n&&(n=[n.left,n.top]),P.add(t,e,n,o)},this.nodeAppendedToGroup=function(t,e,n){P.suspend(t)},this.nodeRemovedFromGroup=function(t){P.restore(t)};var L=this.setLayout;this.setLayout=function(t,e){L.apply(this,[t,e]),d&&d.setHostLayout(this.getLayout())};for(var O=function(t){c.jsPlumb.on(p,t,".jtk-node, .jtk-node *",function(e){var o=e.srcElement||e.target;if(null==o&&(o=(e=n.getOriginalEvent(e)).srcElement||e.target),null!=o&&o.jtk){var i=n.extend({e:e,el:o},o.jtk);u.fire(t,i,e)}})},F=0;F<e.mouseEvents.length;F++)O(e.mouseEvents[F]);c.toolkit.bind(s.select,function(t){if(t.obj.objectType==s.nodeType||t.obj.objectType==s.groupType){var e=c.getElement(t.obj.id);e&&(n.addClass(e,r.SURFACE_SELECTED_ELEMENT),c.jsPlumb.addToDragSelection&&c.jsPlumb.addToDragSelection(e))}else if(t.obj.objectType==s.edgeType){var o=c.getConnectionForEdge(t.obj);o&&o.addClass(r.SURFACE_SELECTED_CONNECTION)}}),c.toolkit.bind(a.selectionCleared,function(){c.jsPlumb.clearDragSelection&&c.jsPlumb.clearDragSelection(),n.removeClass(i("."+r.SURFACE_SELECTED_CONNECTION),r.SURFACE_SELECTED_CONNECTION),n.removeClass(i("."+r.SURFACE_SELECTED_ELEMENT),r.SURFACE_SELECTED_ELEMENT)}),c.toolkit.bind(a.deselect,function(t){if(t.obj.objectType==s.nodeType||t.obj.objectType==s.groupType){var e=c.getElement(t.obj.id);e&&(n.removeClass(e,r.SURFACE_SELECTED_ELEMENT),c.jsPlumb.removeFromDragSelection&&c.jsPlumb.removeFromDragSelection(e))}else if(t.obj.objectType==s.edgeType){var o=c.getConnectionForEdge(t.obj);o&&o.removeClass(r.SURFACE_SELECTED_CONNECTION)}});var R=this.setOffset;this.setOffset=function(t,e){R.apply(this,arguments),P.positionChanged(t,[e.left,e.top])},this.setMode=function(t,e,n){if(!k[t])throw new TypeError("Surface: unknown mode '"+t+"'");t,k[t](),t!==s.select||e||c.toolkit.clearSelection(),n&&t===s.select&&n.lassoSelectionFilter&&(j=n.lassoSelectionFilter),u.fire(a.modeChanged,t)};var z=function(t,e){var o=n.extend({},t);o.source=c.getObjectInfo(t.source).obj,o.target=c.getObjectInfo(t.target).obj,o.element=c.getObjectInfo(t.element).obj;var i=c.toolkit[e](o),r=c.getConnectionsForEdges(i);return c.jsPlumb.select({connections:r})};this.selectEdges=function(t){return z(t,"getEdges")},this.selectAllEdges=function(t){return z(t,"getAllEdges")},this.repaint=function(t){var e=c.getObjectInfo(t);if(e.el){c.jsPlumb.recalculateOffsets(e.el),c.jsPlumb.revalidate(c.jsPlumb.getId(e.el));var n=c.jsPlumb.getSize(e.el);u.getLayout().setSize(e.obj.getFullId(),n),u.fire(a.objectRepainted,e)}},this.repaintEverything=c.jsPlumb.repaintEverything,this.setElementsDraggable=function(t){f=!1!==t};this.registerDroppableNodes=function(t){return new function(t){if(!t||!(t.droppables||t.source&&t.selector||!0===t.allowNative))throw new TypeError("Cannot configure droppables: you must specify either `droppables`, `source` + `selector` or `allowNative:true`");var e,i=t.dataGenerator||function(){return{}},l=t.typeExtractor,d=t.locationSetter||function(t,e,n){n.left=t,n.top=e},p=null,f=t.droppables?t.droppables:t.source?t.source.querySelectorAll(t.selector):[],g=t.dragOptions||{},m=t.dropOptions||{},v="scope_"+(new Date).getTime(),b=n.dragEvents[s.start],y=n.dragEvents[s.drag],x=n.dragEvents[s.stop],C=n.dragEvents[s.drop],E=t.nativeFilter||[],j=t.allowNative,w={};if(g[b]=o.wrap(g[b],function(){p&&u.getJsPlumb().removeClass(p.el,"jtk-drag-hover"),p=null,t.start&&t.start.apply(t.start,arguments)}),g[y]=o.wrap(g[y],function(){try{if(p&&u.getJsPlumb().removeClass(p.el,"jtk-drag-hover"),"true"===arguments[0].el.getAttribute("jtk-group"))p=null;else{var e=arguments[0].e.pageX-arguments[0].pos[0],n=arguments[0].e.pageY-arguments[0].pos[1],o=u.findIntersectingGroups(arguments[0].pos,[e,n]);if(o.length>0){var i=o[0].el,r=i.jtk.group;p={el:i,group:r,uiGroup:u.getJsPlumb().getGroup(r.id)},u.getJsPlumb().addClass(p.el,"jtk-drag-hover")}else p=null}}catch(t){console.log("WARN: could not compute target groups for new node drag",t)}t.drag&&t.drag.apply(t.drag,arguments)}),g[x]=o.wrap(g[x],t.stop||function(){}),m.scope=v,m[C]=o.wrap(m[C],function(e,n,o){p&&u.getJsPlumb().removeClass(p.el,"jtk-drag-hover");var r=!0;if(t.drop&&(r=!1!==t.drop.apply(this,arguments)),r){var s=u.getJsPlumb(),a=c.jsPlumb.getDragObject(arguments),h=s.getOffset(o?S:a,!0),f=P.mapLocation(h.left,h.top),g=l?l(a,e,o,f):null,m=i?i(g,a,e,f):{},v="true"===a.getAttribute("jtk-group");if(m=m||{},null!=g&&(m.type=g),!v&&null!=p){var b=u.getOffset(p.uiGroup.getDragArea());f.left-=b.left,f.top-=b.top}d(f.left,f.top,m),v?c.toolkit.getGroupFactory()(g,m,function(n){var o=c.toolkit.addGroup(n,{position:f});return t.onDrop&&t.onDrop(o,e,f),o},e,o):c.toolkit.getNodeFactory()(g,m,function(n){var o=c.toolkit.addNode(n,{position:f});return null!=p&&(c.toolkit.addToGroup(o,p.group),u.setPosition(c.nodeMap()[o.id],f.left,f.top),s.getDragManager().updateOffsets(p.el)),t.onDrop&&t.onDrop(o,e,f),o},e,o)}}),j){var S=document.createElement(s.div);for(S.style.position=s.absolute,e=0;e<E.length;e++)w[E[e]]=!0;var k=function(t){return null!=t.dataTransfer&&1===t.dataTransfer.items.length&&(0===E.length||w[t.dataTransfer.items[0].type])};document.addEventListener(a.dragover,function(t){t.stopPropagation(),t.preventDefault(),k(t)&&(n.setAbsolutePosition(S,[t.pageX,t.pageY]),g[y].apply(null,[t,{helper:S,offset:{left:t.pageX,top:t.pageY}},!0]))},!1),document.addEventListener(a.drop,function(t){t.stopPropagation(),t.preventDefault(),k(t)&&(m[C].apply(null,[t,{helper:S,offset:{left:t.pageX,top:t.pageY}},!0]),g[x].apply(null))},!1),document.addEventListener(a.dragend,function(t){})}var T=c.jsPlumb.getEventManager(),A=new Katavorio({bind:T.on,unbind:T.off,getSize:c.jsPlumb.getSize,getConstrainingRectangle:function(t){return[t.parentNode.scrollWidth,t.parentNode.scrollHeight]},getPosition:function(t,e){var n=P.calculateCumulativeScroll(t),o=P.calculateOffset(t);return[o.left-n.left,o.top-n.top]},setPosition:function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"},addClass:c.jsPlumb.addClass,removeClass:c.jsPlumb.removeClass,intersects:Biltong.intersects,indexOf:function(t,e){return t.indexOf(e)},scope:c.jsPlumb.getDefaultScope(),css:{noSelect:c.jsPlumb.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}});function _(t){c.jsPlumb.hasClass(t,r.SURFACE_DROPPABLE_NODE)||(c.jsPlumb.addClass(t,r.SURFACE_DROPPABLE_NODE),A.draggable(t,g))}for(A.droppable(h,m),g.scope=v,g.ignoreZoom=!0,g.doNotRemoveHelper=!0,e=0;e<f.length;e++)_(c.jsPlumb.getElement(f[e]));return{refresh:function(){if(!t.source||!t.selector)throw new TypeError("Cannot refresh droppables; `source` and `selector` required in constructor.");for(var e=t.source.querySelectorAll(t.selector),n=0;n<e.length;n++)_(e[n])}}}(t)},this.createMiniview=function(e){if(null!=d){var o=c.jsPlumb.getId(c.jsPlumb.getElement(e.container));if(d.getContainerId()===o)return!1}var i=n.extend({surface:u,toolkit:c.toolkit,surfaceContainerElement:h,bounds:P.getBoundsInfo(),visible:!1!==e.initiallyVisible||c.toolkit.getNodeCount()>0,layout:{type:s.mistletoeLayoutType,parameters:{layout:u.getLayout()}},typeFunction:e.typeFunction},e);d=new t.Renderers.Miniview(i);var r=c.nodeMap();for(var a in r){var l=r[a];d.registerNode({el:l,node:l.jtk.node,pos:n.getAbsolutePosition(l)})}var p=c.groupMap();for(var a in p){l=p[a];d.registerNode({el:l,node:l.jtk.group,pos:n.getAbsolutePosition(l)})}return d},l.miniview&&this.createMiniview(l.miniview),this.getMiniview=function(){return d};var G=function(t,e,n){var o=c.getObjectInfo(e),i=null;if(o.el&&("Port"===!o.obj.objectType||!function(){var t=u.getRenderedEndpoint(o.obj);if(t)return i=t.setEnabled(n),!0}())){var r="set"+t+"Enabled";i=c.jsPlumb[r](o.el,n)}return i};this.setTargetEnabled=G.bind(this,"Target"),this.setSourceEnabled=G.bind(this,"Source"),this.setEnabled=function(t,e){this.setTargetEnabled(t,e),this.setSourceEnabled(t,e)},this.State={save:function(e,n){if(e=2===arguments.length?arguments[0]:1===arguments.length&&"string"==typeof arguments[0]?arguments[0]:b,n=2===arguments.length?arguments[1]:1===arguments.length&&"function"==typeof arguments[0]?arguments[0]:function(t,e){return e(t)},e)try{n(u.State.serialize(),function(n){t.util.Storage.set(s.jtkStatePrefix+e,n)})}catch(t){o.log(r.msgCannotSaveState,t)}},serialize:function(){var t=P.getPan();t.push(P.getZoom()),t.push.apply(t,P.getTransformOrigin());var e=t.join(","),n=u.getLayout().getPositions(),o=[];for(var i in n)o.push(i+" "+n[i][0]+" "+n[i][1]);return e+=","+o.join("|")},restore:function(e,n){if(e=2===arguments.length?arguments[0]:1===arguments.length&&"string"==typeof arguments[0]?arguments[0]:b,n=2===arguments.length?arguments[1]:1===arguments.length&&"function"==typeof arguments[0]?arguments[0]:function(t,e){return e(t)},e)try{var i=t.util.Storage.get(s.jtkStatePrefix+e);i&&n(i,u.State.deserialize)}catch(t){o.log(r.msgCannotRestoreState,t)}},deserialize:function(t){for(var e=t.split(",")[5].split("|"),n=u.getLayout(),o=0;o<e.length;o++){var i=e[o].split(" ");try{u.setPosition(i[0],parseFloat(i[1]),parseFloat(i[2]))}catch(t){}}n.draw()},clear:function(e){(e=e||b)&&t.util.Storage.clear(s.jtkStatePrefix+e)},clearAll:function(){t.util.Storage.clearAll()}},u.saveState=u.State.save,u.store=t.util.Storage.set,u.retrieve=t.util.Storage.get,u.storeJSON=t.util.Storage.setJSON,u.retrieveJSON=t.util.Storage.getJSON,u.restoreState=function(t){u.State.restore(t),u.getJsPlumb().repaintEverything(),u.fire(a.stateRestored)},u.clearState=function(t){u.state.clear(t)},u.initialize(),l.zoomToFitIfNecessary?u.zoomToFitIfNecessary():l.zoomToFit&&u.zoomToFit()},t.DefaultRendererType=s.surfaceType,"undefined"!=typeof exports&&(exports.Surface=e.Surface)}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit,e=t.Renderers,n=this.jsPlumbUtil,o=this.jsPlumb,i=t.Classes,r=t.Constants,s=t.Events,a=t.Attributes,l=t.Methods;e.Miniview=function(t){this.bindToolkitEvents=!1;var u=e.AbstractRenderer.apply(this,arguments),c=this;e.DOMElementAdapter.apply(this,arguments);var d,h=t.surface,p=o.getElement(t.container),f=e.createElement({position:r.relative,width:r.nominalSize,height:r.nominalSize,left:0,top:0,clazz:i.MINIVIEW_CANVAS},p),g=e.createElement({position:r.absolute,width:r.nominalSize,height:r.nominalSize,left:0,top:0,clazz:i.MINIVIEW_PANNER},p),m=t.bounds,v=!0===t.suspended,b=!1!==t.collapsible,y=t.typeFunction,x=null,C=!1,P=t.wheelSensitivity||10,E=new ZoomWidget({viewport:p,canvas:f,domElement:o.getElement,offset:this.getOffset,bind:function(){u.jsPlumb.on.apply(u.jsPlumb,arguments)},unbind:function(){u.jsPlumb.off.apply(u.jsPlumb,arguments)},enableWheelZoom:!1,enablePanButtons:!1,enablePan:!1,enableAnimation:!1,width:function(t){return u.jsPlumb.getWidth(u.jsPlumb.getElement(t))},height:function(t){return u.jsPlumb.getHeight(u.jsPlumb.getElement(t))},id:u.jsPlumb.getId,animate:u.jsPlumb.animate,dragEvents:{stop:o.dragEvents[r.stop],start:o.dragEvents[r.start],drag:o.dragEvents[r.drag]},extend:o.extend,events:{pan:function(){z()},mousedown:function(){o.addClass(g,i.MINIVIEW_PANNING)},mouseup:function(){o.removeClass(g,i.MINIVIEW_PANNING)}},zoomRange:[-1/0,1/0]}),j=!1,w=null,S=null,k=t.elementFilter||function(){return!0},T=function(t){if(!1,j){var e=E.pageLocation(t),n=e[0]-w[0],i=e[1]-w[1],r=[S[0]+n,S[1]+i];z(r);o.setAbsolutePosition(g,r)}},A=function t(e){j=!1,w=null,o.off(document,s.mouseup,t),o.off(document,s.mousemove,T)};o.on(window,s.resize,jsPlumbToolkitUtil.debounce(function(){R()},100)),!1!==t.enableWheelZoom&&addWheelListener(p,function(t){n.consume(t),h.nudgeWheelZoom(t.normalizedWheelDelta*P,t)}),E.setTransformOriginForElement(g,[0,0]),o.addClass(p,i.MINIVIEW),o.on(g,s.mousedown,function(t){j=!0,w=E.pageLocation(t),S=o.getAbsolutePosition(g),o.on(document,s.mouseup,A),o.on(document,s.mousemove,T),n.consume(t)}),b&&((x=o.createElement("div")).className=i.MINIVIEW_COLLAPSE,p.appendChild(x),o.on(x,r.click,function(t){o[(C=!C)?l.addClass:l.removeClass](p,i.MINIVIEW_COLLAPSED),_(!0)}));var _=function(t){E.zoomToFit({onComplete:R,onStep:R,doNotFirePanEvent:t})};t.toolkit.bind(s.dataLoadEnd,_);var I=function(t){var e=t.node||t.group;if(!e||!1!==k(e)){m=t.bounds;var n=u.nodeMap()[(t.node||t.group).id]||t.el;E.positionChanged(n,t.pos),o.setAbsolutePosition(n,t.pos),_(!0),this.fire(s.nodeMoveEnd,t)}}.bind(this),D=function(t,n){if(!t.node||!1!==k(t.node)){var s=o.getSize(t.el),l=e.createElement({position:r.absolute,width:s[0]+r.px,height:s[1]+r.px,left:0,top:0,clazz:i.MINIVIEW_ELEMENT+(n?" "+n:"")});if(y&&l.setAttribute("jtk-miniview-type",y(t.node)),l.relatedElement=t.el,l.jtk=t.node,m=h.getBoundsInfo(),l.setAttribute(a.jtkNodeId,t.node.id),l.setAttribute(a.relatedNodeId,t.el.getAttribute(r.id)),f.appendChild(l),E.add(l),u.nodeMap()[(t.node||t.group).id]=l,t.group)!function(t,e){for(var n=t.getNodes(),o=0;o<n.length;o++){var i=u.nodeMap()[n[o].id];i&&e.appendChild(i)}}(t.group,l);else if(t.node.group){var d=u.nodeMap()[t.node.group.id];d&&(d.appendChild(l),E.suspend(t.el))}c.getLayout().map(t.node.id,l),R()}};this.registerNode=function(t){D(t,"Group"===t.node.objectType?i.MINIVIEW_GROUP_ELEMENT:""),I(t)};var M=this.setOffset;this.setOffset=function(t,e){M.apply(this,arguments),E.positionChanged(t,[e.left,e.top])};var N=this.setAbsolutePosition;this.setAbsolutePosition=function(t,e){N.call(this,t,e),E.positionChanged(t,e)},this.setVisible=function(t){t,p.style.display=t?r.block:r.none},this.setVisible(!1!==t.visible),this.getPan=E.getPan;var L=function(t,e){for(var n=t.getNodes(),o=0;o<n.length;o++)u.nodeMap()[n[o].id].style.display=e?"block":"none"},O=function(t){var e=u.nodeMap()[t.id];if(e){var n=o.getSize(e.relatedElement);e.style.width=n[0]+r.px,e.style.height=n[1]+r.px,R(),y&&e.setAttribute("jtk-miniview-type",y(t.obj))}};this.invalidate=function(t){if(t)O({id:t});else{var e=u.nodeMap();for(var n in e)O({id:n})}},this.setSuspended=function(t,e){v=t,e&&this.update()},this.update=R;var F=function(t){var e=t.node,n=u.nodeMap()[e];n&&(E.remove(n),delete u.nodeMap()[e],u.jsPlumb.removeElement(n)),t.dontUpdatePanner||R()};h.bind(s.pan,R),h.bind(s.zoom,R),h.bind(s.nodeMoveEnd,I),h.bind(s.nodeRemoved,F),h.bind(s.nodeAdded,D),h.bind(s.nodeRendered,D),h.bind(s.groupMoveEnd,I),h.bind(s.groupAdded,function(t){D(t,i.MINIVIEW_GROUP_ELEMENT)}),h.bind(s.groupMoveEnd,I),h.bind(s.groupMemberAdded,function(t){var e=u.nodeMap()[t.group.id],n=u.nodeMap()[t.node.id];e&&n&&e.appendChild(n)}),h.bind(s.groupMemberRemoved,function(t){var e=u.nodeMap()[t.node.id];e&&f.appendChild(e)}),h.bind(s.groupCollapse,function(t){L(t.group,!1),O({id:t.group.id})}),h.bind(s.groupExpand,function(t){L(t.group,!0),O({id:t.group.id})}),h.bind(s.relayout,R),h.bind(s.objectRepainted,O),h.bind(s.stateRestored,R),h.bind(s.nodeVisibility,function(t){var e=t.node.id,n=u.nodeMap()[e];n&&(n.style.display=t.state?"block":"none")}),t.toolkit.bind(s.graphClearStart,function(){var t=u.nodeMap();for(var e in t)F({node:e,dontUpdatePanner:!0});R()});function R(t){if(h&&E&&!v){m=h.getBoundsInfo();var e=h.getApparentCanvasLocation(),n=E.getApparentCanvasLocation(),i=E.getZoom()/m.zoom;g.style.width=m.vw+r.px,g.style.height=m.vh+r.px,E.applyZoomToElement(g,i);var s=[e[0]*i,e[1]*i];d=[n[0]-s[0],n[1]-s[1]],o.setAbsolutePosition(g,d)}}function z(t){if(null!=E){m=h.getBoundsInfo(),t=t||o.getAbsolutePosition(g);var e=E.getApparentCanvasLocation(),n=E.getZoom()/m.zoom,i=(e[0]-t[0])/n,r=(e[1]-t[1])/n,s=h.setApparentCanvasLocation(i,r);return[e[0]-s[0]*n,e[1]-s[1]*n]}}c.getLayout().bind(s.redraw,function(){_(!0)}),this.setHostLayout=function(t){var e=c.getLayout();e&&e.setHostLayout(t)},this.setZoom=E.setZoom,this.getZoom=E.getZoom,this.getTransformOrigin=E.getTransformOrigin}}.call("undefined"!=typeof window?window:this),function(){var t=this.jsPlumbToolkit.Widgets,e=this.jsPlumbUtil,n="ontouchstart"in document.documentElement,o=n?"touchstart":"mousedown",i=n?"touchend":"mouseup",r=n?"touchmove":"mousemove",s="jtk-lasso-select-defeat",a="jtk-lasso",l="jtk-lasso-mask",u="jtk-lasso-mask-left",c="jtk-lasso-mask-top",d="jtk-lasso-mask-right",h="jtk-lasso-mask-bottom",p="onselectstart",f=function(){};t.Lasso=function(t){var n,g=t.canvas,m=!1,v={},b=[0,0],y=t.onStart||f,x=t.onEnd||f,C=t.onSelect||f,P=!1,E=!1,j=!0===t.invert,w=function(t,e){if(j){var o=window.innerWidth,i=window.innerHeight,r=window.scrollX,s=window.scrollY,a=i-t[1]+s,l=i-a+e[1],u=o-t[0]+r,c=o-u+e[0];v.top.style.bottom=a+"px",v.bottom.style.top=l+"px",v.left.style.right=u+"px",v.right.style.left=c+"px",v.top.style.left=o-u+"px",v.top.style.right=o-c+"px",v.bottom.style.left=o-u+"px",v.bottom.style.right=o-c+"px"}else jsPlumb.setAbsolutePosition(n,t),function(t,e){t.style.width=e[0]+"px",t.style.height=e[1]+"px"}(n,e)},S=function(t){var e=t?"block":"none";j?(v.top.style.display=e,v.left.style.display=e,v.right.style.display=e,v.bottom.style.display=e):n.style.display=e,jsPlumb[t?"addClass":"removeClass"](document.body,s)},k=function(n){if(P){E||(S(!0),E=!0),e.consume(n);var o=t.pageLocation(n),i=[Math.abs(o[0]-b[0]),Math.abs(o[1]-b[1])],r=[Math.min(b[0],o[0]),Math.min(b[1],o[1])];w(r,i),C(r,i,[b[0]<o[0],b[1]<o[1]],n.shiftKey)}},T=function n(o){P&&(P=!1,E=!1,e.consume(o),t.off(document,i,n),t.off(document,r,k),t.off(document,p,A),S(!1),x())},A=function(){return!1},_=t.filter?function(n){var o=n.srcElement||n.target;return e.matchesSelector(o,t.filter)}:function(){return!1},I=function(t){var e=document.createElement("div");return e.className=t.join(" "),document.body.appendChild(e),e};j?(v.top=I([l,c]),v.bottom=I([l,h]),v.left=I([l,u]),v.right=I([l,d])):n=I([a]),t.on(g,o,function(n){m&&!_(n)&&(e.consume(n),P=!0,t.on(document,i,T),t.on(document,r,k),t.on(document,p,A),b=t.pageLocation(n),w(b,[1,1]),y(b,n.shiftKey))}),this.isActive=function(){return P},this.setEnabled=function(t){m=t}}}.call("undefined"!=typeof window?window:this),function(){var t,e,n,o,i,r,s,a,l,u,c,d,h=this.jsPlumb,p=this.Rotors,f={},g={ok:"OK",cancel:"Cancel"},m=document.body,v=!1,b=p.newInstance({templateResolver:function(t){return C[t]||document.getElementById(t).innerHTML}}),y={},x=!0,C={};h.ready(function(){(t=document.createElement("div")).className="jtk-dialog-underlay",h.on(t,"click",function(){D(!0)}),(e=document.createElement("div")).className="jtk-dialog-overlay",(n=document.createElement("div")).className="jtk-dialog-title",e.appendChild(n),(o=document.createElement("div")).className="jtk-dialog-content",e.appendChild(o),(i=document.createElement("div")).className="jtk-dialog-buttons",e.appendChild(i)});var P={x:function(t,n,o){var i=(m.clientWidth-o[0])/2,r=window.pageXOffset||t.scrollLeft||document.body.scrollLeft;i<0&&(i=10),r=n?r:m.scrollLeft,e.style.left=i+r+"px"},y:function(t,n,o){var i=.1*m.clientHeight,r=window.pageYOffset||t.scrollTop||document.body.scrollTop;i<0&&(i=10),r=n?r:m.scrollTop,e.style.top=i+r+"px"}},E=function(){if(v){var n=document.documentElement,o=h.getSize(e),i=m==document.body,r=e.getAttribute("data-axis");t.style.position=i?"fixed":"absolute",P[r](n,i,o)}},j=function(t){27==t.keyCode&&D(!0)},w=function(t,e,n){for(var o=n.querySelectorAll("[jtk-att]"),i=0;i<o.length;i++){var r=o[i].tagName.toUpperCase(),s="INPUT"===r?(o[i].getAttribute("type")||"TEXT").toUpperCase():r,a=o[i].getAttribute("jtk-att"),l=b.data(e,a);null!=l&&S[s](o[i],l),t&&o[i].getAttribute("jtk-commit")&&("INPUT"===r?h.on(o[i],"keyup",function(t){10!==t.keyCode&&13!==t.keyCode||D()}):"TEXTAREA"===r&&h.on(o[i],"keyup",function(t){!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||D()}))}},S={TEXT:function(t,e){t.value=e},RADIO:function(t,e){t.checked=t.value==e},CHECKBOX:function(t,e){t.checked=1==e},SELECT:function(t,e){for(var n=t.getAttribute("multiple"),o=0;o<t.options.length;o++)if(n)e.indexOf(t.options[o].value)>-1&&(t.options[o].selected=!0);else if(t.options[o].value===e)return void(t.selectedIndex=o)},TEXTAREA:function(t,e){t.value=e},COLOR:function(t,e){t.value=e},HIDDEN:function(t,e){t.value=e}},k={TEXT:function(t){return t.value},RADIO:function(t){if(t.checked)return t.value},CHECKBOX:function(t){if(t.checked)return!0},SELECT:function(t){var e=t.selectedOptions;if(t.getAttribute("multiple")){for(var n=[],o=0;o<e.length;o++)n.push(e[o].value);return n}return-1!==t.selectedIndex?t.options[t.selectedIndex].value:null},TEXTAREA:function(t){return t.value},COLOR:function(t){return t.value},HIDDEN:function(t){return t.value}},T={TEXT:function(t){t.value=""},RADIO:function(t){t.checked=!1},CHECKBOX:function(t){t.checked=!1},SELECT:function(t){t.selectedIndex=-1},TEXTAREA:function(t){t.value=""},COLOR:function(t){t.value=""},HIDDEN:function(t){t.value=""}},A=function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e){var o=t[n].tagName.toUpperCase(),i="INPUT"===o?(t[n].getAttribute("type")||"TEXT").toUpperCase():o,r=T[i];r&&r(t[n])}},_=function(t){for(var e=t.querySelectorAll("[jtk-att]"),n={},o=0;o<e.length;o++){var i=e[o].tagName.toUpperCase(),r="INPUT"===i?(e[o].getAttribute("type")||"TEXT").toUpperCase():i,s=k[r](e[o]),a=e[o].getAttribute("jtk-att");if(null!=s){var l=b.data(n,a);null!=l?(jsPlumbUtil.isArray(l)||(l=[l],b.data(n,a,l)),l.push(s)):b.data(n,a,s)}}return n},I=function(t,e){try{null!=t&&t.apply(t,Array.prototype.slice.apply(arguments,[1]))}catch(t){}},D=function(n){var c=n?null:_(o);(n||null==l||!1!==l(c))&&(v=!1,t.style.display="none",e.style.display="none",h.off(document,"keyup",j),h.off(window,"resize",E),h.off(window,"scroll",E),h.removeClass(e,"jtk-dialog-overlay-visible"),h.removeClass(e,"jtk-dialog-overlay-top"),h.removeClass(e,"jtk-dialog-overlay-bottom"),h.removeClass(e,"jtk-dialog-overlay-left"),h.removeClass(e,"jtk-dialog-overlay-right"),h.removeClass(e,"jtk-dialog-overlay-x"),h.removeClass(e,"jtk-dialog-overlay-y"),e.setAttribute("data-position",""),e.setAttribute("data-axis",""),m.removeChild(t),m.removeChild(e),function(){for(var t=i.children,e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])}(),n?(I(y.onCancel,o),I(s,o)):(I(y.onOK,c,o),I(r,c,o)),I(y.onClose),I(u),r=s=a=u=l=null)};this.jsPlumbToolkit.Dialogs={initialize:function(t){if(f={},(t=t||{}).dialogs)for(var e in t.dialogs)C[e]=t.dialogs[e][0],f[e]={content:C[e],title:t.dialogs[e][1]||"",cancelable:!1!==t.dialogs[e][2]};else for(var n=t.selector||".jtk-dialog",o=h.getSelector(n),i=0;i<o.length;i++){var r=o[i].getAttribute("id");null!=r&&(f[r]={content:o[i].innerHTML,title:o[i].getAttribute("title")||"",el:o[i],cancelable:"false"!==o[i].getAttribute("cancel")})}t.labels&&h.extend(g,t.labels),t.globals&&h.extend(y,t.globals)},show:function(p){var C;if(p.id&&f[p.id]){x=!1!==p.reposition,r=p.onOK,s=p.onCancel,a=p.onOpen,l=p.onMaybeClose,u=p.onClose;var P,S=p.position||"top",k="jtk-dialog-overlay-"+S,T="top"===S||"bottom"===S?"x":"y",_="jtk-dialog-overlay-"+T;!function(t){if(i.innerHTML="",t.buttons)for(var e,n=0;n<t.buttons.length;n++)e=t.buttons[n],i.appendChild(e),"true"===e.getAttribute("jtk-commit")?h.on(e,"click",function(){D()}):"true"===e.getAttribute("jtk-cancel")&&h.on(e,"click",function(){D(!0)});else(c=document.createElement("button")).className="jtk-dialog-button jtk-dialog-button-ok",c.innerHTML=g.ok,i.appendChild(c),h.on(c,"click",function(){D()}),(d=document.createElement("button")).className="jtk-dialog-button jtk-dialog-button-cancel",d.innerHTML=g.cancel,d.setAttribute("jtk-cancel","true"),i.appendChild(d),h.on(d,"click",function(){D(!0)}),c.innerHTML=t.labels&&t.labels.ok||g.ok,d.innerHTML=t.labels&&t.labels.cancel||g.cancel}(p),P=p.container,m=null==P?document.body:"string"==typeof P?document.getElementById(P):P;var I=p.data||{},M=b.template(p.id,I);n.innerHTML=p.title||f[p.id].title||"",o.innerHTML="";var N=M.childNodes.length;for(C=0;C<N;C++)o.appendChild(M.childNodes[0]);m.appendChild(t),m.appendChild(e),h.addClass(e,k),h.addClass(e,_),t.style.display="block",e.style.display="block",e.setAttribute("data-position",S),e.setAttribute("data-axis",T);var L=f[p.id].cancelable?"visible":"hidden",O=i.querySelectorAll("[jtk-cancel='true']");for(C=0;C<O.length;C++)O[C].style.visibility=L;v=!0,E(),w(!0,I,o),h.on(document,"keyup",j),x&&(h.on(window,"resize",E),h.on(window,"scroll",E)),h.on(e,"click","[jtk-clear]",function(t){var n=this.getAttribute("jtk-att");n&&A(e.querySelectorAll("[jtk-att='"+n+"']:not([jtk-clear])"),this)}),h.on(e,"click","[jtk-clear-all]",function(t){A(e.querySelectorAll("[jtk-att]:not([jtk-clear])"),this)}),y.onOpen&&y.onOpen(e),a&&a(e),h.addClass(e,"jtk-dialog-overlay-visible");try{var F=o.querySelector("[jtk-focus]");F&&setTimeout(function(){F.focus()},0)}catch(t){}}},hide:function(){D(!0)},clear:A,apply:w.bind(null,!1),extract:_},"undefined"!=typeof exports&&(exports.Dialogs=this.jsPlumbToolkit.Dialogs)}.call("undefined"!=typeof window?window:this),function(){this.jsPlumbToolkit.DrawingTools=function(t){var e,n,o,i,r,s,a,l,u,c=t.renderer,d=c.getToolkit(),h=c.getJsPlumb(),p={},f=t.widthAttribute||"w",g=t.heightAttribute||"h",m=t.leftAttribute||"left",v=t.topAttribute||"top",b=function(t,e,n,o){var i=document.createElement(t);if(e&&(i.className=e),n&&n.appendChild(i),o)for(var r in o)i.setAttribute(r,o[r]);return i},y=function(t,e){var n,o,i=e.getRenderedNode(t.id);return n=t.id,(o=p[n])&&o[0]&&o[0].parentNode&&o[0].parentNode.removeChild(o[0]),delete p[n],i},x=function(t,o,i,r){var c={};return c[f]=e?i:a-s,c[g]=n?r:u-l,c[m]=e?t:s,c[v]=n?o:l,c},C={tl:function(t,e){var n=s+t,o=l+e,i=a-n,r=u-o;return n>=a&&(i=n-a,n=a),o>=u&&(r=o-u,o=u),x(n,o,i,r)},tr:function(t,e){var n=a-s+t,o=l+e,i=u-o,r=s;return n<=0&&(r=s+n,n*=-1),o>=u&&(i=o-u,o=u),x(r,o,n,i)},bl:function(t,e){var n=s+t,o=u-l+e,i=a-n,r=l;return n>=a&&(i=n-a,n=a),o<=0&&(r+=o,o*=-1),x(n,r,i,o)},br:function(t,e){var n=a-s+t,o=u-l+e,i=s,r=l;return n<=0&&(i=s+n,n*=-1),o<=0&&(r+=o,o*=-1),x(i,r,n,o)}};d.bind("selectionCleared",function(){!function(){for(var t in p){var e=p[t];e[0]&&e[0].parentNode&&e[0].parentNode.removeChild(e[0]),delete p[t]}}()}),d.bind("select",function(t){!function(t,e){var n=y(t,e);if(null!=n){var o=b("div","jtk-draw-skeleton",n),i=n.getAttribute("jtk-x-resize"),r=n.getAttribute("jtk-y-resize");b("div","jtk-draw-drag",o),b("div","jtk-draw-handle jtk-draw-handle-tl",o,{"data-dir":"tl","data-node-id":t.id}),b("div","jtk-draw-handle jtk-draw-handle-tr",o,{"data-dir":"tr","data-node-id":t.id}),b("div","jtk-draw-handle jtk-draw-handle-bl",o,{"data-dir":"bl","data-node-id":t.id}),b("div","jtk-draw-handle jtk-draw-handle-br",o,{"data-dir":"br","data-node-id":t.id}),p[t.id]=[o,"false"!==i,"false"!==r]}}(t.obj,c)}),d.bind("deselect",function(t){y(t.obj,c)});var P=function(t){var e=c.mapEventLocation(t),n=e.left-o.left,s=e.top-o.top,a=i(n,s,"");d.updateNode(r,a),c.setPosition(r,a[m],a[v],!0)},E=function t(e){c.storePositionInModel(r.id),h.removeClass(document.body,"jtk-drag-select-defeat"),h.off(document,"mousemove",P),h.off(document,"mouseup",t),jsPlumbUtil.consume(e)};h.on(document,"mousedown",".jtk-draw-handle",function(t){var f=this.getAttribute("data-dir"),g=this.getAttribute("data-node-id");r=d.getNode(g),e=p[g][1],n=p[g][2],o=c.mapEventLocation(t);var m=c.getCoordinates(r);s=m.x,l=m.y,a=s+m.w,u=l+m.h,i=C[f],h.addClass(document.body,"jtk-drag-select-defeat"),h.on(document,"mousemove",P),h.on(document,"mouseup",E)})},"undefined"!=typeof exports&&(exports.DrawingTools=this.jsPlumbToolkit.DrawingTools)}.call("undefined"!=typeof window?window:this)},"u/vk":function(t,e){},ufMx:function(t,e,n){"use strict";n("R4Sj");var o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"dialogExportSet",attrs:{title:"导出设置",visible:t.$root.dialogExportSet},on:{"update:visible":function(e){return t.$set(t.$root,"dialogExportSet",e)}}},[n("div",{staticClass:"el-dialog-content"},[n("div",{staticClass:"selectExportFormat clearfix"},[n("span",{staticClass:"fl"},[t._v("选择导出格式")]),t._v(" "),n("el-radio-group",{staticClass:"fl",model:{value:t.exportFormat,callback:function(e){t.exportFormat=e},expression:"exportFormat"}},t._l(t.exportFormatList,function(e,o){return n("el-radio",{key:o,attrs:{label:e.label}},[t._v(t._s(e.label))])}),1)],1)]),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("button",{staticClass:"dialog-confirm",attrs:{type:"button",disabled:t.$root.btnDisable},on:{click:function(e){return t.exportConfirmFn(t.exportFormat)}}},[t._v("确 定")])])])},staticRenderFns:[]};var i=n("C7Lr")({components:{},data:function(){return{exportFormat:"png图片",exportFormatList:[{label:"word文档"},{label:"png图片"},{label:"PDF文件"}]}},computed:{},watch:{},methods:{exportConfirmFn:function(t){this.$root.btnDisable=!0,this.$emit("confirm-export",t)}},mounted:function(){}},o,!1,function(t){n("hNCa")},null,null);e.a=i.exports},vjOI:function(t,e,n){"use strict";(function(t){var o=n("4YfN"),i=n.n(o),r=n("R4Sj"),s=n("pM0b"),a=n("FViS");e.a={components:{eachChart:s.a,canvasBoard:a.a},props:{},data:function(){return{dialogChartSet:!1,flagMainMap:!1,chartTypeActive:-1,isDisabled:!1,highlightArr:[],selectType:"",okSelectType:"",switchType:["twoSbarY","twoSbar","twoSfunnel","twoSLine","twoSacreage","twoSpie","twoSpieRing","twoSareaPie","twoSradiusPie","twoSradarNood","twoSradarLine","twoMbarY","twoMbar","twoMClusterY","twoMCluster","twoSMcard","twoSScard","twoMStackAcreage","twoMradarLine","twoMradarNood","twoMacreage","twoMLine","twoMRiver"],switchTypeObj:[{name:"横向柱状图",value:"twoSbarY"},{name:"竖向柱状图",value:"twoSbar"},{name:"漏斗图",value:"twoSfunnel"},{name:"折线图",value:"twoSLine"},{name:"普通面积图",value:"twoSacreage"},{name:"饼状图",value:"twoSpie"},{name:"环形图",value:"twoSpieRing"},{name:"定角南丁格尔图",value:"twoSareaPie"},{name:"不定角南丁格尔图",value:"twoSradiusPie"},{name:"面状雷达图",value:"twoSradarNood"},{name:"线状雷达图",value:"twoSradarLine"},{name:"横向堆积柱状图",value:"twoMbarY"},{name:"竖向堆积柱状图",value:"twoMbar"},{name:"横向簇状柱状图",value:"twoMClusterY"},{name:"竖向簇状柱状图",value:"twoMCluster"},{name:"多行卡片图",value:"twoSMcard"},{name:"标准卡片图",value:"twoSScard"},{name:"堆积面积图",value:"twoMStackAcreage"},{name:"多序列线状雷达图",value:"twoMradarLine"},{name:"多序列面状雷达图",value:"twoMradarNood"},{name:"多序列面积图",value:"twoMacreage"},{name:"多序列折线图",value:"twoMLine"},{name:"河流图",value:"twoMRiver"}]}},computed:i()({},Object(r.c)(["layoutType","chartArr","currentChartIndex","echartsData"])),watch:{echartsData:{handler:function(t,e){this.showChart()},deep:!0}},methods:{clickDialogChart:function(e,n,o){t(n.target).hasClass("highlight")&&(this.chartTypeActive=e,this.selectType=o)},coverPersonnelNo:function(){this.selectType="",this.dialogChartSet=!1},chartSetConfirmFn:function(){if(this.dialogChartSet=!1,this.flagMainMap){var t=this.echartsData[0],e=this.echartsData[this.currentChartIndex];this.echartsData[0]=e,this.echartsData[this.currentChartIndex]=t,""!=this.selectType&&(this.echartsData[0].chartType=this.selectType)}""==this.selectType||this.flagMainMap||(this.echartsData[this.currentChartIndex].chartType=this.selectType)},showChart:function(){switch(this.echartsData.length){case 1:this.$store.commit("changeTemplateActive",8),this.$store.commit("changeLayoutType","one"),this.$store.commit("changeChartArr",[0]);break;case 2:this.$store.commit("changeTemplateActive",6),this.$store.commit("changeLayoutType","two-v"),this.$store.commit("changeChartArr",[0,1]);break;case 3:this.$store.commit("changeTemplateActive",4),this.$store.commit("changeLayoutType","three-left"),this.$store.commit("changeChartArr",[0,1,2]);break;case 4:this.$store.commit("changeTemplateActive",3),this.$store.commit("changeLayoutType","four"),this.$store.commit("changeChartArr",[0,1,2,3]);break;case 5:this.$store.commit("changeTemplateActive",2),this.$store.commit("changeLayoutType","five"),this.$store.commit("changeChartArr",[0,1,2,3,4]);break;case 6:this.$store.commit("changeTemplateActive",0),this.$store.commit("changeLayoutType","six-left"),this.$store.commit("changeChartArr",[0,1,2,3,4,5]);break;default:this.$store.commit("changeTemplateActive",-1),this.$store.commit("changeLayoutType",""),this.$store.commit("changeChartArr",[])}}},created:function(){this.showChart()},mounted:function(){}}}).call(e,n("L7Pj"))}});